<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¿¡å·åˆ†æä¸å¤„ç† - æ¨¡æ‹Ÿæ»¤æ³¢å™¨çš„è®¾è®¡</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 30px;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        
        h2 {
            color: #34495e;
            border-left: 4px solid #3498db;
            padding-left: 15px;
            margin-top: 30px;
        }
        
        h3 {
            color: #2980b9;
            margin-top: 25px;
        }
        
        .knowledge-point {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .formula {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            font-family: 'Times New Roman', serif;
            font-size: 18px;
        }
        
        .important {
            background: #ffeaa7;
            border: 2px solid #fdcb6e;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .example {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .plot-container {
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        canvas {
            border: 1px solid #ccc;
            margin: 10px;
        }
        
        .controls {
            margin: 15px 0;
            text-align: center;
        }
        
        .controls input, .controls select {
            margin: 5px;
            padding: 5px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .controls button {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        
        .controls button:hover {
            background: #2980b9;
        }
        
        .exercise {
            background: #e8f5e8;
            border: 1px solid #c3e6c3;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .exercise h4 {
            color: #2e7d2e;
            margin-top: 0;
        }
        
        .answer {
            background: #f0f0f0;
            border-radius: 5px;
            padding: 10px;
            margin-top: 10px;
            display: none;
        }
        
        .show-answer {
            background: #28a745;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .show-answer:hover {
            background: #218838;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        
        th {
            background: #f2f2f2;
        }
        
        .highlight {
            background: #ffeb3b;
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .butterworth-box {
            background: #e8f5e8;
            border: 2px solid #4caf50;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .chebyshev-box {
            background: #fff3e0;
            border: 2px solid #ff9800;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .comparison-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        
        .design-steps {
            background: #f0f8ff;
            border: 1px solid #87ceeb;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .design-steps ol {
            margin: 0;
            padding-left: 20px;
        }
        
        .transformation-demo {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        
        .transformation-part {
            text-align: center;
            flex: 1;
            margin: 0 10px;
        }
        
        .pole-zero-plot {
            background: #fafafa;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }
        
        .characteristic-table {
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .filter-property {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ä¿¡å·åˆ†æä¸å¤„ç† - æ¨¡æ‹Ÿæ»¤æ³¢å™¨çš„è®¾è®¡</h1>
        
        <div class="important">
            <h3>ğŸ¯ æœ¬èŠ‚æ ¸å¿ƒå†…å®¹</h3>
            <p>å­¦ä¹ ä¸‰ç§ç»å…¸æ¨¡æ‹Ÿæ»¤æ³¢å™¨çš„è®¾è®¡æ–¹æ³•ï¼š</p>
            <ul>
                <li><strong>å·´ç‰¹æ²ƒæ€æ»¤æ³¢å™¨</strong>ï¼šæœ€å¤§å¹³å¦å¹…åº¦ç‰¹æ€§</li>
                <li><strong>åˆ‡æ¯”é›ªå¤«æ»¤æ³¢å™¨</strong>ï¼šç­‰çº¹æ³¢ç‰¹æ€§ï¼Œæ›´é™¡å³­çš„è¿‡æ¸¡å¸¦</li>
                <li><strong>é¢‘ç‡å˜æ¢</strong>ï¼šä»ä½é€šåŸå‹åˆ°å…¶ä»–ç±»å‹çš„ç³»ç»ŸåŒ–æ–¹æ³•</li>
            </ul>
        </div>
        
        <h2>1. å·´ç‰¹æ²ƒæ€æ»¤æ³¢å™¨è®¾è®¡</h2>
        
        <div class="butterworth-box">
            <h3>ğŸŸ¢ å·´ç‰¹æ²ƒæ€æ»¤æ³¢å™¨ç‰¹æ€§</h3>
            <p>å·´ç‰¹æ²ƒæ€æ»¤æ³¢å™¨åˆç§°<strong>æœ€å¤§å¹³å¦æ»¤æ³¢å™¨</strong>ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
            <ul>
                <li><strong>é€šå¸¦å†…æœ€å¤§å¹³å¦</strong>ï¼šå¹…åº¦å“åº”åœ¨é€šå¸¦å†…å°½å¯èƒ½å¹³å¦</li>
                <li><strong>å•è°ƒä¸‹é™</strong>ï¼šä»é€šå¸¦åˆ°é˜»å¸¦å•è°ƒé€’å‡ï¼Œæ— çº¹æ³¢</li>
                <li><strong>3dBæˆªæ­¢é¢‘ç‡</strong>ï¼šåœ¨æˆªæ­¢é¢‘ç‡å¤„å¹…åº¦ä¸‹é™3dB</li>
                <li><strong>ç®€å•è®¾è®¡</strong>ï¼šè®¾è®¡å…¬å¼ç®€å•ï¼Œæ˜“äºå®ç°</li>
            </ul>
        </div>
        
        <div class="knowledge-point">
            <h3>å·´ç‰¹æ²ƒæ€ä½é€šæ»¤æ³¢å™¨</h3>
            
            <h4>å¹…åº¦å¹³æ–¹å“åº”</h4>
            <div class="formula">
                |H(jÏ‰)|Â² = 1/(1 + (Ï‰/Ï‰c)^(2n))
            </div>
            
            <h4>ä¼ é€’å‡½æ•°</h4>
            <div class="formula">
                H(s) = Ï‰c^n / âˆ(k=1 to n)(s - sk)
            </div>
            
            <h4>æç‚¹åˆ†å¸ƒ</h4>
            <p>æç‚¹å‡åŒ€åˆ†å¸ƒåœ¨ä»¥Ï‰cä¸ºåŠå¾„çš„å·¦åŠåœ†ä¸Šï¼š</p>
            <div class="formula">
                sk = Ï‰c Â· e^(j(2k+n-1)Ï€/(2n)), k = 1, 2, ..., n
            </div>
            
            <div class="example">
                <h4>å·´ç‰¹æ²ƒæ€æ»¤æ³¢å™¨çš„å…³é”®ç‰¹ç‚¹</h4>
                <ul>
                    <li><strong>é˜¶æ•°n</strong>ï¼šå†³å®šæ»¤æ³¢å™¨çš„é™¡å³­ç¨‹åº¦</li>
                    <li><strong>æˆªæ­¢é¢‘ç‡Ï‰c</strong>ï¼š3dBä¸‹é™ç‚¹</li>
                    <li><strong>æç‚¹ç‰¹æ€§</strong>ï¼šå‡åœ¨å·¦åŠå¹³é¢ï¼Œä¿è¯ç¨³å®šæ€§</li>
                    <li><strong>ç¾¤å»¶è¿Ÿ</strong>ï¼šåœ¨é€šå¸¦å†…å˜åŒ–ç›¸å¯¹å¹³ç¼“</li>
                </ul>
            </div>
        </div>
        
        <div class="design-steps">
            <h3>ğŸ”§ å·´ç‰¹æ²ƒæ€æ»¤æ³¢å™¨è®¾è®¡æ­¥éª¤</h3>
            <ol>
                <li><strong>ç¡®å®šæŠ€æœ¯æŒ‡æ ‡</strong>ï¼šé€šå¸¦æˆªæ­¢é¢‘ç‡Ï‰pã€é˜»å¸¦æˆªæ­¢é¢‘ç‡Ï‰sã€é€šå¸¦è¡°å‡Apã€é˜»å¸¦è¡°å‡As</li>
                <li><strong>è®¡ç®—æ»¤æ³¢å™¨é˜¶æ•°</strong>ï¼šn â‰¥ log((10^(As/10) - 1)/(10^(Ap/10) - 1)) / (2log(Ï‰s/Ï‰p))</li>
                <li><strong>ç¡®å®šæˆªæ­¢é¢‘ç‡</strong>ï¼šæ ¹æ®é€šå¸¦æˆ–é˜»å¸¦è¦æ±‚é€‰æ‹©Ï‰c</li>
                <li><strong>è®¡ç®—æç‚¹</strong>ï¼šä½¿ç”¨æç‚¹åˆ†å¸ƒå…¬å¼</li>
                <li><strong>æ„é€ ä¼ é€’å‡½æ•°</strong>ï¼šH(s) = Ï‰c^n / âˆ(s - sk)</li>
            </ol>
        </div>
        
        <div class="plot-container">
            <h3>å·´ç‰¹æ²ƒæ€æ»¤æ³¢å™¨ç‰¹æ€§æ¼”ç¤º</h3>
            <canvas id="butterworthDemo" width="800" height="400"></canvas>
            <div class="controls">
                <label>æ»¤æ³¢å™¨é˜¶æ•°ï¼š</label>
                <input type="range" id="butterworthOrder" min="1" max="8" step="1" value="4">
                <span id="butterworthOrderValue">4</span>
                <label>æˆªæ­¢é¢‘ç‡ï¼š</label>
                <input type="range" id="butterworthCutoff" min="0.5" max="5" step="0.1" value="2">
                <span id="butterworthCutoffValue">2.0</span> Hz
                <button onclick="updateButterworthDemo()">æ›´æ–°ç‰¹æ€§</button>
            </div>
        </div>
        
        <div class="pole-zero-plot">
            <h3>å·´ç‰¹æ²ƒæ€æ»¤æ³¢å™¨æç‚¹åˆ†å¸ƒ</h3>
            <canvas id="butterworthPoles" width="400" height="400"></canvas>
            <p>æç‚¹å‡åŒ€åˆ†å¸ƒåœ¨å·¦åŠåœ†ä¸Šï¼Œä¸å®è½´æˆç­‰è§’åº¦</p>
        </div>
        
        <h2>2. åˆ‡æ¯”é›ªå¤«æ»¤æ³¢å™¨è®¾è®¡</h2>
        
        <div class="chebyshev-box">
            <h3>ğŸŸ¡ åˆ‡æ¯”é›ªå¤«æ»¤æ³¢å™¨ç‰¹æ€§</h3>
            <p>åˆ‡æ¯”é›ªå¤«æ»¤æ³¢å™¨åˆ†ä¸ºä¸¤ç±»ï¼Œå…·æœ‰<strong>ç­‰çº¹æ³¢ç‰¹æ€§</strong>ï¼š</p>
            <ul>
                <li><strong>ç¬¬ä¸€ç±»åˆ‡æ¯”é›ªå¤«</strong>ï¼šé€šå¸¦ç­‰çº¹æ³¢ï¼Œé˜»å¸¦å•è°ƒ</li>
                <li><strong>ç¬¬äºŒç±»åˆ‡æ¯”é›ªå¤«</strong>ï¼šé˜»å¸¦ç­‰çº¹æ³¢ï¼Œé€šå¸¦å•è°ƒ</li>
                <li><strong>æ›´é™¡å³­çš„è¿‡æ¸¡å¸¦</strong>ï¼šç›¸åŒé˜¶æ•°ä¸‹è¿‡æ¸¡å¸¦æ›´çª„</li>
                <li><strong>è®¾è®¡æŠ˜è¡·</strong>ï¼šçº¹æ³¢æ¢å–æ›´å¥½çš„é¢‘ç‡é€‰æ‹©æ€§</li>
            </ul>
        </div>
        
        <div class="knowledge-point">
            <h3>ç¬¬ä¸€ç±»åˆ‡æ¯”é›ªå¤«æ»¤æ³¢å™¨</h3>
            
            <h4>å¹…åº¦å¹³æ–¹å“åº”</h4>
            <div class="formula">
                |H(jÏ‰)|Â² = 1/(1 + ÎµÂ²TnÂ²(Ï‰/Ï‰p))
            </div>
            
            <p>å…¶ä¸­ï¼š</p>
            <ul>
                <li><strong>Îµ</strong>ï¼šçº¹æ³¢å‚æ•°ï¼ŒÎµ = âˆš(10^(Rp/10) - 1)</li>
                <li><strong>Tn(x)</strong>ï¼šné˜¶åˆ‡æ¯”é›ªå¤«å¤šé¡¹å¼</li>
                <li><strong>Ï‰p</strong>ï¼šé€šå¸¦æˆªæ­¢é¢‘ç‡</li>
            </ul>
            
            <h4>åˆ‡æ¯”é›ªå¤«å¤šé¡¹å¼</h4>
            <div class="formula">
                T0(x) = 1<br>
                T1(x) = x<br>
                T2(x) = 2xÂ² - 1<br>
                Tn(x) = 2xTn-1(x) - Tn-2(x)
            </div>
        </div>
        
        <div class="knowledge-point">
            <h3>ç¬¬äºŒç±»åˆ‡æ¯”é›ªå¤«æ»¤æ³¢å™¨</h3>
            
            <h4>å¹…åº¦å¹³æ–¹å“åº”</h4>
            <div class="formula">
                |H(jÏ‰)|Â² = 1/(1 + 1/(ÎµÂ²UnÂ²(Ï‰s/Ï‰)))
            </div>
            
            <p>å…¶ä¸­ï¼š</p>
            <ul>
                <li><strong>Un(x)</strong>ï¼šné˜¶ç¬¬äºŒç±»åˆ‡æ¯”é›ªå¤«å¤šé¡¹å¼</li>
                <li><strong>Ï‰s</strong>ï¼šé˜»å¸¦æˆªæ­¢é¢‘ç‡</li>
                <li><strong>ç‰¹ç‚¹</strong>ï¼šé˜»å¸¦æœ‰ç­‰çº¹æ³¢ï¼Œé€šå¸¦å•è°ƒä¸‹é™</li>
            </ul>
        </div>
        
        <div class="comparison-grid">
            <div class="comparison-item">
                <h4>å·´ç‰¹æ²ƒæ€</h4>
                <ul>
                    <li>é€šå¸¦æœ€å¤§å¹³å¦</li>
                    <li>å•è°ƒç‰¹æ€§</li>
                    <li>è¾ƒå®½è¿‡æ¸¡å¸¦</li>
                    <li>ç¾¤å»¶è¿Ÿè¾ƒå¹³å¦</li>
                    <li>è®¾è®¡ç®€å•</li>
                </ul>
            </div>
            <div class="comparison-item">
                <h4>åˆ‡æ¯”é›ªå¤«Iå‹</h4>
                <ul>
                    <li>é€šå¸¦ç­‰çº¹æ³¢</li>
                    <li>é˜»å¸¦å•è°ƒ</li>
                    <li>è¾ƒçª„è¿‡æ¸¡å¸¦</li>
                    <li>ç¾¤å»¶è¿Ÿå˜åŒ–å¤§</li>
                    <li>è¾ƒå¥½é€‰æ‹©æ€§</li>
                </ul>
            </div>
            <div class="comparison-item">
                <h4>åˆ‡æ¯”é›ªå¤«IIå‹</h4>
                <ul>
                    <li>é€šå¸¦å•è°ƒ</li>
                    <li>é˜»å¸¦ç­‰çº¹æ³¢</li>
                    <li>è¿‡æ¸¡å¸¦ä¸­ç­‰</li>
                    <li>ç›¸ä½ç‰¹æ€§å¥½</li>
                    <li>è®¾è®¡å¤æ‚</li>
                </ul>
            </div>
        </div>
        
        <div class="plot-container">
            <h3>ä¸‰ç§æ»¤æ³¢å™¨ç±»å‹å¯¹æ¯”</h3>
            <canvas id="filterComparison" width="800" height="400"></canvas>
            <div class="controls">
                <label>æ»¤æ³¢å™¨é˜¶æ•°ï¼š</label>
                <input type="range" id="comparisonOrder" min="2" max="8" step="1" value="4">
                <span id="comparisonOrderValue">4</span>
                <label>é€šå¸¦çº¹æ³¢ï¼š</label>
                <input type="range" id="rippleAmount" min="0.1" max="3" step="0.1" value="1">
                <span id="rippleValue">1.0</span> dB
                <button onclick="updateFilterComparison()">æ›´æ–°å¯¹æ¯”</button>
            </div>
        </div>
        
        <h2>3. é¢‘ç‡å˜æ¢</h2>
        
        <div class="knowledge-point">
            <h3>é¢‘ç‡å˜æ¢çš„åŸºæœ¬æ€æƒ³</h3>
            <p>é¢‘ç‡å˜æ¢å…è®¸æˆ‘ä»¬ä»<strong>ä½é€šåŸå‹æ»¤æ³¢å™¨</strong>å‡ºå‘ï¼Œé€šè¿‡<strong>å¤é¢‘ç‡å˜æ¢</strong>å¾—åˆ°å…¶ä»–ç±»å‹çš„æ»¤æ³¢å™¨ï¼š</p>
            
            <div class="formula">
                s â†’ f(s)
            </div>
            
            <p>å…¶ä¸­f(s)æ˜¯å˜æ¢å‡½æ•°ï¼Œå°†åŸå‹æ»¤æ³¢å™¨çš„å¤é¢‘ç‡sæ˜ å°„åˆ°æ–°æ»¤æ³¢å™¨çš„å¤é¢‘ç‡ã€‚</p>
        </div>
        
        <div class="design-steps">
            <h3>ğŸ”„ å››ç§åŸºæœ¬é¢‘ç‡å˜æ¢</h3>
            
            <h4>1. ä½é€šåˆ°ä½é€šå˜æ¢</h4>
            <div class="formula">
                s â†’ s/Ï‰c'
            </div>
            <p>å°†æˆªæ­¢é¢‘ç‡ä»Ï‰cå˜æ¢åˆ°Ï‰c'</p>
            
            <h4>2. ä½é€šåˆ°é«˜é€šå˜æ¢</h4>
            <div class="formula">
                s â†’ Ï‰cÂ·Ï‰c'/s
            </div>
            <p>ä½é¢‘å’Œé«˜é¢‘äº’æ¢ï¼Œæˆªæ­¢é¢‘ç‡ä¸ºÏ‰c'</p>
            
            <h4>3. ä½é€šåˆ°å¸¦é€šå˜æ¢</h4>
            <div class="formula">
                s â†’ (sÂ² + Ï‰lÂ·Ï‰h)/(s(Ï‰h - Ï‰l))
            </div>
            <p>å…¶ä¸­Ï‰lä¸ºä¸‹æˆªæ­¢é¢‘ç‡ï¼ŒÏ‰hä¸ºä¸Šæˆªæ­¢é¢‘ç‡</p>
            
            <h4>4. ä½é€šåˆ°å¸¦é˜»å˜æ¢</h4>
            <div class="formula">
                s â†’ s(Ï‰h - Ï‰l)/(sÂ² + Ï‰lÂ·Ï‰h)
            </div>
            <p>é˜»å¸¦åœ¨[Ï‰l, Ï‰h]ä¹‹é—´</p>
        </div>
        
        <div class="important">
            <h3>âš ï¸ é¢‘ç‡å˜æ¢çš„é‡è¦æ€§è´¨</h3>
            <ul>
                <li><strong>ä¿æŒæ»¤æ³¢å™¨ç±»å‹</strong>ï¼šå·´ç‰¹æ²ƒæ€â†’å·´ç‰¹æ²ƒæ€ï¼Œåˆ‡æ¯”é›ªå¤«â†’åˆ‡æ¯”é›ªå¤«</li>
                <li><strong>é˜¶æ•°å˜åŒ–</strong>ï¼šä½é€šåˆ°å¸¦é€š/å¸¦é˜»æ—¶é˜¶æ•°åŠ å€</li>
                <li><strong>ç¨³å®šæ€§ä¿æŒ</strong>ï¼šç¨³å®šçš„åŸå‹äº§ç”Ÿç¨³å®šçš„å˜æ¢æ»¤æ³¢å™¨</li>
                <li><strong>å› æœæ€§ä¿æŒ</strong>ï¼šå› æœçš„åŸå‹äº§ç”Ÿå› æœçš„å˜æ¢æ»¤æ³¢å™¨</li>
            </ul>
        </div>
        
        <div class="plot-container">
            <h3>é¢‘ç‡å˜æ¢æ¼”ç¤º</h3>
            <div class="transformation-demo">
                <div class="transformation-part">
                    <canvas id="prototypeFilter" width="250" height="200"></canvas>
                    <p>ä½é€šåŸå‹</p>
                </div>
                <div class="transformation-part">
                    <canvas id="transformedFilter" width="250" height="200"></canvas>
                    <p>å˜æ¢åæ»¤æ³¢å™¨</p>
                </div>
            </div>
            <div class="controls">
                <label>å˜æ¢ç±»å‹ï¼š</label>
                <select id="transformationType">
                    <option value="lowpass">ä½é€šâ†’ä½é€š</option>
                    <option value="highpass">ä½é€šâ†’é«˜é€š</option>
                    <option value="bandpass">ä½é€šâ†’å¸¦é€š</option>
                    <option value="bandstop">ä½é€šâ†’å¸¦é˜»</option>
                </select>
                <label>å‚æ•°1ï¼š</label>
                <input type="range" id="transformParam1" min="0.5" max="5" step="0.1" value="2">
                <span id="param1Value">2.0</span>
                <label>å‚æ•°2ï¼š</label>
                <input type="range" id="transformParam2" min="1" max="8" step="0.1" value="4">
                <span id="param2Value">4.0</span>
                <button onclick="updateTransformationDemo()">åº”ç”¨å˜æ¢</button>
            </div>
        </div>
        
        <div class="characteristic-table">
            <h3>æ»¤æ³¢å™¨è®¾è®¡é€‰æ‹©æŒ‡å—</h3>
            <table>
                <tr>
                    <th>åº”ç”¨è¦æ±‚</th>
                    <th>æ¨èç±»å‹</th>
                    <th>åŸå› </th>
                </tr>
                <tr>
                    <td>æœ€å¤§é€šå¸¦å¹³å¦åº¦</td>
                    <td>å·´ç‰¹æ²ƒæ€</td>
                    <td>é€šå¸¦å†…å¹…åº¦å“åº”æœ€å¹³å¦</td>
                </tr>
                <tr>
                    <td>æœ€é™¡å³­çš„è¿‡æ¸¡å¸¦</td>
                    <td>åˆ‡æ¯”é›ªå¤«Iå‹</td>
                    <td>ç›¸åŒé˜¶æ•°ä¸‹è¿‡æ¸¡å¸¦æœ€çª„</td>
                </tr>
                <tr>
                    <td>æœ€ä½³æ—¶åŸŸå“åº”</td>
                    <td>å·´ç‰¹æ²ƒæ€</td>
                    <td>ç¾¤å»¶è¿Ÿå˜åŒ–æœ€å°</td>
                </tr>
                <tr>
                    <td>ä¸¥æ ¼é˜»å¸¦è¦æ±‚</td>
                    <td>åˆ‡æ¯”é›ªå¤«IIå‹</td>
                    <td>é˜»å¸¦è¡°å‡å¯æ§</td>
                </tr>
                <tr>
                    <td>ç®€å•å®ç°</td>
                    <td>å·´ç‰¹æ²ƒæ€</td>
                    <td>è®¾è®¡å…¬å¼æœ€ç®€å•</td>
                </tr>
            </table>
        </div>
        
        <div class="plot-container">
            <h3>æ»¤æ³¢å™¨è®¾è®¡è®¡ç®—å™¨</h3>
            <canvas id="designCalculator" width="800" height="300"></canvas>
            <div class="controls">
                <label>æ»¤æ³¢å™¨ç±»å‹ï¼š</label>
                <select id="calculatorType">
                    <option value="butterworth">å·´ç‰¹æ²ƒæ€</option>
                    <option value="chebyshev1">åˆ‡æ¯”é›ªå¤«Iå‹</option>
                    <option value="chebyshev2">åˆ‡æ¯”é›ªå¤«IIå‹</option>
                </select>
                <label>é€šå¸¦é¢‘ç‡(Hz)ï¼š</label>
                <input type="number" id="passbandFreq" value="1000" min="100" max="10000">
                <label>é˜»å¸¦é¢‘ç‡(Hz)ï¼š</label>
                <input type="number" id="stopbandFreq" value="2000" min="200" max="20000">
                <label>é€šå¸¦çº¹æ³¢(dB)ï¼š</label>
                <input type="number" id="passbandRipple" value="1" min="0.1" max="5" step="0.1">
                <label>é˜»å¸¦è¡°å‡(dB)ï¼š</label>
                <input type="number" id="stopbandAtten" value="40" min="20" max="100">
                <button onclick="calculateFilter()">è®¡ç®—æ»¤æ³¢å™¨</button>
            </div>
            <div id="calculatorResult" style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 5px;"></div>
        </div>
        
        <h2>ç»ƒä¹ é¢˜ç›®</h2>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 1ï¼šå·´ç‰¹æ²ƒæ€æ»¤æ³¢å™¨è®¾è®¡</h4>
            <p>è®¾è®¡ä¸€ä¸ªå·´ç‰¹æ²ƒæ€ä½é€šæ»¤æ³¢å™¨ï¼Œè¦æ±‚ï¼š</p>
            <ul>
                <li>é€šå¸¦æˆªæ­¢é¢‘ç‡ï¼šfp = 1kHz</li>
                <li>é˜»å¸¦æˆªæ­¢é¢‘ç‡ï¼šfs = 3kHz</li>
                <li>é€šå¸¦æœ€å¤§è¡°å‡ï¼šAp = 3dB</li>
                <li>é˜»å¸¦æœ€å°è¡°å‡ï¼šAs = 20dB</li>
            </ul>
            <p>æ±‚æ‰€éœ€çš„æ»¤æ³¢å™¨é˜¶æ•°å’Œ3dBæˆªæ­¢é¢‘ç‡ã€‚</p>
            <button class="show-answer" onclick="toggleAnswer('answer1')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer1" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                1. è®¡ç®—é˜¶æ•°ï¼šn â‰¥ log((10^2 - 1)/(10^0.3 - 1)) / (2log(3)) = log(99/0.995) / (2log(3)) â‰ˆ 2.04<br>
                å–n = 3<br>
                2. é€‰æ‹©3dBæˆªæ­¢é¢‘ç‡ï¼š<br>
                   - æŒ‰é€šå¸¦è¦æ±‚ï¼šÏ‰c â‰¥ Ï‰p = 2Ï€Ã—1000 = 6283 rad/s<br>
                   - æŒ‰é˜»å¸¦è¦æ±‚ï¼šÏ‰c â‰¤ Ï‰s/(10^(As/10)-1)^(1/2n) = 18849/2.68 â‰ˆ 7033 rad/s<br>
                   - é€‰æ‹©Ï‰c = 6283 rad/s (fc = 1kHz)
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 2ï¼šåˆ‡æ¯”é›ªå¤«æ»¤æ³¢å™¨ç‰¹æ€§</h4>
            <p>å¯¹äº4é˜¶åˆ‡æ¯”é›ªå¤«Iå‹æ»¤æ³¢å™¨ï¼Œé€šå¸¦çº¹æ³¢ä¸º1dBï¼š</p>
            <ol>
                <li>è®¡ç®—çº¹æ³¢å‚æ•°Îµ</li>
                <li>åœ¨é€šå¸¦è¾¹ç•Œé¢‘ç‡å¤„çš„å¹…åº¦å“åº”æ˜¯å¤šå°‘ï¼Ÿ</li>
                <li>ä¸åŒé˜¶å·´ç‰¹æ²ƒæ€æ»¤æ³¢å™¨ç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ</li>
            </ol>
            <button class="show-answer" onclick="toggleAnswer('answer2')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer2" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                1. Îµ = âˆš(10^(1/10) - 1) = âˆš(1.259 - 1) = 0.509<br>
                2. åœ¨é€šå¸¦è¾¹ç•Œï¼š|H(jÏ‰p)| = 1/âˆš(1 + ÎµÂ²) = 1/âˆš(1 + 0.259) = 0.891 (-1dB)<br>
                3. ä¼˜ç‚¹ï¼šè¿‡æ¸¡å¸¦æ›´é™¡å³­ï¼Œé¢‘ç‡é€‰æ‹©æ€§æ›´å¥½<br>
                   ç¼ºç‚¹ï¼šé€šå¸¦æœ‰çº¹æ³¢ï¼Œç¾¤å»¶è¿Ÿå˜åŒ–è¾ƒå¤§ï¼Œç›¸ä½ç‰¹æ€§è¾ƒå·®
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 3ï¼šé¢‘ç‡å˜æ¢</h4>
            <p>ä»å·´ç‰¹æ²ƒæ€ä½é€šåŸå‹ H(s) = 1/(sÂ² + âˆš2s + 1) å‡ºå‘ï¼š</p>
            <ol>
                <li>è®¾è®¡æˆªæ­¢é¢‘ç‡ä¸º2kHzçš„ä½é€šæ»¤æ³¢å™¨</li>
                <li>è®¾è®¡æˆªæ­¢é¢‘ç‡ä¸º500Hzçš„é«˜é€šæ»¤æ³¢å™¨</li>
                <li>è®¾è®¡ä¸­å¿ƒé¢‘ç‡1kHzã€å¸¦å®½500Hzçš„å¸¦é€šæ»¤æ³¢å™¨</li>
            </ol>
            <button class="show-answer" onclick="toggleAnswer('answer3')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer3" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                1. ä½é€šå˜æ¢ s â†’ s/Ï‰c'ï¼ŒÏ‰c' = 2Ï€Ã—2000<br>
                   Hâ‚(s) = (2Ï€Ã—2000)Â²/((s + âˆš2Ã—2Ï€Ã—2000s + (2Ï€Ã—2000)Â²)<br>
                2. é«˜é€šå˜æ¢ s â†’ Ï‰cÃ—Ï‰c'/sï¼ŒÏ‰c' = 2Ï€Ã—500<br>
                   Hâ‚‚(s) = sÂ²/(sÂ² + âˆš2Ã—2Ï€Ã—500s + (2Ï€Ã—500)Â²)<br>
                3. å¸¦é€šå˜æ¢ï¼ŒÏ‰l = 2Ï€Ã—750, Ï‰h = 2Ï€Ã—1250<br>
                   å˜æ¢åå¾—åˆ°4é˜¶å¸¦é€šæ»¤æ³¢å™¨
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 4ï¼šæ»¤æ³¢å™¨é€‰æ‹©</h4>
            <p>æŸéŸ³é¢‘å¤„ç†ç³»ç»Ÿéœ€è¦æ»¤é™¤3kHzä»¥ä¸Šçš„é«˜é¢‘å™ªå£°ï¼Œè¦æ±‚ï¼š</p>
            <ul>
                <li>3kHzå¤„è¡°å‡ä¸è¶…è¿‡1dB</li>
                <li>10kHzå¤„è‡³å°‘è¡°å‡40dB</li>
                <li>ç›¸ä½å¤±çœŸè¦å°½é‡å°</li>
            </ul>
            <p>åº”è¯¥é€‰æ‹©å“ªç§ç±»å‹çš„æ»¤æ³¢å™¨ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p>
            <button class="show-answer" onclick="toggleAnswer('answer4')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer4" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                æ¨èé€‰æ‹©å·´ç‰¹æ²ƒæ€æ»¤æ³¢å™¨ï¼Œç†ç”±ï¼š<br>
                1. è¿‡æ¸¡å¸¦è¾ƒå®½(3kHzåˆ°10kHz)ï¼Œä¸éœ€è¦ç‰¹åˆ«é™¡å³­çš„ç‰¹æ€§<br>
                2. è¦æ±‚ç›¸ä½å¤±çœŸå°ï¼Œå·´ç‰¹æ²ƒæ€æ»¤æ³¢å™¨ç¾¤å»¶è¿Ÿå˜åŒ–æœ€å°<br>
                3. éŸ³é¢‘åº”ç”¨å¯¹é€šå¸¦å¹³å¦åº¦è¦æ±‚é«˜ï¼Œå·´ç‰¹æ²ƒæ€æœ€é€‚åˆ<br>
                4. è®¡ç®—æ‰€éœ€é˜¶æ•°çº¦ä¸º4-5é˜¶ï¼Œå®ç°ç›¸å¯¹ç®€å•<br>
                5. åˆ‡æ¯”é›ªå¤«æ»¤æ³¢å™¨è™½ç„¶è¿‡æ¸¡å¸¦æ›´é™¡ï¼Œä½†ä¼šå¼•å…¥ç›¸ä½å¤±çœŸï¼Œä¸é€‚åˆéŸ³é¢‘åº”ç”¨
            </div>
        </div>
        
        <h2>å­¦ä¹ è¦ç‚¹æ€»ç»“</h2>
        
        <div class="important">
            <h3>ğŸ¯ æ ¸å¿ƒæŒæ¡è¦ç‚¹</h3>
            <ol>
                <li><strong>å·´ç‰¹æ²ƒæ€æ»¤æ³¢å™¨</strong>ï¼šæœ€å¤§å¹³å¦ç‰¹æ€§ï¼Œè®¾è®¡ç®€å•ï¼Œé€‚åˆè¦æ±‚ç›¸ä½ç‰¹æ€§å¥½çš„åº”ç”¨</li>
                <li><strong>åˆ‡æ¯”é›ªå¤«æ»¤æ³¢å™¨</strong>ï¼šç­‰çº¹æ³¢ç‰¹æ€§ï¼Œè¿‡æ¸¡å¸¦é™¡å³­ï¼Œé€‚åˆè¦æ±‚é¢‘ç‡é€‰æ‹©æ€§é«˜çš„åº”ç”¨</li>
                <li><strong>æ»¤æ³¢å™¨é€‰æ‹©</strong>ï¼šæ ¹æ®åº”ç”¨è¦æ±‚é€‰æ‹©åˆé€‚çš„é€¼è¿‘æ–¹æ³•</li>
                <li><strong>é¢‘ç‡å˜æ¢</strong>ï¼šä»ä½é€šåŸå‹è®¾è®¡å…¶ä»–ç±»å‹æ»¤æ³¢å™¨çš„ç³»ç»ŸåŒ–æ–¹æ³•</li>
                <li><strong>è®¾è®¡æµç¨‹</strong>ï¼šæŒ‡æ ‡åˆ†æâ†’é˜¶æ•°è®¡ç®—â†’å‚æ•°ç¡®å®šâ†’ä¼ é€’å‡½æ•°æ„é€ </li>
                <li><strong>å·¥ç¨‹æƒè¡¡</strong>ï¼šå¹³å¦åº¦vsé€‰æ‹©æ€§ï¼Œç®€å•æ€§vsæ€§èƒ½çš„å¹³è¡¡</li>
            </ol>
        </div>
        
        <div class="filter-property">
            <h3>ğŸ”— è®¾è®¡æ–¹æ³•çš„å‘å±•</h3>
            <p><strong>ç»å…¸æ¨¡æ‹Ÿæ»¤æ³¢å™¨è®¾è®¡</strong>ä¸ºç°ä»£æ»¤æ³¢å™¨è®¾è®¡å¥ å®šäº†åŸºç¡€ï¼š</p>
            <ul>
                <li>è¿™äº›è®¾è®¡æ–¹æ³•åæ¥è¢«ç”¨äºæ•°å­—æ»¤æ³¢å™¨è®¾è®¡ï¼ˆåŒçº¿æ€§å˜æ¢ç­‰ï¼‰</li>
                <li>é¢‘ç‡å˜æ¢çš„æ€æƒ³åœ¨æ•°å­—æ»¤æ³¢å™¨è®¾è®¡ä¸­åŒæ ·é€‚ç”¨</li>
                <li>ç°ä»£CADå·¥å…·å¤§å¤šåŸºäºè¿™äº›ç»å…¸ç†è®º</li>
                <li>ä¸ºç†è§£é«˜çº§æ»¤æ³¢å™¨ï¼ˆæ¤­åœ†ã€è´å¡å°”ç­‰ï¼‰æä¾›åŸºç¡€</li>
            </ul>
        </div>
    </div>

    <script>
        // å·´ç‰¹æ²ƒæ€æ»¤æ³¢å™¨å“åº”è®¡ç®—
        function butterworthResponse(omega, omegaC, n) {
            const ratio = omega / omegaC;
            return 1 / Math.sqrt(1 + Math.pow(ratio, 2 * n));
        }
        
        // åˆ‡æ¯”é›ªå¤«Iå‹å“åº”è®¡ç®—
        function chebyshev1Response(omega, omegaP, n, epsilon) {
            const x = omega / omegaP;
            const Tn = chebyshevPolynomial(n, x);
            return 1 / Math.sqrt(1 + epsilon * epsilon * Tn * Tn);
        }
        
        // åˆ‡æ¯”é›ªå¤«å¤šé¡¹å¼è®¡ç®—
        function chebyshevPolynomial(n, x) {
            if (n === 0) return 1;
            if (n === 1) return x;
            
            let T0 = 1;
            let T1 = x;
            let Tn = 0;
            
            for (let i = 2; i <= n; i++) {
                Tn = 2 * x * T1 - T0;
                T0 = T1;
                T1 = Tn;
            }
            
            return Tn;
        }
        
        // æ›´æ–°å·´ç‰¹æ²ƒæ€æ¼”ç¤º
        function updateButterworthDemo() {
            const canvas = document.getElementById('butterworthDemo');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            const order = parseInt(document.getElementById('butterworthOrder').value);
            const cutoff = parseFloat(document.getElementById('butterworthCutoff').value);
            
            document.getElementById('butterworthOrderValue').textContent = order;
            document.getElementById('butterworthCutoffValue').textContent = cutoff.toFixed(1);
            
            ctx.clearRect(0, 0, width, height);
            
            // ç»˜åˆ¶é¢‘ç‡å“åº”å’Œç›¸ä½å“åº”
            drawButterworthResponse(ctx, width, height/2, order, cutoff, 'magnitude');
            drawButterworthResponse(ctx, width, height/2, order, cutoff, 'phase', height/2);
            
            // æ›´æ–°æç‚¹å›¾
            drawButterworthPoles(order);
        }
        
        function drawButterworthResponse(ctx, width, height, order, cutoff, type, offsetY = 0) {
            const centerY = offsetY + height * 0.8;
            const freqRange = 10;
            const scaleX = (width - 60) / freqRange;
            const scaleY = height * 0.5;
            
            // åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            ctx.beginPath();
            ctx.moveTo(30, centerY);
            ctx.lineTo(width - 30, centerY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(30, offsetY + 20);
            ctx.lineTo(30, centerY);
            ctx.stroke();
            
            // ç»˜åˆ¶å“åº”æ›²çº¿
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            for (let i = 0; i <= 200; i++) {
                const freq = (i / 200) * freqRange;
                const x = 30 + freq * scaleX;
                let y;
                
                if (type === 'magnitude') {
                    const magnitude = butterworthResponse(freq, cutoff, order);
                    y = centerY - magnitude * scaleY;
                } else {
                    // ç®€åŒ–çš„ç›¸ä½å“åº”
                    const phase = -order * Math.atan(freq / cutoff);
                    y = centerY - (phase / Math.PI) * scaleY;
                }
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // 3dBçº¿ï¼ˆä»…åœ¨å¹…åº¦å›¾ä¸Šï¼‰
            if (type === 'magnitude') {
                ctx.strokeStyle = '#666';
                ctx.setLineDash([5, 5]);
                const y3dB = centerY - (1/Math.sqrt(2)) * scaleY;
                ctx.beginPath();
                ctx.moveTo(30, y3dB);
                ctx.lineTo(width - 30, y3dB);
                ctx.stroke();
                ctx.setLineDash([]);
                
                // æˆªæ­¢é¢‘ç‡çº¿
                const xCutoff = 30 + cutoff * scaleX;
                ctx.beginPath();
                ctx.moveTo(xCutoff, offsetY + 20);
                ctx.lineTo(xCutoff, centerY);
                ctx.stroke();
            }
            
            // æ ‡é¢˜
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            const title = type === 'magnitude' ? `${order}é˜¶å·´ç‰¹æ²ƒæ€æ»¤æ³¢å™¨å¹…åº¦å“åº”` : `${order}é˜¶å·´ç‰¹æ²ƒæ€æ»¤æ³¢å™¨ç›¸ä½å“åº”`;
            ctx.fillText(title, width / 2, offsetY + 15);
        }
        
        // ç»˜åˆ¶å·´ç‰¹æ²ƒæ€æç‚¹
        function drawButterworthPoles(order) {
            const canvas = document.getElementById('butterworthPoles');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const centerX = width / 2;
            const centerY = height / 2;
            const radius = Math.min(width, height) / 3;
            
            // åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            ctx.beginPath();
            ctx.moveTo(20, centerY);
            ctx.lineTo(width - 20, centerY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(centerX, 20);
            ctx.lineTo(centerX, height - 20);
            ctx.stroke();
            
            // å•ä½åœ†
            ctx.strokeStyle = '#666';
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // æç‚¹
            ctx.fillStyle = '#e74c3c';
            for (let k = 0; k < order; k++) {
                const angle = (2 * k + order - 1) * Math.PI / (2 * order);
                const x = centerX + radius * Math.cos(angle + Math.PI);
                const y = centerY + radius * Math.sin(angle + Math.PI);
                
                ctx.beginPath();
                ctx.arc(x, y, 5, 0, 2 * Math.PI);
                ctx.fill();
                
                // ç”»Xè¡¨ç¤ºæç‚¹
                ctx.strokeStyle = '#e74c3c';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(x - 4, y - 4);
                ctx.lineTo(x + 4, y + 4);
                ctx.moveTo(x - 4, y + 4);
                ctx.lineTo(x + 4, y - 4);
                ctx.stroke();
            }
            
            // æ ‡ç­¾
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('så¹³é¢æç‚¹åˆ†å¸ƒ', centerX, height - 10);
            ctx.fillText('Re', width - 10, centerY + 15);
            ctx.fillText('Im', centerX - 15, 15);
        }
        
        // æ›´æ–°æ»¤æ³¢å™¨å¯¹æ¯”
        function updateFilterComparison() {
            const canvas = document.getElementById('filterComparison');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            const order = parseInt(document.getElementById('comparisonOrder').value);
            const ripple = parseFloat(document.getElementById('rippleAmount').value);
            
            document.getElementById('comparisonOrderValue').textContent = order;
            document.getElementById('rippleValue').textContent = ripple.toFixed(1);
            
            ctx.clearRect(0, 0, width, height);
            
            drawFilterComparison(ctx, width, height, order, ripple);
        }
        
        function drawFilterComparison(ctx, width, height, order, ripple) {
            const centerY = height * 0.8;
            const freqRange = 5;
            const scaleX = (width - 60) / freqRange;
            const scaleY = height * 0.5;
            const cutoff = 1;
            
            // åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            ctx.beginPath();
            ctx.moveTo(30, centerY);
            ctx.lineTo(width - 30, centerY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(30, 30);
            ctx.lineTo(30, centerY);
            ctx.stroke();
            
            // ç»˜åˆ¶ä¸‰ç§æ»¤æ³¢å™¨å“åº”
            const colors = ['#e74c3c', '#3498db', '#f39c12'];
            const labels = ['å·´ç‰¹æ²ƒæ€', 'åˆ‡æ¯”é›ªå¤«I', 'åˆ‡æ¯”é›ªå¤«II'];
            const epsilon = Math.sqrt(Math.pow(10, ripple/10) - 1);
            
            for (let filterType = 0; filterType < 3; filterType++) {
                ctx.strokeStyle = colors[filterType];
                ctx.lineWidth = 3;
                ctx.beginPath();
                
                for (let i = 0; i <= 200; i++) {
                    const freq = (i / 200) * freqRange;
                    const x = 30 + freq * scaleX;
                    let magnitude;
                    
                    switch (filterType) {
                        case 0: // å·´ç‰¹æ²ƒæ€
                            magnitude = butterworthResponse(freq, cutoff, order);
                            break;
                        case 1: // åˆ‡æ¯”é›ªå¤«I
                            magnitude = chebyshev1Response(freq, cutoff, order, epsilon);
                            break;
                        case 2: // åˆ‡æ¯”é›ªå¤«IIï¼ˆç®€åŒ–ï¼‰
                            magnitude = freq <= cutoff ? 1 - 0.1 * Math.sin(order * Math.PI * freq / cutoff) : 
                                       butterworthResponse(freq, cutoff, order) * 0.8;
                            break;
                    }
                    
                    const y = centerY - magnitude * scaleY;
                    
                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                }
                ctx.stroke();
            }
            
            // å›¾ä¾‹
            for (let i = 0; i < 3; i++) {
                ctx.fillStyle = colors[i];
                ctx.fillRect(width - 150, 50 + i * 20, 20, 3);
                ctx.fillStyle = '#333';
                ctx.font = '12px Arial';
                ctx.textAlign = 'left';
                ctx.fillText(labels[i], width - 125, 55 + i * 20);
            }
            
            // æ ‡é¢˜
            ctx.textAlign = 'center';
            ctx.fillText(`${order}é˜¶æ»¤æ³¢å™¨å“åº”å¯¹æ¯”`, width / 2, 20);
        }
        
        // æ›´æ–°é¢‘ç‡å˜æ¢æ¼”ç¤º
        function updateTransformationDemo() {
            const transformType = document.getElementById('transformationType').value;
            const param1 = parseFloat(document.getElementById('transformParam1').value);
            const param2 = parseFloat(document.getElementById('transformParam2').value);
            
            document.getElementById('param1Value').textContent = param1.toFixed(1);
            document.getElementById('param2Value').textContent = param2.toFixed(1);
            
            // ç»˜åˆ¶åŸå‹å’Œå˜æ¢åçš„æ»¤æ³¢å™¨
            drawPrototypeFilter();
            drawTransformedFilter(transformType, param1, param2);
        }
        
        function drawPrototypeFilter() {
            const canvas = document.getElementById('prototypeFilter');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const centerY = height * 0.8;
            const freqRange = 5;
            const scaleX = (width - 40) / freqRange;
            const scaleY = height * 0.5;
            
            // åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            ctx.beginPath();
            ctx.moveTo(20, centerY);
            ctx.lineTo(width - 20, centerY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(20, 20);
            ctx.lineTo(20, centerY);
            ctx.stroke();
            
            // ç»˜åˆ¶ä½é€šåŸå‹ï¼ˆå·´ç‰¹æ²ƒæ€ï¼Œå½’ä¸€åŒ–æˆªæ­¢é¢‘ç‡ä¸º1ï¼‰
            ctx.strokeStyle = '#3498db';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            for (let i = 0; i <= 100; i++) {
                const freq = (i / 100) * freqRange;
                const x = 20 + freq * scaleX;
                const magnitude = butterworthResponse(freq, 1, 3);
                const y = centerY - magnitude * scaleY;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // æ ‡é¢˜
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('3é˜¶å·´ç‰¹æ²ƒæ€ä½é€šåŸå‹', width / 2, 15);
        }
        
        function drawTransformedFilter(transformType, param1, param2) {
            const canvas = document.getElementById('transformedFilter');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const centerY = height * 0.8;
            const freqRange = 10;
            const scaleX = (width - 40) / freqRange;
            const scaleY = height * 0.5;
            
            // åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            ctx.beginPath();
            ctx.moveTo(20, centerY);
            ctx.lineTo(width - 20, centerY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(20, 20);
            ctx.lineTo(20, centerY);
            ctx.stroke();
            
            // ç»˜åˆ¶å˜æ¢åçš„æ»¤æ³¢å™¨
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            for (let i = 0; i <= 200; i++) {
                const freq = (i / 200) * freqRange;
                const x = 20 + freq * scaleX;
                let magnitude = 0;
                
                switch (transformType) {
                    case 'lowpass':
                        magnitude = butterworthResponse(freq, param1, 3);
                        break;
                    case 'highpass':
                        magnitude = freq > 0 ? butterworthResponse(param1 / freq, 1, 3) : 0;
                        break;
                    case 'bandpass':
                        const center = Math.sqrt(param1 * param2);
                        const bw = param2 - param1;
                        const transformed = freq > 0 ? (freq * freq - center * center) / (freq * bw) : 0;
                        magnitude = butterworthResponse(Math.abs(transformed), 1, 3);
                        break;
                    case 'bandstop':
                        const center2 = Math.sqrt(param1 * param2);
                        const bw2 = param2 - param1;
                        const transformed2 = freq > 0 ? (freq * bw2) / (freq * freq - center2 * center2) : 0;
                        magnitude = Math.abs(transformed2) > 100 ? 0 : butterworthResponse(Math.abs(transformed2), 1, 3);
                        break;
                }
                
                const y = centerY - Math.min(magnitude, 1) * scaleY;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // æ ‡é¢˜
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            const titles = {
                'lowpass': `ä½é€š (fc=${param1.toFixed(1)}Hz)`,
                'highpass': `é«˜é€š (fc=${param1.toFixed(1)}Hz)`,
                'bandpass': `å¸¦é€š (${param1.toFixed(1)}-${param2.toFixed(1)}Hz)`,
                'bandstop': `å¸¦é˜» (${param1.toFixed(1)}-${param2.toFixed(1)}Hz)`
            };
            ctx.fillText(titles[transformType], width / 2, 15);
        }
        
        // æ»¤æ³¢å™¨è®¾è®¡è®¡ç®—å™¨
        function calculateFilter() {
            const type = document.getElementById('calculatorType').value;
            const fp = parseFloat(document.getElementById('passbandFreq').value);
            const fs = parseFloat(document.getElementById('stopbandFreq').value);
            const Rp = parseFloat(document.getElementById('passbandRipple').value);
            const As = parseFloat(document.getElementById('stopbandAtten').value);
            
            // è®¡ç®—æ‰€éœ€é˜¶æ•°
            let order = 0;
            let cutoffFreq = 0;
            
            const omegaP = 2 * Math.PI * fp;
            const omegaS = 2 * Math.PI * fs;
            const ratio = omegaS / omegaP;
            
            switch (type) {
                case 'butterworth':
                    const numer = Math.log10((Math.pow(10, As/10) - 1) / (Math.pow(10, Rp/10) - 1));
                    const denom = 2 * Math.log10(ratio);
                    order = Math.ceil(numer / denom);
                    cutoffFreq = fp; // é€‰æ‹©é€šå¸¦è¾¹ç•Œä½œä¸º3dBç‚¹
                    break;
                    
                case 'chebyshev1':
                    const epsilon = Math.sqrt(Math.pow(10, Rp/10) - 1);
                    const numer1 = Math.acosh(Math.sqrt((Math.pow(10, As/10) - 1) / (epsilon * epsilon)));
                    const denom1 = Math.acosh(ratio);
                    order = Math.ceil(numer1 / denom1);
                    cutoffFreq = fp;
                    break;
                    
                case 'chebyshev2':
                    const epsilon2 = 1 / Math.sqrt(Math.pow(10, As/10) - 1);
                    order = Math.ceil(Math.acosh(1/epsilon2) / Math.acosh(ratio));
                    cutoffFreq = fs;
                    break;
            }
            
            // æ˜¾ç¤ºè®¡ç®—ç»“æœ
            const resultDiv = document.getElementById('calculatorResult');
            resultDiv.innerHTML = `
                <h4>è®¾è®¡ç»“æœ</h4>
                <p><strong>æ»¤æ³¢å™¨ç±»å‹ï¼š</strong>${getFilterTypeName(type)}</p>
                <p><strong>æ‰€éœ€é˜¶æ•°ï¼š</strong>${order}</p>
                <p><strong>æˆªæ­¢é¢‘ç‡ï¼š</strong>${cutoffFreq.toFixed(0)} Hz</p>
                <p><strong>é¢‘ç‡æ¯”ï¼š</strong>${ratio.toFixed(2)}</p>
                <p><strong>è®¾è®¡è¯„ä¼°ï¼š</strong>${getDesignAssessment(order, ratio)}</p>
            `;
            
            // ç»˜åˆ¶è®¾è®¡ç»“æœ
            drawDesignResult(type, order, cutoffFreq, fp, fs);
        }
        
        function getFilterTypeName(type) {
            const names = {
                'butterworth': 'å·´ç‰¹æ²ƒæ€æ»¤æ³¢å™¨',
                'chebyshev1': 'åˆ‡æ¯”é›ªå¤«Iå‹æ»¤æ³¢å™¨', 
                'chebyshev2': 'åˆ‡æ¯”é›ªå¤«IIå‹æ»¤æ³¢å™¨'
            };
            return names[type];
        }
        
        function getDesignAssessment(order, ratio) {
            if (order <= 2) return 'ä½é˜¶è®¾è®¡ï¼Œå®ç°ç®€å•';
            if (order <= 4) return 'ä¸­ç­‰é˜¶æ•°ï¼Œæ€§èƒ½ä¸å¤æ‚åº¦å¹³è¡¡';
            if (order <= 6) return 'è¾ƒé«˜é˜¶æ•°ï¼Œæ€§èƒ½å¥½ä½†å¤æ‚åº¦é«˜';
            return 'é«˜é˜¶è®¾è®¡ï¼Œéœ€è¦è€ƒè™‘ç¨³å®šæ€§å’Œæ•æ„Ÿåº¦';
        }
        
        function drawDesignResult(type, order, cutoffFreq, fp, fs) {
            const canvas = document.getElementById('designCalculator');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const centerY = height * 0.8;
            const freqRange = Math.max(fs * 2, 10000);
            const scaleX = (width - 60) / freqRange;
            const scaleY = height * 0.5;
            
            // åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            ctx.beginPath();
            ctx.moveTo(30, centerY);
            ctx.lineTo(width - 30, centerY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(30, 30);
            ctx.lineTo(30, centerY);
            ctx.stroke();
            
            // ç»˜åˆ¶è®¾è®¡çš„æ»¤æ³¢å™¨å“åº”
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            for (let i = 0; i <= 200; i++) {
                const freq = (i / 200) * freqRange;
                const x = 30 + freq * scaleX;
                let magnitude;
                
                switch (type) {
                    case 'butterworth':
                        magnitude = butterworthResponse(freq, cutoffFreq, order);
                        break;
                    case 'chebyshev1':
                        const epsilon = Math.sqrt(Math.pow(10, 1/10) - 1); // ç®€åŒ–ä¸º1dBçº¹æ³¢
                        magnitude = chebyshev1Response(freq, cutoffFreq, order, epsilon);
                        break;
                    case 'chebyshev2':
                        magnitude = butterworthResponse(freq, cutoffFreq, order) * 0.9; // ç®€åŒ–è¡¨ç¤º
                        break;
                }
                
                const y = centerY - magnitude * scaleY;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // æ ‡è®°å…³é”®é¢‘ç‡
            ctx.strokeStyle = '#666';
            ctx.setLineDash([5, 5]);
            
            // é€šå¸¦é¢‘ç‡
            const xp = 30 + fp * scaleX;
            ctx.beginPath();
            ctx.moveTo(xp, 30);
            ctx.lineTo(xp, centerY);
            ctx.stroke();
            
            // é˜»å¸¦é¢‘ç‡
            const xs = 30 + fs * scaleX;
            ctx.beginPath();
            ctx.moveTo(xs, 30);
            ctx.lineTo(xs, centerY);
            ctx.stroke();
            
            ctx.setLineDash([]);
            
            // æ ‡ç­¾
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`${order}é˜¶${getFilterTypeName(type)}è®¾è®¡ç»“æœ`, width / 2, 20);
            ctx.fillText(`fp=${fp}Hz`, xp, centerY + 20);
            ctx.fillText(`fs=${fs}Hz`, xs, centerY + 20);
        }
        
        // åˆ‡æ¢ç­”æ¡ˆæ˜¾ç¤º
        function toggleAnswer(answerId) {
            const answer = document.getElementById(answerId);
            answer.style.display = answer.style.display === 'none' ? 'block' : 'none';
        }
        
        // é¡µé¢åŠ è½½ååˆå§‹åŒ–
        window.onload = function() {
            updateButterworthDemo();
            updateFilterComparison();
            updateTransformationDemo();
            calculateFilter();
        };
    </script>
</body>
</html>