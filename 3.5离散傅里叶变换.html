<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¦»æ•£å‚…é‡Œå¶å˜æ¢(DFT)</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 30px;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        
        h2 {
            color: #34495e;
            border-left: 4px solid #3498db;
            padding-left: 15px;
            margin-top: 30px;
        }
        
        h3 {
            color: #2980b9;
            margin-top: 25px;
        }
        
        .knowledge-point {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .formula {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            font-family: 'Times New Roman', serif;
            font-size: 18px;
        }
        
        .important {
            background: #ffeaa7;
            border: 2px solid #fdcb6e;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .example {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .plot-container {
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        canvas {
            border: 1px solid #ccc;
            margin: 10px;
        }
        
        .controls {
            margin: 15px 0;
            text-align: center;
        }
        
        .controls input, .controls select {
            margin: 5px;
            padding: 5px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .controls button {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        
        .controls button:hover {
            background: #2980b9;
        }
        
        .exercise {
            background: #e8f5e8;
            border: 1px solid #c3e6c3;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .exercise h4 {
            color: #2e7d2e;
            margin-top: 0;
        }
        
        .answer {
            background: #f0f0f0;
            border-radius: 5px;
            padding: 10px;
            margin-top: 10px;
            display: none;
        }
        
        .show-answer {
            background: #28a745;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .show-answer:hover {
            background: #218838;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        
        th {
            background: #f2f2f2;
        }
        
        .highlight {
            background: #ffeb3b;
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .relationship-box {
            background: #e3f2fd;
            border: 2px solid #2196f3;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .property-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }
        
        .property-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
        }
        
        .property-item h4 {
            margin-top: 0;
            color: #495057;
        }
        
        .comparison-display {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        
        .comparison-part {
            text-align: center;
        }
        
        .sampling-demo {
            background: #f0f8ff;
            border: 1px solid #87ceeb;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ä¿¡å·åˆ†æä¸å¤„ç† - ç¬¬äº”ç« ï¼šç¦»æ•£å‚…é‡Œå¶å˜æ¢(DFT)</h1>
        
        <h2>5.1 DFTçš„å®šä¹‰å¼</h2>
        
        <div class="knowledge-point">
            <h3>åŸºæœ¬å®šä¹‰</h3>
            <p>å¯¹äºæœ‰é™é•¿åºåˆ— x[n], n = 0, 1, ..., N-1ï¼Œå…¶<strong>ç¦»æ•£å‚…é‡Œå¶å˜æ¢(DFT)</strong>å®šä¹‰ä¸ºï¼š</p>
            
            <h4>DFTæ­£å˜æ¢ï¼ˆåˆ†æå…¬å¼ï¼‰</h4>
            <div class="formula">
                X[k] = âˆ‘<sub>n=0</sub><sup>N-1</sup> x[n]e<sup>-j2Ï€kn/N</sup>, k = 0, 1, ..., N-1
            </div>
            
            <h4>DFTé€†å˜æ¢ï¼ˆç»¼åˆå…¬å¼ï¼‰</h4>
            <div class="formula">
                x[n] = (1/N) âˆ‘<sub>k=0</sub><sup>N-1</sup> X[k]e<sup>j2Ï€kn/N</sup>, n = 0, 1, ..., N-1
            </div>
            
            <p>å…¶ä¸­ï¼š</p>
            <ul>
                <li><strong>x[n]</strong>ï¼šé•¿åº¦ä¸ºNçš„æœ‰é™åºåˆ—</li>
                <li><strong>X[k]</strong>ï¼šDFTç³»æ•°ï¼ˆé¢‘è°±æ ·æœ¬ï¼‰</li>
                <li><strong>W<sub>N</sub> = e<sup>-j2Ï€/N</sup></strong>ï¼šæ—‹è½¬å› å­</li>
            </ul>
        </div>
        
        <div class="knowledge-point">
            <h3>æ—‹è½¬å› å­è¡¨ç¤º</h3>
            <p>å¼•å…¥æ—‹è½¬å› å­ W<sub>N</sub> = e<sup>-j2Ï€/N</sup>ï¼ŒDFTå¯ä»¥ç®€å†™ä¸ºï¼š</p>
            <div class="formula">
                X[k] = âˆ‘<sub>n=0</sub><sup>N-1</sup> x[n]W<sub>N</sub><sup>kn</sup>
            </div>
            <div class="formula">
                x[n] = (1/N) âˆ‘<sub>k=0</sub><sup>N-1</sup> X[k]W<sub>N</sub><sup>-kn</sup>
            </div>
            
            <div class="important">
                <h4>ğŸ¯ æ—‹è½¬å› å­çš„é‡è¦æ€§è´¨</h4>
                <ul>
                    <li><strong>å‘¨æœŸæ€§</strong>ï¼šW<sub>N</sub><sup>k+N</sup> = W<sub>N</sub><sup>k</sup></li>
                    <li><strong>å¯¹ç§°æ€§</strong>ï¼šW<sub>N</sub><sup>k+N/2</sup> = -W<sub>N</sub><sup>k</sup></li>
                    <li><strong>å¯çº¦æ€§</strong>ï¼šW<sub>N</sub><sup>kr</sup> = W<sub>N/r</sub><sup>k</sup> (å½“ræ•´é™¤Næ—¶)</li>
                </ul>
            </div>
        </div>
        
        <h2>5.2 DFTä¸DTFTçš„å…³ç³»</h2>
        
        <div class="relationship-box">
            <h3>ğŸ” é¢‘ç‡é‡‡æ ·è§‚ç‚¹</h3>
            <p>DFTå¯ä»¥ç†è§£ä¸ºDTFTçš„<strong>é¢‘ç‡é‡‡æ ·</strong>ï¼š</p>
            <div class="formula">
                X[k] = X(e<sup>jÏ‰</sup>)|<sub>Ï‰=2Ï€k/N</sub>
            </div>
            <p>å³ï¼šDFTç³»æ•°X[k]æ˜¯DTFTåœ¨é¢‘ç‡Ï‰ = 2Ï€k/Nå¤„çš„æ ·æœ¬å€¼</p>
        </div>
        
        <div class="sampling-demo">
            <h4>é‡‡æ ·è¿‡ç¨‹è¯¦è§£</h4>
            <ol>
                <li><strong>æœ‰é™é•¿åºåˆ—</strong>ï¼šx[n], n = 0, 1, ..., N-1</li>
                <li><strong>DTFTå­˜åœ¨</strong>ï¼šX(e<sup>jÏ‰</sup>) = âˆ‘ x[n]e<sup>-jÏ‰n</sup></li>
                <li><strong>é¢‘ç‡é‡‡æ ·</strong>ï¼šåœ¨Ï‰ = 2Ï€k/Nå¤„é‡‡æ ·ï¼Œk = 0, 1, ..., N-1</li>
                <li><strong>å¾—åˆ°DFT</strong>ï¼šX[k] = X(e<sup>j2Ï€k/N</sup>)</li>
            </ol>
        </div>
        
        <div class="example">
            <h4>å…³é”®ç†è§£</h4>
            <ul>
                <li><span class="highlight">DFTæä¾›äº†DTFTçš„Nä¸ªç­‰é—´éš”é¢‘ç‡æ ·æœ¬</span></li>
                <li><span class="highlight">é‡‡æ ·é—´éš”ä¸º2Ï€/Nï¼Œè¦†ç›–ä¸€ä¸ªå‘¨æœŸ[0, 2Ï€)</span></li>
                <li><span class="highlight">Nä¸ªæ ·æœ¬å®Œå…¨ç¡®å®šæœ‰é™é•¿åºåˆ—ï¼ˆé‡‡æ ·å®šç†ï¼‰</span></li>
            </ul>
        </div>
        
        <div class="plot-container">
            <h3>DFTé¢‘ç‡é‡‡æ ·æ¼”ç¤º</h3>
            <div class="comparison-display">
                <div class="comparison-part">
                    <canvas id="dtftContinuous" width="350" height="250"></canvas>
                    <p>DTFT (è¿ç»­é¢‘è°±)</p>
                </div>
                <div class="comparison-part">
                    <canvas id="dftSamples" width="350" height="250"></canvas>
                    <p>DFT (é¢‘ç‡æ ·æœ¬)</p>
                </div>
            </div>
            <div class="controls">
                <label>åºåˆ—ç±»å‹ï¼š</label>
                <select id="samplingSequence">
                    <option value="rectangular">çŸ©å½¢çª—</option>
                    <option value="triangular">ä¸‰è§’çª—</option>
                    <option value="exponential">æŒ‡æ•°åºåˆ—</option>
                    <option value="gaussian">é«˜æ–¯çª—</option>
                </select>
                <label>åºåˆ—é•¿åº¦Nï¼š</label>
                <input type="number" id="samplingN" value="8" min="4" max="32">
                <button onclick="plotSamplingDemo()">æ¼”ç¤ºé‡‡æ ·</button>
            </div>
        </div>
        
        <h2>5.3 DFTä¸DFSçš„å…³ç³»</h2>
        
        <div class="knowledge-point">
            <h3>å‘¨æœŸå»¶æ‹“è§‚ç‚¹</h3>
            <p>DFTå¯ä»¥é€šè¿‡å‘¨æœŸå»¶æ‹“ä¸DFSè”ç³»ï¼š</p>
            <ol>
                <li><strong>æœ‰é™é•¿åºåˆ—</strong>ï¼šx[n], n = 0, 1, ..., N-1</li>
                <li><strong>å‘¨æœŸå»¶æ‹“</strong>ï¼šxÌƒ[n] = x[n mod N]ï¼ˆå‘¨æœŸä¸ºNï¼‰</li>
                <li><strong>DFSè®¡ç®—</strong>ï¼šXÌƒ[k] = DFS{xÌƒ[n]}</li>
                <li><strong>ä¸»å€¼åºåˆ—</strong>ï¼šX[k] = XÌƒ[k], k = 0, 1, ..., N-1</li>
            </ol>
            
            <div class="important">
                <p><strong>ç»“è®ºï¼š</strong>DFT = DFSçš„ä¸€ä¸ªå‘¨æœŸï¼</p>
            </div>
        </div>
        
        <h2>5.4 DFTçš„é‡è¦æ€§è´¨</h2>
        
        <div class="property-grid">
            <div class="property-item">
                <h4>1. çº¿æ€§</h4>
                <div class="formula">
                    axâ‚[n] + bxâ‚‚[n] â†” aXâ‚[k] + bXâ‚‚[k]
                </div>
            </div>
            
            <div class="property-item">
                <h4>2. å‘¨æœŸæ€§</h4>
                <div class="formula">
                    X[k] = X[k + N]<br>
                    x[n] = x[n + N]
                </div>
            </div>
            
            <div class="property-item">
                <h4>3. å¯¹ç§°æ€§ï¼ˆå®åºåˆ—ï¼‰</h4>
                <div class="formula">
                    X[k] = X*[N-k] = X*[(-k)<sub>N</sub>]
                </div>
            </div>
            
            <div class="property-item">
                <h4>4. æ—¶ç§»</h4>
                <div class="formula">
                    x[(n-m)<sub>N</sub>] â†” X[k]W<sub>N</sub><sup>km</sup>
                </div>
            </div>
            
            <div class="property-item">
                <h4>5. é¢‘ç§»</h4>
                <div class="formula">
                    x[n]W<sub>N</sub><sup>-ln</sup> â†” X[(k-l)<sub>N</sub>]
                </div>
            </div>
            
            <div class="property-item">
                <h4>6. å¾ªç¯å·ç§¯</h4>
                <div class="formula">
                    xâ‚[n] âŠ› xâ‚‚[n] â†” Xâ‚[k]Xâ‚‚[k]
                </div>
            </div>
            
            <div class="property-item">
                <h4>7. é¢‘åŸŸå·ç§¯</h4>
                <div class="formula">
                    xâ‚[n]xâ‚‚[n] â†” (1/N)Xâ‚[k] âŠ› Xâ‚‚[k]
                </div>
            </div>
            
            <div class="property-item">
                <h4>8. å¸•å¡ç“¦å°”å®šç†</h4>
                <div class="formula">
                    âˆ‘<sub>n=0</sub><sup>N-1</sup>|x[n]|Â² = (1/N)âˆ‘<sub>k=0</sub><sup>N-1</sup>|X[k]|Â²
                </div>
            </div>
        </div>
        
        <div class="important">
            <h3>âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹</h3>
            <ul>
                <li><strong>å‘¨æœŸæ€§</strong>ï¼šæ‰€æœ‰ä¸‹æ ‡è¿ç®—éƒ½æ˜¯æ¨¡Næ„ä¹‰ä¸‹çš„</li>
                <li><strong>å¾ªç¯ç‰¹æ€§</strong>ï¼šæ—¶ç§»ã€å·ç§¯ç­‰éƒ½æ˜¯å¾ªç¯çš„</li>
                <li><strong>æœ‰é™é•¿</strong>ï¼šDFTåªé€‚ç”¨äºæœ‰é™é•¿åºåˆ—</li>
                <li><strong>ç²¾ç¡®æ€§</strong>ï¼šNä¸ªDFTæ ·æœ¬å®Œå…¨ç¡®å®šNç‚¹åºåˆ—</li>
            </ul>
        </div>
        
        <div class="plot-container">
            <h3>DFTæ€§è´¨æ¼”ç¤º</h3>
            <canvas id="dftProperties" width="800" height="400"></canvas>
            <div class="controls">
                <label>æ¼”ç¤ºæ€§è´¨ï¼š</label>
                <select id="propertyType">
                    <option value="time_shift">æ—¶ç§»æ€§è´¨</option>
                    <option value="freq_shift">é¢‘ç§»æ€§è´¨</option>
                    <option value="symmetry">å¯¹ç§°æ€§è´¨</option>
                    <option value="convolution">å¾ªç¯å·ç§¯</option>
                </select>
                <label>å‚æ•°ï¼š</label>
                <input type="number" id="propertyParam" value="2" min="0" max="7">
                <button onclick="demonstrateProperty()">æ¼”ç¤ºæ€§è´¨</button>
            </div>
        </div>
        
        <h2>5.5 å¾ªç¯å·ç§¯è¯¦è§£</h2>
        
        <div class="knowledge-point">
            <h3>å¾ªç¯å·ç§¯å®šä¹‰</h3>
            <p>ä¸¤ä¸ªæœ‰é™é•¿åºåˆ—xâ‚[n]å’Œxâ‚‚[n]ï¼ˆé•¿åº¦éƒ½ä¸ºNï¼‰çš„å¾ªç¯å·ç§¯å®šä¹‰ä¸ºï¼š</p>
            <div class="formula">
                y[n] = xâ‚[n] âŠ› xâ‚‚[n] = âˆ‘<sub>m=0</sub><sup>N-1</sup> xâ‚[m]xâ‚‚[(n-m)<sub>N</sub>]
            </div>
            
            <div class="example">
                <h4>å¾ªç¯å·ç§¯vsçº¿æ€§å·ç§¯</h4>
                <ul>
                    <li><strong>çº¿æ€§å·ç§¯</strong>ï¼šç»“æœé•¿åº¦ä¸ºNâ‚+Nâ‚‚-1</li>
                    <li><strong>å¾ªç¯å·ç§¯</strong>ï¼šç»“æœé•¿åº¦ä¸ºmax(Nâ‚,Nâ‚‚)</li>
                    <li><strong>å…³ç³»</strong>ï¼šé€‚å½“è¡¥é›¶å¯ä½¿å¾ªç¯å·ç§¯ç­‰äºçº¿æ€§å·ç§¯</li>
                </ul>
            </div>
        </div>
        
        <div class="plot-container">
            <h3>å¾ªç¯å·ç§¯è®¡ç®—å™¨</h3>
            <canvas id="circularConvolution" width="800" height="300"></canvas>
            <div class="controls">
                <label>åºåˆ—1ï¼š</label>
                <input type="text" id="seq1" value="1,2,1,0" placeholder="ç”¨é€—å·åˆ†éš”">
                <label>åºåˆ—2ï¼š</label>
                <input type="text" id="seq2" value="1,1,1,1" placeholder="ç”¨é€—å·åˆ†éš”">
                <button onclick="calculateCircularConv()">è®¡ç®—å¾ªç¯å·ç§¯</button>
            </div>
            <div id="convolutionResult" style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 5px;"></div>
        </div>
        
        <h2>5.6 DFTçš„è®¡ç®—å¤æ‚åº¦ä¸FFT</h2>
        
        <div class="knowledge-point">
            <h3>è®¡ç®—å¤æ‚åº¦åˆ†æ</h3>
            <table>
                <tr>
                    <th>ç®—æ³•</th>
                    <th>å¤æ‚åº¦</th>
                    <th>ä¹˜æ³•æ¬¡æ•°</th>
                    <th>é€‚ç”¨æ¡ä»¶</th>
                </tr>
                <tr>
                    <td>ç›´æ¥DFT</td>
                    <td>O(NÂ²)</td>
                    <td>NÂ²</td>
                    <td>ä»»æ„N</td>
                </tr>
                <tr>
                    <td>åŸº-2 FFT</td>
                    <td>O(N logâ‚‚N)</td>
                    <td>(N/2)logâ‚‚N</td>
                    <td>N = 2áµ</td>
                </tr>
                <tr>
                    <td>æ··åˆåŸºFFT</td>
                    <td>O(N log N)</td>
                    <td>~N log N</td>
                    <td>N = pâ‚^Î±â‚ Ã— pâ‚‚^Î±â‚‚ Ã— ...</td>
                </tr>
                <tr>
                    <td>Chirp-Zå˜æ¢</td>
                    <td>O(N log N)</td>
                    <td>~3N log N</td>
                    <td>ä»»æ„N</td>
                </tr>
            </table>
            
            <div class="important">
                <p><strong>æ•ˆç‡æå‡ï¼š</strong>å½“N=1024æ—¶ï¼ŒFFTæ¯”ç›´æ¥DFTå¿«çº¦100å€ï¼</p>
            </div>
        </div>
        
        <h2>ç»ƒä¹ é¢˜ç›®</h2>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 1ï¼šDFTåŸºæœ¬è®¡ç®—</h4>
            <p>è®¡ç®—åºåˆ— x[n] = {1, 1, 0, 0} çš„4ç‚¹DFT</p>
            <button class="show-answer" onclick="toggleAnswer('answer1')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer1" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                X[0] = 1 + 1 + 0 + 0 = 2<br>
                X[1] = 1 + 1Â·e^(-jÏ€/2) + 0 + 0 = 1 - j<br>
                X[2] = 1 + 1Â·e^(-jÏ€) + 0 + 0 = 1 - 1 = 0<br>
                X[3] = 1 + 1Â·e^(-j3Ï€/2) + 0 + 0 = 1 + j<br>
                å³ï¼šX[k] = {2, 1-j, 0, 1+j}
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 2ï¼šDFTæ€§è´¨åº”ç”¨</h4>
            <p>å·²çŸ¥4ç‚¹åºåˆ—x[n]çš„DFTä¸ºX[k] = {4, 1-j, 0, 1+j}</p>
            <p>æ±‚ï¼š</p>
            <ol>
                <li>yâ‚[n] = x[(n-1)â‚„] çš„DFT Yâ‚[k]</li>
                <li>yâ‚‚[n] = x[n]Â·(-j)â¿ çš„DFT Yâ‚‚[k]</li>
            </ol>
            <button class="show-answer" onclick="toggleAnswer('answer2')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer2" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                1. æ—¶ç§»æ€§è´¨ï¼šYâ‚[k] = X[k]Â·Wâ‚„^k = X[k]Â·e^(-jÏ€k/2)<br>
                   Yâ‚[k] = {4, 1-j, 0, 1+j}Â·{1, -j, -1, j} = {4, -(1-j)j, 0, (1+j)j} = {4, 1+j, 0, -1+j}<br>
                2. é¢‘ç§»æ€§è´¨ï¼šYâ‚‚[k] = X[(k-1)â‚„] = {1+j, 4, 1-j, 0}
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 3ï¼šå¾ªç¯å·ç§¯</h4>
            <p>è®¡ç®—xâ‚[n] = {1, 2, 0, 1}å’Œxâ‚‚[n] = {2, 1, 0, 1}çš„4ç‚¹å¾ªç¯å·ç§¯</p>
            <button class="show-answer" onclick="toggleAnswer('answer3')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer3" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                æ–¹æ³•1ï¼šç›´æ¥è®¡ç®—<br>
                y[0] = 1Ã—2 + 2Ã—1 + 0Ã—0 + 1Ã—1 = 5<br>
                y[1] = 1Ã—1 + 2Ã—2 + 0Ã—1 + 1Ã—0 = 5<br>
                y[2] = 1Ã—0 + 2Ã—1 + 0Ã—2 + 1Ã—1 = 3<br>
                y[3] = 1Ã—1 + 2Ã—0 + 0Ã—1 + 1Ã—2 = 3<br>
                ç»“æœï¼šy[n] = {5, 5, 3, 3}
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 4ï¼šDFTä¸DTFTå…³ç³»</h4>
            <p>åºåˆ—x[n] = {1, 0.5, 0, 0}ï¼Œæ±‚ï¼š</p>
            <ol>
                <li>DTFT X(e^jÏ‰)åœ¨Ï‰ = Ï€/2å¤„çš„å€¼</li>
                <li>4ç‚¹DFTçš„X[1]</li>
                <li>æ¯”è¾ƒä¸¤è€…å…³ç³»</li>
            </ol>
            <button class="show-answer" onclick="toggleAnswer('answer4')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer4" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                1. X(e^jÏ‰) = 1 + 0.5e^(-jÏ‰)ï¼Œåœ¨Ï‰=Ï€/2ï¼šX(e^jÏ€/2) = 1 + 0.5(-j) = 1 - 0.5j<br>
                2. X[1] = 1 + 0.5e^(-jÏ€/2) = 1 + 0.5(-j) = 1 - 0.5j<br>
                3. X[1] = X(e^jÏ‰)|_{Ï‰=2Ï€Â·1/4=Ï€/2}ï¼ŒéªŒè¯äº†DFTæ˜¯DTFTçš„é¢‘ç‡é‡‡æ ·
            </div>
        </div>
        
        <h2>5.7 å­¦ä¹ è¦ç‚¹æ€»ç»“</h2>
        
        <div class="important">
            <h3>ğŸ¯ DFTæ ¸å¿ƒè¦ç‚¹</h3>
            <ol>
                <li><strong>å®šä¹‰ç†è§£</strong>ï¼šæœ‰é™é•¿åºåˆ—çš„é¢‘åŸŸè¡¨ç¤º</li>
                <li><strong>é‡‡æ ·è§‚ç‚¹</strong>ï¼šDFT = DTFTçš„é¢‘ç‡é‡‡æ ·</li>
                <li><strong>å‘¨æœŸå»¶æ‹“</strong>ï¼šDFT = DFSçš„ä¸»å€¼åºåˆ—</li>
                <li><strong>é‡è¦æ€§è´¨</strong>ï¼š8ä¸ªæ ¸å¿ƒæ€§è´¨è¦ç†Ÿç»ƒæŒæ¡</li>
                <li><strong>å¾ªç¯ç‰¹æ€§</strong>ï¼šæ‰€æœ‰è¿ç®—éƒ½æ˜¯æ¨¡Nçš„å¾ªç¯è¿ç®—</li>
                <li><strong>è®¡ç®—æ•ˆç‡</strong>ï¼šFFTç®—æ³•çš„é‡è¦æ€§</li>
                <li><strong>å®é™…åº”ç”¨</strong>ï¼šæ•°å­—æ»¤æ³¢ã€é¢‘è°±åˆ†æçš„åŸºç¡€</li>
            </ol>
        </div>
        
        <div class="relationship-box">
            <h3>ğŸ”— çŸ¥è¯†ç‚¹æ€»ç»“å…³ç³»å›¾</h3>
            <p><strong>zå˜æ¢</strong> â†’ <strong>DTFT</strong> â†’ <strong>DFS</strong> â†’ <strong>DFT</strong> â†’ <strong>FFT</strong></p>
            <ul>
                <li>zå˜æ¢ï¼šæœ€ä¸€èˆ¬çš„å˜æ¢ï¼ŒåŒ…å«ROCæ¦‚å¿µ</li>
                <li>DTFTï¼šzå˜æ¢åœ¨å•ä½åœ†ä¸Šï¼Œè¿ç»­é¢‘è°±</li>
                <li>DFSï¼šå‘¨æœŸåºåˆ—çš„ç¦»æ•£é¢‘è°±</li>
                <li>DFTï¼šæœ‰é™é•¿åºåˆ—çš„ç¦»æ•£é¢‘è°±ï¼Œå®ç”¨æ€§æœ€å¼º</li>
                <li>FFTï¼šDFTçš„å¿«é€Ÿç®—æ³•ï¼Œå·¥ç¨‹åº”ç”¨æ ¸å¿ƒ</li>
            </ul>
        </div>
    </div>

    <script>
        // è®¡ç®—DFT
        function calculateDFT(x) {
            const N = x.length;
            const X = [];
            
            for (let k = 0; k < N; k++) {
                let real = 0;
                let imag = 0;
                
                for (let n = 0; n < N; n++) {
                    const angle = -2 * Math.PI * k * n / N;
                    real += x[n] * Math.cos(angle);
                    imag += x[n] * Math.sin(angle);
                }
                
                X.push({
                    real: real,
                    imag: imag,
                    magnitude: Math.sqrt(real * real + imag * imag),
                    phase: Math.atan2(imag, real)
                });
            }
            
            return X;
        }
        
        // è®¡ç®—DTFTï¼ˆåœ¨æŒ‡å®šé¢‘ç‡ç‚¹ï¼‰
        function calculateDTFT(x, omega) {
            let real = 0;
            let imag = 0;
            
            for (let n = 0; n < x.length; n++) {
                const angle = -omega * n;
                real += x[n] * Math.cos(angle);
                imag += x[n] * Math.sin(angle);
            }
            
            return {
                real: real,
                imag: imag,
                magnitude: Math.sqrt(real * real + imag * imag),
                phase: Math.atan2(imag, real)
            };
        }
        
        // ç”Ÿæˆæµ‹è¯•åºåˆ—
        function generateTestSequence(type, N) {
            const sequence = [];
            
            switch (type) {
                case 'rectangular':
                    for (let n = 0; n < N; n++) {
                        sequence.push(n < N/4 ? 1 : 0);
                    }
                    break;
                case 'triangular':
                    for (let n = 0; n < N; n++) {
                        if (n < N/2) {
                            sequence.push(2*n/(N-1));
                        } else {
                            sequence.push(2*(N-1-n)/(N-1));
                        }
                    }
                    break;
                case 'exponential':
                    for (let n = 0; n < N; n++) {
                        sequence.push(Math.pow(0.8, n));
                    }
                    break;
                case 'gaussian':
                    const sigma = N/6;
                    const mean = N/2;
                    for (let n = 0; n < N; n++) {
                        sequence.push(Math.exp(-Math.pow(n - mean, 2)/(2*sigma*sigma)));
                    }
                    break;
            }
            
            return sequence;
        }
        
        // ç»˜åˆ¶é‡‡æ ·æ¼”ç¤º
        function plotSamplingDemo() {
            const type = document.getElementById('samplingSequence').value;
            const N = parseInt(document.getElementById('samplingN').value);
            
            const sequence = generateTestSequence(type, N);
            
            // ç»˜åˆ¶è¿ç»­DTFT
            plotDTFTContinuous(sequence);
            
            // ç»˜åˆ¶DFTé‡‡æ ·ç‚¹
            plotDFTSamples(sequence);
        }
        
        function plotDTFTContinuous(sequence) {
            const canvas = document.getElementById('dtftContinuous');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const centerY = height * 0.8;
            const scaleX = width / (2 * Math.PI);
            
            // åæ ‡è½´
            drawAxes(ctx, width, height, centerY, 'Ï‰', '|X(e^jÏ‰)|');
            
            // è®¡ç®—å¹¶ç»˜åˆ¶DTFT
            const dtftData = [];
            for (let omega = 0; omega <= 2 * Math.PI; omega += 0.02) {
                const dtft = calculateDTFT(sequence, omega);
                dtftData.push(dtft.magnitude);
            }
            
            const maxMag = Math.max(...dtftData);
            const scaleY = (height * 0.5) / maxMag;
            
            ctx.strokeStyle = 'blue';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            dtftData.forEach((mag, index) => {
                const omega = index * 0.02;
                const x = omega * scaleX;
                const y = centerY - mag * scaleY;
                
                if (index === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            
            ctx.stroke();
        }
        
        function plotDFTSamples(sequence) {
            const canvas = document.getElementById('dftSamples');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const centerY = height * 0.8;
            const scaleX = width / (2 * Math.PI);
            
            // åæ ‡è½´
            drawAxes(ctx, width, height, centerY, 'Ï‰', '|X[k]|');
            
            // è®¡ç®—DFT
            const dftCoeffs = calculateDFT(sequence);
            const N = sequence.length;
            
            const maxMag = Math.max(...dftCoeffs.map(c => c.magnitude));
            const scaleY = (height * 0.5) / maxMag;
            
            // ç»˜åˆ¶DFTæ ·æœ¬
            ctx.strokeStyle = 'red';
            ctx.fillStyle = 'red';
            ctx.lineWidth = 2;
            
            dftCoeffs.forEach((coeff, k) => {
                const omega = 2 * Math.PI * k / N;
                const x = omega * scaleX;
                const y = centerY - coeff.magnitude * scaleY;
                
                // èŒ
                ctx.beginPath();
                ctx.moveTo(x, centerY);
                ctx.lineTo(x, y);
                ctx.stroke();
                
                // ç‚¹
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, 2 * Math.PI);
                ctx.fill();
                
                // æ ‡è®°é¢‘ç‡
                if (k < N/2) {
                    ctx.fillStyle = '#333';
                    ctx.font = '8px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(`${k}`, x, centerY + 12);
                    ctx.fillStyle = 'red';
                }
            });
        }
        
        // ç»˜åˆ¶åæ ‡è½´
        function drawAxes(ctx, width, height, centerY, xLabel, yLabel) {
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            // xè½´
            ctx.beginPath();
            ctx.moveTo(20, centerY);
            ctx.lineTo(width - 20, centerY);
            ctx.stroke();
            
            // yè½´
            ctx.beginPath();
            ctx.moveTo(40, 20);
            ctx.lineTo(40, height - 20);
            ctx.stroke();
            
            // æ ‡ç­¾
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(xLabel, width - 10, centerY + 15);
            ctx.fillText(yLabel, 40, 15);
            
            // é¢‘ç‡åˆ»åº¦
            const freqs = [0, 'Ï€/2', 'Ï€', '3Ï€/2', '2Ï€'];
            const positions = [0, Math.PI/2, Math.PI, 3*Math.PI/2, 2*Math.PI];
            const scaleX = width / (2 * Math.PI);
            
            positions.forEach((pos, index) => {
                const x = pos * scaleX;
                if (x >= 20 && x <= width - 20) {
                    ctx.beginPath();
                    ctx.moveTo(x, centerY - 3);
                    ctx.lineTo(x, centerY + 3);
                    ctx.stroke();
                    
                    ctx.fillText(freqs[index], x, centerY + 25);
                }
            });
        }
        
        // æ¼”ç¤ºDFTæ€§è´¨
        function demonstrateProperty() {
            const property = document.getElementById('propertyType').value;
            const param = parseInt(document.getElementById('propertyParam').value);
            
            // ç”Ÿæˆæµ‹è¯•åºåˆ—
            const x = [1, 1, 0, 0, 0, 0, 0, 0]; // 8ç‚¹åºåˆ—
            const X = calculateDFT(x);
            
            let y, Y, title1, title2;
            
            switch (property) {
                case 'time_shift':
                    y = timeShift(x, param);
                    Y = calculateDFT(y);
                    title1 = `åŸåºåˆ— x[n]`;
                    title2 = `æ—¶ç§»åºåˆ— x[n-${param}]`;
                    break;
                case 'freq_shift':
                    y = frequencyShift(x, param);
                    Y = calculateDFT(y);
                    title1 = `åŸåºåˆ— x[n]`;
                    title2 = `é¢‘ç§»åºåˆ— x[n]W^{-${param}n}`;
                    break;
                case 'symmetry':
                    // å±•ç¤ºå¯¹ç§°æ€§
                    Y = X.map((coeff, k) => ({
                        ...coeff,
                        magnitude: X[(8-k) % 8].magnitude
                    }));
                    title1 = `DFTå¹…åº¦è°± |X[k]|`;
                    title2 = `å¯¹ç§°éªŒè¯ |X[8-k]|`;
                    break;
                case 'convolution':
                    const h = [1, 0.5, 0.25, 0, 0, 0, 0, 0];
                    y = circularConvolution(x, h);
                    Y = calculateDFT(y);
                    title1 = `è¾“å…¥ x[n]`;
                    title2 = `å¾ªç¯å·ç§¯ç»“æœ`;
                    break;
            }
            
            plotPropertyDemo(x, X, y || x, Y, title1, title2);
        }
        
        // æ—¶ç§»å‡½æ•°
        function timeShift(x, shift) {
            const N = x.length;
            const y = new Array(N);
            for (let n = 0; n < N; n++) {
                y[n] = x[(n - shift + N) % N];
            }
            return y;
        }
        
        // é¢‘ç§»å‡½æ•°
        function frequencyShift(x, shift) {
            const N = x.length;
            const y = new Array(N);
            for (let n = 0; n < N; n++) {
                const angle = -2 * Math.PI * shift * n / N;
                y[n] = x[n] * Math.cos(angle); // ç®€åŒ–ä¸ºå®éƒ¨
            }
            return y;
        }
        
        // å¾ªç¯å·ç§¯
        function circularConvolution(x1, x2) {
            const N = x1.length;
            const y = new Array(N);
            
            for (let n = 0; n < N; n++) {
                y[n] = 0;
                for (let m = 0; m < N; m++) {
                    y[n] += x1[m] * x2[(n - m + N) % N];
                }
            }
            
            return y;
        }
        
        // ç»˜åˆ¶æ€§è´¨æ¼”ç¤º
        function plotPropertyDemo(x1, X1, x2, X2, title1, title2) {
            const canvas = document.getElementById('dftProperties');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // åˆ†æˆå››ä¸ªå­å›¾
            const subWidth = width / 2;
            const subHeight = height / 2;
            
            // æ—¶åŸŸåºåˆ—1
            plotSubsequence(ctx, x1, 0, 0, subWidth, subHeight, title1, 'blue');
            
            // é¢‘åŸŸåºåˆ—1
            plotSubspectrum(ctx, X1, subWidth, 0, subWidth, subHeight, `DFT: ${title1}`, 'blue');
            
            // æ—¶åŸŸåºåˆ—2
            plotSubsequence(ctx, x2, 0, subHeight, subWidth, subHeight, title2, 'red');
            
            // é¢‘åŸŸåºåˆ—2
            plotSubspectrum(ctx, X2, subWidth, subHeight, subWidth, subHeight, `DFT: ${title2}`, 'red');
        }
        
        function plotSubsequence(ctx, data, offsetX, offsetY, subWidth, subHeight, title, color) {
            const centerY = offsetY + subHeight * 0.8;
            const scaleX = (subWidth - 40) / (data.length + 1);
            const maxVal = Math.max(...data.map(Math.abs)) || 1;
            const scaleY = (subHeight * 0.4) / maxVal;
            
            // åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(offsetX + 20, centerY);
            ctx.lineTo(offsetX + subWidth - 20, centerY);
            ctx.stroke();
            
            // åºåˆ—
            ctx.strokeStyle = color;
            ctx.fillStyle = color;
            ctx.lineWidth = 2;
            
            data.forEach((value, index) => {
                const x = offsetX + 20 + (index + 1) * scaleX;
                const y = centerY - value * scaleY;
                
                ctx.beginPath();
                ctx.moveTo(x, centerY);
                ctx.lineTo(x, y);
                ctx.stroke();
                
                ctx.beginPath();
                ctx.arc(x, y, 2, 0, 2 * Math.PI);
                ctx.fill();
            });
            
            // æ ‡é¢˜
            ctx.fillStyle = color;
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(title, offsetX + subWidth/2, offsetY + 15);
        }
        
        function plotSubspectrum(ctx, coeffs, offsetX, offsetY, subWidth, subHeight, title, color) {
            const centerY = offsetY + subHeight * 0.8;
            const scaleX = (subWidth - 40) / (coeffs.length + 1);
            const maxMag = Math.max(...coeffs.map(c => c.magnitude)) || 1;
            const scaleY = (subHeight * 0.4) / maxMag;
            
            // åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(offsetX + 20, centerY);
            ctx.lineTo(offsetX + subWidth - 20, centerY);
            ctx.stroke();
            
            // é¢‘è°±
            ctx.strokeStyle = color;
            ctx.fillStyle = color;
            ctx.lineWidth = 2;
            
            coeffs.forEach((coeff, index) => {
                const x = offsetX + 20 + (index + 1) * scaleX;
                const y = centerY - coeff.magnitude * scaleY;
                
                ctx.beginPath();
                ctx.moveTo(x, centerY);
                ctx.lineTo(x, y);
                ctx.stroke();
                
                ctx.beginPath();
                ctx.arc(x, y, 2, 0, 2 * Math.PI);
                ctx.fill();
            });
            
            // æ ‡é¢˜
            ctx.fillStyle = color;
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(title, offsetX + subWidth/2, offsetY + 15);
        }
        
        // è®¡ç®—å¾ªç¯å·ç§¯
        function calculateCircularConv() {
            const seq1Input = document.getElementById('seq1').value;
            const seq2Input = document.getElementById('seq2').value;
            
            const seq1 = seq1Input.split(',').map(x => parseFloat(x.trim())).filter(x => !isNaN(x));
            const seq2 = seq2Input.split(',').map(x => parseFloat(x.trim())).filter(x => !isNaN(x));
            
            if (seq1.length === 0 || seq2.length === 0) {
                document.getElementById('convolutionResult').innerHTML = '<span style="color: red;">è¯·è¾“å…¥æœ‰æ•ˆçš„åºåˆ—ï¼</span>';
                return;
            }
            
            // è¡¥é›¶åˆ°ç›¸åŒé•¿åº¦
            const N = Math.max(seq1.length, seq2.length);
            while (seq1.length < N) seq1.push(0);
            while (seq2.length < N) seq2.push(0);
            
            // è®¡ç®—å¾ªç¯å·ç§¯
            const result = circularConvolution(seq1, seq2);
            
            // æ˜¾ç¤ºç»“æœ
            let resultHTML = '<h4>å¾ªç¯å·ç§¯ç»“æœï¼š</h4>';
            resultHTML += `<p>y[n] = {${result.map(x => x.toFixed(2)).join(', ')}}</p>`;
            
            document.getElementById('convolutionResult').innerHTML = resultHTML;
            
            // ç»˜åˆ¶å›¾å½¢
            plotConvolutionDemo(seq1, seq2, result);
        }
        
        function plotConvolutionDemo(x1, x2, y) {
            const canvas = document.getElementById('circularConvolution');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const subWidth = width / 3;
            
            plotSubsequence(ctx, x1, 0, 0, subWidth, height, 'åºåˆ—1: xâ‚[n]', 'blue');
            plotSubsequence(ctx, x2, subWidth, 0, subWidth, height, 'åºåˆ—2: xâ‚‚[n]', 'green');
            plotSubsequence(ctx, y, 2*subWidth, 0, subWidth, height, 'å¾ªç¯å·ç§¯: y[n]', 'red');
        }
        
        // åˆ‡æ¢ç­”æ¡ˆæ˜¾ç¤º
        function toggleAnswer(answerId) {
            const answer = document.getElementById(answerId);
            answer.style.display = answer.style.display === 'none' ? 'block' : 'none';
        }
        
        // é¡µé¢åŠ è½½ååˆå§‹åŒ–
        window.onload = function() {
            plotSamplingDemo();
            demonstrateProperty();
            calculateCircularConv();
        };
    </script>
</body>
</html>