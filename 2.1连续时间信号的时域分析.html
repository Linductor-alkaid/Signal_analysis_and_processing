<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¿ç»­æ—¶é—´ä¿¡å·çš„æ—¶åŸŸåˆ†æ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 30px;
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 30px;
            background: linear-gradient(45deg, #3498db, #8e44ad);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        h2 {
            color: #34495e;
            border-left: 4px solid #3498db;
            padding-left: 15px;
            margin-top: 40px;
        }
        
        h3 {
            color: #2980b9;
            margin-top: 25px;
        }
        
        .section {
            margin-bottom: 40px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .formula {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Times New Roman', serif;
            font-size: 1.1em;
            margin: 15px 0;
            border-left: 4px solid #3498db;
            text-align: center;
        }
        
        .signal-canvas {
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            margin: 20px 0;
            background: white;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .controls {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .controls label {
            margin-right: 15px;
            font-weight: bold;
        }
        
        .controls input, .controls select {
            margin: 5px;
            padding: 5px 10px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
        }
        
        button {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 5px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }
        
        .exercise {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .exercise h4 {
            color: #d68910;
            margin-top: 0;
        }
        
        .answer-input {
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 4px;
            margin: 10px;
            width: 200px;
        }
        
        .feedback {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }
        
        .correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .key-points {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .key-points h4 {
            color: #0c5460;
            margin-top: 0;
        }
        
        ul li {
            margin: 8px 0;
        }
        
        .convolution-demo {
            background: #f0f8ff;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #4169e1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“Š è¿ç»­æ—¶é—´ä¿¡å·çš„æ—¶åŸŸåˆ†æ</h1>
        
        <div class="section">
            <h2>1. åŸºæœ¬çš„è¿ç»­æ—¶é—´ä¿¡å·</h2>
            
            <h3>1.1 å•ä½é˜¶è·ƒä¿¡å· u(t)</h3>
            <div class="formula">
                u(t) = {1, t â‰¥ 0; 0, t < 0}
            </div>
            <canvas id="stepCanvas" class="signal-canvas" width="600" height="300"></canvas>
            
            <h3>1.2 å•ä½å†²æ¿€ä¿¡å· Î´(t)</h3>
            <div class="formula">
                Î´(t) = {âˆ, t = 0; 0, t â‰  0}<br>
                âˆ«_{-âˆ}^{âˆ} Î´(t)dt = 1
            </div>
            <canvas id="impulseCanvas" class="signal-canvas" width="600" height="300"></canvas>
            
            <h3>1.3 æŒ‡æ•°ä¿¡å·</h3>
            <div class="formula">
                x(t) = Ae^{at}, å…¶ä¸­Aä¸ºå¹…åº¦ï¼Œaä¸ºæŒ‡æ•°å‚æ•°
            </div>
            <div class="controls">
                <label>A:</label>
                <input type="range" id="expA" min="0.1" max="3" step="0.1" value="1">
                <span id="expAValue">1</span>
                <label>a:</label>
                <input type="range" id="expParam" min="-2" max="2" step="0.1" value="0.5">
                <span id="expParamValue">0.5</span>
                <button onclick="updateExpSignal()">æ›´æ–°å›¾åƒ</button>
            </div>
            <canvas id="expCanvas" class="signal-canvas" width="600" height="300"></canvas>
            
            <h3>1.4 æ­£å¼¦ä¿¡å·</h3>
            <div class="formula">
                x(t) = A sin(Ï‰t + Ï†), å…¶ä¸­Aä¸ºå¹…åº¦ï¼ŒÏ‰ä¸ºè§’é¢‘ç‡ï¼ŒÏ†ä¸ºåˆç›¸ä½
            </div>
            <div class="controls">
                <label>å¹…åº¦A:</label>
                <input type="range" id="sinA" min="0.1" max="3" step="0.1" value="1">
                <span id="sinAValue">1</span>
                <label>é¢‘ç‡Ï‰:</label>
                <input type="range" id="sinOmega" min="0.5" max="5" step="0.1" value="2">
                <span id="sinOmegaValue">2</span>
                <label>ç›¸ä½Ï†:</label>
                <input type="range" id="sinPhi" min="0" max="6.28" step="0.1" value="0">
                <span id="sinPhiValue">0</span>
                <button onclick="updateSinSignal()">æ›´æ–°å›¾åƒ</button>
            </div>
            <canvas id="sinCanvas" class="signal-canvas" width="600" height="300"></canvas>
            
            <div class="key-points">
                <h4>é‡ç‚¹è®°å¿†ï¼š</h4>
                <ul>
                    <li>å•ä½é˜¶è·ƒä¿¡å·æ˜¯æœ€åŸºæœ¬çš„ä¿¡å·ï¼Œç”¨äºæè¿°å¼€å…³ç‰¹æ€§</li>
                    <li>å•ä½å†²æ¿€ä¿¡å·å…·æœ‰ç­›é€‰ç‰¹æ€§ï¼šâˆ«f(t)Î´(t-tâ‚€)dt = f(tâ‚€)</li>
                    <li>æŒ‡æ•°ä¿¡å·ï¼ša>0æ—¶é€’å¢ï¼Œa<0æ—¶é€’å‡ï¼Œa=0æ—¶ä¸ºå¸¸æ•°</li>
                    <li>æ­£å¼¦ä¿¡å·çš„ä¸‰è¦ç´ ï¼šå¹…åº¦ã€é¢‘ç‡ã€ç›¸ä½</li>
                </ul>
            </div>
            
            <div class="exercise">
                <h4>ğŸ”§ ç»ƒä¹ é¢˜1ï¼š</h4>
                <p>è‹¥ä¿¡å·x(t) = 2e^(-0.5t)u(t)ï¼Œæ±‚t=2æ—¶çš„ä¿¡å·å€¼ï¼ˆä¿ç•™ä¸¤ä½å°æ•°ï¼‰ï¼š</p>
                <input type="number" id="answer1" class="answer-input" placeholder="è¾“å…¥ç­”æ¡ˆ" step="0.01">
                <button onclick="checkAnswer1()">æäº¤ç­”æ¡ˆ</button>
                <div id="feedback1" class="feedback" style="display:none;"></div>
            </div>
        </div>
        
        <div class="section">
            <h2>2. è¿ç»­æ—¶é—´ä¿¡å·çš„è¿ç®—</h2>
            
            <h3>2.1 æ—¶ç§»è¿ç®—</h3>
            <div class="formula">
                x(t-tâ‚€): ä¿¡å·å‘å³æ—¶ç§»tâ‚€<br>
                x(t+tâ‚€): ä¿¡å·å‘å·¦æ—¶ç§»tâ‚€
            </div>
            
            <h3>2.2 æ—¶é—´å°ºåº¦å˜æ¢</h3>
            <div class="formula">
                x(at): a>1æ—¶å‹ç¼©ï¼Œ0<a<1æ—¶æ‰©å±•ï¼Œa<0æ—¶ç¿»è½¬+å°ºåº¦å˜æ¢
            </div>
            
            <h3>2.3 ç¿»è½¬è¿ç®—</h3>
            <div class="formula">
                x(-t): ä¿¡å·å…³äºt=0è½´ç¿»è½¬
            </div>
            
            <div class="controls">
                <label>é€‰æ‹©åŸºç¡€ä¿¡å·:</label>
                <select id="baseSignal">
                    <option value="step">é˜¶è·ƒä¿¡å·</option>
                    <option value="exp">æŒ‡æ•°ä¿¡å·</option>
                    <option value="sin">æ­£å¼¦ä¿¡å·</option>
                </select>
                <label>æ—¶ç§»tâ‚€:</label>
                <input type="range" id="timeShift" min="-3" max="3" step="0.1" value="0">
                <span id="timeShiftValue">0</span>
                <label>å°ºåº¦a:</label>
                <input type="range" id="timeScale" min="-2" max="2" step="0.1" value="1">
                <span id="timeScaleValue">1</span>
                <button onclick="updateTransformedSignal()">æ›´æ–°å˜æ¢</button>
            </div>
            <canvas id="transformCanvas" class="signal-canvas" width="600" height="400"></canvas>
            
            <div class="exercise">
                <h4>ğŸ”§ ç»ƒä¹ é¢˜2ï¼š</h4>
                <p>è‹¥x(t) = u(t+2) - u(t-2)ï¼Œè¿™æ˜¯ä¸€ä¸ªå®½åº¦ä¸ºå¤šå°‘çš„çŸ©å½¢è„‰å†²ï¼Ÿ</p>
                <input type="number" id="answer2" class="answer-input" placeholder="è¾“å…¥ç­”æ¡ˆ">
                <button onclick="checkAnswer2()">æäº¤ç­”æ¡ˆ</button>
                <div id="feedback2" class="feedback" style="display:none;"></div>
            </div>
        </div>
        
        <div class="section">
            <h2>3. è¿ç»­æ—¶é—´ä¿¡å·çš„åˆ†è§£</h2>
            
            <h3>3.1 å¥‡å¶åˆ†è§£</h3>
            <div class="formula">
                x(t) = x_e(t) + x_o(t)<br>
                å¶åˆ†é‡ï¼šx_e(t) = [x(t) + x(-t)]/2<br>
                å¥‡åˆ†é‡ï¼šx_o(t) = [x(t) - x(-t)]/2
            </div>
            
            <div class="controls">
                <label>è¾“å…¥ä¿¡å·:</label>
                <select id="decomposeSignal" onchange="updateDecomposition()">
                    <option value="exp">æŒ‡æ•°ä¿¡å· e^t</option>
                    <option value="custom">è‡ªå®šä¹‰ä¿¡å· tÂ²</option>
                </select>
            </div>
            <canvas id="decomposeCanvas" class="signal-canvas" width="600" height="500"></canvas>
            
            <div class="key-points">
                <h4>å¥‡å¶åˆ†è§£æ€§è´¨ï¼š</h4>
                <ul>
                    <li>å¶å‡½æ•°ï¼šf(-t) = f(t)ï¼Œå…³äºyè½´å¯¹ç§°</li>
                    <li>å¥‡å‡½æ•°ï¼šf(-t) = -f(t)ï¼Œå…³äºåŸç‚¹å¯¹ç§°</li>
                    <li>ä»»ä½•ä¿¡å·éƒ½å¯ä»¥å”¯ä¸€åˆ†è§£ä¸ºå¥‡åˆ†é‡å’Œå¶åˆ†é‡ä¹‹å’Œ</li>
                </ul>
            </div>
            
            <div class="exercise">
                <h4>ğŸ”§ ç»ƒä¹ é¢˜3ï¼š</h4>
                <p>ä¿¡å·x(t) = tÂ³çš„å¥‡åˆ†é‡æ˜¯ä»€ä¹ˆï¼Ÿ</p>
                <select id="answer3" class="answer-input">
                    <option value="">é€‰æ‹©ç­”æ¡ˆ</option>
                    <option value="t3">tÂ³</option>
                    <option value="0">0</option>
                    <option value="t3/2">tÂ³/2</option>
                </select>
                <button onclick="checkAnswer3()">æäº¤ç­”æ¡ˆ</button>
                <div id="feedback3" class="feedback" style="display:none;"></div>
            </div>
        </div>
        
        <div class="section">
            <h2>4. æ—¶åŸŸåˆ†ææ³•â€”â€”å·ç§¯</h2>
            
            <h3>4.1 å·ç§¯å®šä¹‰</h3>
            <div class="formula">
                y(t) = x(t) * h(t) = âˆ«_{-âˆ}^{âˆ} x(Ï„)h(t-Ï„)dÏ„
            </div>
            
            <h3>4.2 å·ç§¯çš„å›¾è§£æ³•æ­¥éª¤</h3>
            <div class="key-points">
                <h4>å·ç§¯å›¾è§£æ³•ï¼š</h4>
                <ul>
                    <li>1. å°†h(Ï„)ç¿»è½¬å¾—åˆ°h(-Ï„)</li>
                    <li>2. å°†h(-Ï„)æ—¶ç§»tå¾—åˆ°h(t-Ï„)</li>
                    <li>3. è®¡ç®—x(Ï„)ä¸h(t-Ï„)çš„ä¹˜ç§¯</li>
                    <li>4. å¯¹ä¹˜ç§¯åœ¨æ•´ä¸ªÏ„è½´ä¸Šç§¯åˆ†</li>
                </ul>
            </div>
            
            <div class="convolution-demo">
                <h4>å·ç§¯å¯è§†åŒ–æ¼”ç¤º</h4>
                <div class="controls">
                    <label>æ—¶é—´t:</label>
                    <input type="range" id="convTime" min="-5" max="5" step="0.1" value="0">
                    <span id="convTimeValue">0</span>
                    <button onclick="updateConvolution()">æ›´æ–°å·ç§¯</button>
                    <button onclick="animateConvolution()">åŠ¨ç”»æ¼”ç¤º</button>
                </div>
                <canvas id="convolutionCanvas" class="signal-canvas" width="600" height="600"></canvas>
            </div>
            
            <h3>4.3 å·ç§¯æ€§è´¨</h3>
            <div class="key-points">
                <h4>é‡è¦æ€§è´¨ï¼š</h4>
                <ul>
                    <li>äº¤æ¢å¾‹ï¼šx(t) * h(t) = h(t) * x(t)</li>
                    <li>ç»“åˆå¾‹ï¼š[x(t) * hâ‚(t)] * hâ‚‚(t) = x(t) * [hâ‚(t) * hâ‚‚(t)]</li>
                    <li>åˆ†é…å¾‹ï¼šx(t) * [hâ‚(t) + hâ‚‚(t)] = x(t) * hâ‚(t) + x(t) * hâ‚‚(t)</li>
                    <li>å†²æ¿€å‡½æ•°æ€§è´¨ï¼šx(t) * Î´(t) = x(t)</li>
                </ul>
            </div>
            
            <div class="exercise">
                <h4>ğŸ”§ ç»ƒä¹ é¢˜4ï¼š</h4>
                <p>è®¡ç®—u(t) * u(t)çš„ç»“æœæ˜¯ï¼š</p>
                <select id="answer4" class="answer-input">
                    <option value="">é€‰æ‹©ç­”æ¡ˆ</option>
                    <option value="tu(t)">tu(t)</option>
                    <option value="u(t)">u(t)</option>
                    <option value="tÂ²u(t)">tÂ²u(t)</option>
                </select>
                <button onclick="checkAnswer4()">æäº¤ç­”æ¡ˆ</button>
                <div id="feedback4" class="feedback" style="display:none;"></div>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ“ æœ¬ç« å°ç»“</h2>
            <div class="key-points">
                <h4>æ ¸å¿ƒè¦ç‚¹ï¼š</h4>
                <ul>
                    <li><strong>åŸºæœ¬ä¿¡å·ï¼š</strong>æŒæ¡é˜¶è·ƒã€å†²æ¿€ã€æŒ‡æ•°ã€æ­£å¼¦ä¿¡å·çš„å®šä¹‰å’Œæ€§è´¨</li>
                    <li><strong>ä¿¡å·è¿ç®—ï¼š</strong>ç†è§£æ—¶ç§»ã€å°ºåº¦å˜æ¢ã€ç¿»è½¬çš„å‡ ä½•æ„ä¹‰</li>
                    <li><strong>ä¿¡å·åˆ†è§£ï¼š</strong>ä»»ä½•ä¿¡å·éƒ½å¯åˆ†è§£ä¸ºå¥‡å¶åˆ†é‡</li>
                    <li><strong>å·ç§¯è¿ç®—ï¼š</strong>æ˜¯LTIç³»ç»Ÿåˆ†æçš„æ ¸å¿ƒå·¥å…·ï¼ŒæŒæ¡å›¾è§£æ³•å’Œæ€§è´¨</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // ç»˜å›¾å·¥å…·å‡½æ•°
        function drawAxis(ctx, width, height, xMin, xMax, yMin, yMax) {
            ctx.clearRect(0, 0, width, height);
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            // åæ ‡è½´
            const centerX = width / 2;
            const centerY = height / 2;
            
            // Xè½´
            ctx.beginPath();
            ctx.moveTo(20, centerY);
            ctx.lineTo(width - 20, centerY);
            ctx.stroke();
            
            // Yè½´
            ctx.beginPath();
            ctx.moveTo(centerX, 20);
            ctx.lineTo(centerX, height - 20);
            ctx.stroke();
            
            // ç®­å¤´
            ctx.beginPath();
            ctx.moveTo(width - 25, centerY - 5);
            ctx.lineTo(width - 20, centerY);
            ctx.lineTo(width - 25, centerY + 5);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(centerX - 5, 25);
            ctx.lineTo(centerX, 20);
            ctx.lineTo(centerX + 5, 25);
            ctx.stroke();
            
            // æ ‡ç­¾
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.fillText('t', width - 15, centerY + 15);
            ctx.fillText('x(t)', centerX + 10, 35);
            ctx.fillText('0', centerX + 5, centerY + 15);
        }
        
        function drawStepFunction() {
            const canvas = document.getElementById('stepCanvas');
            const ctx = canvas.getContext('2d');
            drawAxis(ctx, 600, 300, -5, 5, -0.5, 1.5);
            
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 3;
            
            const centerX = 300;
            const centerY = 150;
            
            // t < 0éƒ¨åˆ†
            ctx.beginPath();
            ctx.moveTo(50, centerY);
            ctx.lineTo(centerX, centerY);
            ctx.stroke();
            
            // t â‰¥ 0éƒ¨åˆ†
            ctx.beginPath();
            ctx.moveTo(centerX, centerY - 60);
            ctx.lineTo(550, centerY - 60);
            ctx.stroke();
            
            // å‚ç›´çº¿è¡¨ç¤ºè·³è·ƒ
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(centerX, centerY - 60);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // æ ‡è®°ç‚¹
            ctx.fillStyle = '#e74c3c';
            ctx.beginPath();
            ctx.arc(centerX, centerY - 60, 4, 0, 2 * Math.PI);
            ctx.fill();
            
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.fillText('1', centerX + 10, centerY - 55);
        }
        
        function drawImpulseFunction() {
            const canvas = document.getElementById('impulseCanvas');
            const ctx = canvas.getContext('2d');
            drawAxis(ctx, 600, 300, -5, 5, -0.5, 1.5);
            
            ctx.strokeStyle = '#3498db';
            ctx.lineWidth = 3;
            
            const centerX = 300;
            const centerY = 150;
            
            // å†²æ¿€ä¿¡å·ï¼ˆç”¨ç®­å¤´è¡¨ç¤ºï¼‰
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(centerX, centerY - 80);
            ctx.stroke();
            
            // ç®­å¤´å¤´éƒ¨
            ctx.beginPath();
            ctx.moveTo(centerX - 5, centerY - 75);
            ctx.lineTo(centerX, centerY - 80);
            ctx.lineTo(centerX + 5, centerY - 75);
            ctx.stroke();
            
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.fillText('Î´(t)', centerX + 10, centerY - 70);
        }
        
        function updateExpSignal() {
            const A = parseFloat(document.getElementById('expA').value);
            const a = parseFloat(document.getElementById('expParam').value);
            document.getElementById('expAValue').textContent = A;
            document.getElementById('expParamValue').textContent = a;
            
            const canvas = document.getElementById('expCanvas');
            const ctx = canvas.getContext('2d');
            drawAxis(ctx, 600, 300, -5, 5, -3, 3);
            
            ctx.strokeStyle = '#27ae60';
            ctx.lineWidth = 3;
            
            const centerX = 300;
            const centerY = 150;
            const scaleX = 50;
            const scaleY = 40;
            
            ctx.beginPath();
            for (let t = -5; t <= 5; t += 0.1) {
                const x = centerX + t * scaleX;
                const y = centerY - A * Math.exp(a * t) * scaleY;
                if (t === -5) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // æ·»åŠ å…¬å¼æ ‡ç­¾
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.fillText(`x(t) = ${A}e^(${a}t)`, 50, 50);
        }
        
        function updateSinSignal() {
            const A = parseFloat(document.getElementById('sinA').value);
            const omega = parseFloat(document.getElementById('sinOmega').value);
            const phi = parseFloat(document.getElementById('sinPhi').value);
            document.getElementById('sinAValue').textContent = A;
            document.getElementById('sinOmegaValue').textContent = omega;
            document.getElementById('sinPhiValue').textContent = phi.toFixed(2);
            
            const canvas = document.getElementById('sinCanvas');
            const ctx = canvas.getContext('2d');
            drawAxis(ctx, 600, 300, -5, 5, -3, 3);
            
            ctx.strokeStyle = '#8e44ad';
            ctx.lineWidth = 3;
            
            const centerX = 300;
            const centerY = 150;
            const scaleX = 50;
            const scaleY = 60;
            
            ctx.beginPath();
            for (let t = -5; t <= 5; t += 0.02) {
                const x = centerX + t * scaleX;
                const y = centerY - A * Math.sin(omega * t + phi) * scaleY;
                if (t === -5) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // æ·»åŠ å…¬å¼æ ‡ç­¾
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.fillText(`x(t) = ${A}sin(${omega}t + ${phi.toFixed(2)})`, 50, 50);
        }
        
        function updateTransformedSignal() {
            const baseSignal = document.getElementById('baseSignal').value;
            const t0 = parseFloat(document.getElementById('timeShift').value);
            const a = parseFloat(document.getElementById('timeScale').value);
            document.getElementById('timeShiftValue').textContent = t0;
            document.getElementById('timeScaleValue').textContent = a;
            
            const canvas = document.getElementById('transformCanvas');
            const ctx = canvas.getContext('2d');
            drawAxis(ctx, 600, 400, -5, 5, -2, 2);
            
            const centerX = 300;
            const centerY = 200;
            const scaleX = 50;
            const scaleY = 80;
            
            // åŸä¿¡å·
            ctx.strokeStyle = '#95a5a6';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            drawBaseSignal(ctx, baseSignal, centerX, centerY, scaleX, scaleY, 0, 1);
            ctx.setLineDash([]);
            
            // å˜æ¢åä¿¡å·
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 3;
            drawBaseSignal(ctx, baseSignal, centerX, centerY, scaleX, scaleY, t0, a);
            
            // æ·»åŠ æ ‡ç­¾
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.fillText('åŸä¿¡å· (è™šçº¿)', 50, 50);
            ctx.fillText(`å˜æ¢å: x(${a}t${t0 >= 0 ? '-' : '+'}${Math.abs(t0)})`, 50, 70);
        }
        
        function drawBaseSignal(ctx, type, centerX, centerY, scaleX, scaleY, t0, a) {
            ctx.beginPath();
            for (let t = -5; t <= 5; t += 0.05) {
                const transformedT = a * t - t0;
                let y;
                
                switch(type) {
                    case 'step':
                        y = transformedT >= 0 ? 1 : 0;
                        break;
                    case 'exp':
                        y = Math.exp(-Math.abs(transformedT));
                        break;
                    case 'sin':
                        y = Math.sin(2 * transformedT);
                        break;
                }
                
                const x = centerX + t * scaleX;
                const plotY = centerY - y * scaleY;
                
                if (t === -5) {
                    ctx.moveTo(x, plotY);
                } else {
                    ctx.lineTo(x, plotY);
                }
            }
            ctx.stroke();
        }
        
        function updateDecomposition() {
            const signal = document.getElementById('decomposeSignal').value;
            const canvas = document.getElementById('decomposeCanvas');
            const ctx = canvas.getContext('2d');
            
            // æ¸…ç©ºç”»å¸ƒå¹¶è®¾ç½®ä¸‰ä¸ªå­å›¾
            ctx.clearRect(0, 0, 600, 500);
            
            // ç»˜åˆ¶ä¸‰ä¸ªå­å›¾çš„åæ ‡è½´
            for (let i = 0; i < 3; i++) {
                const offsetY = i * 160 + 20;
                drawSubAxis(ctx, 600, 150, offsetY, -3, 3, -2, 2);
            }
            
            const centerX = 300;
            const scaleX = 80;
            const scaleY = 40;
            
            // åŸä¿¡å·
            ctx.strokeStyle = '#2c3e50';
            ctx.lineWidth = 3;
            drawDecomposeSignal(ctx, signal, 'original', centerX, 95, scaleX, scaleY);
            
            // å¶åˆ†é‡
            ctx.strokeStyle = '#e74c3c';
            drawDecomposeSignal(ctx, signal, 'even', centerX, 255, scaleX, scaleY);
            
            // å¥‡åˆ†é‡
            ctx.strokeStyle = '#3498db';
            drawDecomposeSignal(ctx, signal, 'odd', centerX, 415, scaleX, scaleY);
            
            // æ·»åŠ æ ‡ç­¾
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.fillText('åŸä¿¡å· x(t)', 50, 40);
            ctx.fillText('å¶åˆ†é‡ xe(t)', 50, 200);
            ctx.fillText('å¥‡åˆ†é‡ xo(t)', 50, 360);
        }
        
        function drawSubAxis(ctx, width, height, offsetY, xMin, xMax, yMin, yMax) {
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            const centerX = width / 2;
            const centerY = height / 2 + offsetY;
            
            // Xè½´
            ctx.beginPath();
            ctx.moveTo(50, centerY);
            ctx.lineTo(width - 50, centerY);
            ctx.stroke();
            
            // Yè½´
            ctx.beginPath();
            ctx.moveTo(centerX, offsetY + 20);
            ctx.lineTo(centerX, offsetY + height - 20);
            ctx.stroke();
        }
        
        function drawDecomposeSignal(ctx, type, component, centerX, centerY, scaleX, scaleY) {
            ctx.beginPath();
            for (let t = -3; t <= 3; t += 0.05) {
                let y;
                
                if (type === 'exp') {
                    const original = Math.exp(t);
                    const flipped = Math.exp(-t);
                    
                    switch(component) {
                        case 'original':
                            y = original / 10; // ç¼©æ”¾ä»¥é€‚åº”å›¾è¡¨
                            break;
                        case 'even':
                            y = (original + flipped) / 20;
                            break;
                        case 'odd':
                            y = (original - flipped) / 20;
                            break;
                    }
                } else if (type === 'custom') {
                    const original = t * t;
                    const flipped = t * t; // tÂ²æ˜¯å¶å‡½æ•°
                    
                    switch(component) {
                        case 'original':
                            y = original / 5;
                            break;
                        case 'even':
                            y = (original + flipped) / 10;
                            break;
                        case 'odd':
                            y = (original - flipped) / 10;
                            break;
                    }
                }
                
                const x = centerX + t * scaleX;
                const plotY = centerY - y * scaleY;
                
                if (t === -3) {
                    ctx.moveTo(x, plotY);
                } else {
                    ctx.lineTo(x, plotY);
                }
            }
            ctx.stroke();
        }
        
        let animationId;
        
        function updateConvolution() {
            const t = parseFloat(document.getElementById('convTime').value);
            document.getElementById('convTimeValue').textContent = t;
            
            const canvas = document.getElementById('convolutionCanvas');
            const ctx = canvas.getContext('2d');
            
            // æ¸…ç©ºç”»å¸ƒ
            ctx.clearRect(0, 0, 600, 600);
            
            // ç»˜åˆ¶å››ä¸ªå­å›¾
            drawConvolutionSubplots(ctx, t);
        }
        
        function drawConvolutionSubplots(ctx, t) {
            const subplotHeight = 140;
            const centerX = 300;
            const scaleX = 40;
            const scaleY = 60;
            
            // å­å›¾1: x(Ï„)
            drawSubAxis(ctx, 600, subplotHeight, 10, -5, 5, -1.5, 1.5);
            ctx.strokeStyle = '#3498db';
            ctx.lineWidth = 3;
            drawRectPulse(ctx, centerX, 80, scaleX, scaleY, 0, 2); // x(Ï„) = u(Ï„) - u(Ï„-2)
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.fillText('x(Ï„)', 50, 30);
            
            // å­å›¾2: h(t-Ï„)
            drawSubAxis(ctx, 600, subplotHeight, 160, -5, 5, -1.5, 1.5);
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 3;
            drawRectPulse(ctx, centerX, 230, scaleX, scaleY, t-1, 1); // h(t-Ï„) 
            ctx.fillStyle = '#333';
            ctx.fillText(`h(${t.toFixed(1)}-Ï„)`, 50, 180);
            
            // å­å›¾3: x(Ï„)h(t-Ï„)
            drawSubAxis(ctx, 600, subplotHeight, 310, -5, 5, -1.5, 1.5);
            ctx.strokeStyle = '#27ae60';
            ctx.lineWidth = 3;
            drawConvolutionProduct(ctx, centerX, 380, scaleX, scaleY, t);
            ctx.fillStyle = '#333';
            ctx.fillText('x(Ï„)h(t-Ï„)', 50, 330);
            
            // å­å›¾4: å·ç§¯ç»“æœ
            drawSubAxis(ctx, 600, subplotHeight, 460, -5, 5, -1.5, 2);
            ctx.strokeStyle = '#8e44ad';
            ctx.lineWidth = 3;
            drawConvolutionResult(ctx, centerX, 530, scaleX, scaleY);
            ctx.fillStyle = '#333';
            ctx.fillText('y(t) = x(t)*h(t)', 50, 480);
            
            // åœ¨å·ç§¯ç»“æœå›¾ä¸Šæ ‡è®°å½“å‰æ—¶é—´ç‚¹
            const convValue = calculateConvolutionValue(t);
            ctx.fillStyle = '#e74c3c';
            ctx.beginPath();
            ctx.arc(centerX + t * scaleX, 530 - convValue * scaleY, 5, 0, 2 * Math.PI);
            ctx.fill();
        }
        
        function drawRectPulse(ctx, centerX, centerY, scaleX, scaleY, start, width) {
            ctx.beginPath();
            // ç”»çŸ©å½¢è„‰å†²
            ctx.moveTo(centerX + (start - 3) * scaleX, centerY);
            ctx.lineTo(centerX + start * scaleX, centerY);
            ctx.lineTo(centerX + start * scaleX, centerY - scaleY);
            ctx.lineTo(centerX + (start + width) * scaleX, centerY - scaleY);
            ctx.lineTo(centerX + (start + width) * scaleX, centerY);
            ctx.lineTo(centerX + 5 * scaleX, centerY);
            ctx.stroke();
        }
        
        function drawConvolutionProduct(ctx, centerX, centerY, scaleX, scaleY, t) {
            // è®¡ç®—x(Ï„)å’Œh(t-Ï„)çš„ä¹˜ç§¯
            const x_start = 0, x_end = 2;  // x(Ï„)çš„èŒƒå›´
            const h_start = t - 1, h_end = t;  // h(t-Ï„)çš„èŒƒå›´
            
            const overlap_start = Math.max(x_start, h_start);
            const overlap_end = Math.min(x_end, h_end);
            
            if (overlap_start < overlap_end) {
                ctx.beginPath();
                ctx.moveTo(centerX + (overlap_start - 3) * scaleX, centerY);
                ctx.lineTo(centerX + overlap_start * scaleX, centerY);
                ctx.lineTo(centerX + overlap_start * scaleX, centerY - scaleY);
                ctx.lineTo(centerX + overlap_end * scaleX, centerY - scaleY);
                ctx.lineTo(centerX + overlap_end * scaleX, centerY);
                ctx.lineTo(centerX + 5 * scaleX, centerY);
                ctx.stroke();
            } else {
                // æ— é‡å ï¼Œç”»é›¶çº¿
                ctx.beginPath();
                ctx.moveTo(centerX - 3 * scaleX, centerY);
                ctx.lineTo(centerX + 5 * scaleX, centerY);
                ctx.stroke();
            }
        }
        
        function drawConvolutionResult(ctx, centerX, centerY, scaleX, scaleY) {
            ctx.beginPath();
            let first = true;
            for (let t = -2; t <= 5; t += 0.1) {
                const y = calculateConvolutionValue(t);
                const x = centerX + t * scaleX;
                const plotY = centerY - y * scaleY;
                
                if (first) {
                    ctx.moveTo(x, plotY);
                    first = false;
                } else {
                    ctx.lineTo(x, plotY);
                }
            }
            ctx.stroke();
        }
        
        function calculateConvolutionValue(t) {
            // è®¡ç®—ä¸¤ä¸ªçŸ©å½¢è„‰å†²çš„å·ç§¯
            // x(t) = u(t) - u(t-2), h(t) = u(t) - u(t-1)
            if (t < 0) return 0;
            else if (t < 1) return t;
            else if (t < 2) return 1;
            else if (t < 3) return 3 - t;
            else return 0;
        }
        
        function animateConvolution() {
            let t = -2;
            const animate = () => {
                document.getElementById('convTime').value = t;
                updateConvolution();
                t += 0.2;
                if (t <= 5) {
                    animationId = setTimeout(animate, 200);
                }
            };
            animate();
        }
        
        // ç»ƒä¹ é¢˜ç­”æ¡ˆæ£€æŸ¥
        function checkAnswer1() {
            const answer = parseFloat(document.getElementById('answer1').value);
            const correct = 2 * Math.exp(-0.5 * 2);
            const feedback = document.getElementById('feedback1');
            
            if (Math.abs(answer - correct) < 0.01) {
                feedback.textContent = 'æ­£ç¡®ï¼x(2) = 2e^(-0.5Ã—2) = 2e^(-1) â‰ˆ 0.74';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = `é”™è¯¯ã€‚æ­£ç¡®ç­”æ¡ˆæ˜¯ ${correct.toFixed(2)}ã€‚è®¡ç®—è¿‡ç¨‹ï¼šx(2) = 2e^(-0.5Ã—2) = 2e^(-1)`;
                feedback.className = 'feedback incorrect';
            }
            feedback.style.display = 'block';
        }
        
        function checkAnswer2() {
            const answer = parseFloat(document.getElementById('answer2').value);
            const feedback = document.getElementById('feedback2');
            
            if (answer === 4) {
                feedback.textContent = 'æ­£ç¡®ï¼u(t+2) - u(t-2)è¡¨ç¤ºä»t=-2åˆ°t=2çš„çŸ©å½¢è„‰å†²ï¼Œå®½åº¦ä¸º4ã€‚';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = 'é”™è¯¯ã€‚u(t+2)åœ¨t=-2å¤„è·³è·ƒä¸º1ï¼Œu(t-2)åœ¨t=2å¤„è·³è·ƒä¸º1ï¼Œæ‰€ä»¥çŸ©å½¢è„‰å†²å®½åº¦ä¸º2-(-2)=4ã€‚';
                feedback.className = 'feedback incorrect';
            }
            feedback.style.display = 'block';
        }
        
        function checkAnswer3() {
            const answer = document.getElementById('answer3').value;
            const feedback = document.getElementById('feedback3');
            
            if (answer === 't3') {
                feedback.textContent = 'æ­£ç¡®ï¼å› ä¸ºtÂ³æ˜¯å¥‡å‡½æ•°ï¼Œæ‰€ä»¥å®ƒçš„å¥‡åˆ†é‡å°±æ˜¯å®ƒæœ¬èº«tÂ³ã€‚';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = 'é”™è¯¯ã€‚tÂ³æ˜¯å¥‡å‡½æ•°ï¼Œå› ä¸º(-t)Â³ = -tÂ³ï¼Œæ‰€ä»¥å¥‡åˆ†é‡ = [tÂ³ - (-tÂ³)]/2 = tÂ³ã€‚';
                feedback.className = 'feedback incorrect';
            }
            feedback.style.display = 'block';
        }
        
        function checkAnswer4() {
            const answer = document.getElementById('answer4').value;
            const feedback = document.getElementById('feedback4');
            
            if (answer === 'tu(t)') {
                feedback.textContent = 'æ­£ç¡®ï¼u(t) * u(t) = tu(t)ï¼Œè¿™æ˜¯ç»å…¸çš„å·ç§¯ç»“æœã€‚';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = 'é”™è¯¯ã€‚u(t) * u(t) = âˆ«u(Ï„)u(t-Ï„)dÏ„ï¼Œç§¯åˆ†åŒºé—´ä¸º[0,t]ï¼ˆå½“t>0æ—¶ï¼‰ï¼Œç»“æœä¸ºtu(t)ã€‚';
                feedback.className = 'feedback incorrect';
            }
            feedback.style.display = 'block';
        }
        
        // åˆå§‹åŒ–å›¾åƒ
        window.onload = function() {
            drawStepFunction();
            drawImpulseFunction();
            updateExpSignal();
            updateSinSignal();
            updateTransformedSignal();
            updateDecomposition();
            updateConvolution();
        };
        
        // äº‹ä»¶ç›‘å¬å™¨
        document.getElementById('expA').addEventListener('input', updateExpSignal);
        document.getElementById('expParam').addEventListener('input', updateExpSignal);
        document.getElementById('sinA').addEventListener('input', updateSinSignal);
        document.getElementById('sinOmega').addEventListener('input', updateSinSignal);
        document.getElementById('sinPhi').addEventListener('input', updateSinSignal);
        document.getElementById('timeShift').addEventListener('input', updateTransformedSignal);
        document.getElementById('timeScale').addEventListener('input', updateTransformedSignal);
        document.getElementById('baseSignal').addEventListener('change', updateTransformedSignal);
        document.getElementById('convTime').addEventListener('input', updateConvolution);
    </script>
</body>
</html>