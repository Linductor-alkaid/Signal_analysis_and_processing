<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‘¨æœŸä¿¡å·çš„é¢‘è°±åˆ†æ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 50%, #6c5ce7 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
            padding: 30px;
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 30px;
            background: linear-gradient(45deg, #74b9ff, #6c5ce7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        h2 {
            color: #34495e;
            border-left: 4px solid #74b9ff;
            padding-left: 15px;
            margin-top: 40px;
        }
        
        h3 {
            color: #0984e3;
            margin-top: 25px;
        }
        
        .section {
            margin-bottom: 40px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .formula {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Times New Roman', serif;
            font-size: 1.1em;
            margin: 15px 0;
            border-left: 4px solid #2196f3;
            text-align: center;
        }
        
        .canvas-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
        }
        
        .signal-canvas {
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            margin: 10px;
            background: white;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .controls {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 1px solid #4caf50;
        }
        
        .controls label {
            margin-right: 15px;
            font-weight: bold;
            color: #2e7d32;
        }
        
        .controls input, .controls select {
            margin: 5px;
            padding: 5px 10px;
            border: 1px solid #81c784;
            border-radius: 4px;
        }
        
        button {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 5px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(116, 185, 255, 0.4);
        }
        
        .exercise {
            background: #fff8e1;
            border: 1px solid #ffcc02;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .exercise h4 {
            color: #f57f17;
            margin-top: 0;
        }
        
        .answer-input {
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 4px;
            margin: 10px;
            width: 200px;
        }
        
        .feedback {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }
        
        .correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .key-points {
            background: #e1f5fe;
            border-left: 4px solid #0277bd;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .key-points h4 {
            color: #01579b;
            margin-top: 0;
        }
        
        .spectrum-display {
            background: #f3e5f5;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #9c27b0;
        }
        
        .fourier-demo {
            background: #fce4ec;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #e91e63;
        }
        
        .gibbs-demo {
            background: #fff3e0;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #ff9800;
        }
        
        .orthogonal-demo {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #4caf50;
        }
        
        .coefficient-display {
            font-family: monospace;
            background: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border: 1px solid #ddd;
        }
        
        ul li {
            margin: 8px 0;
        }
        
        .dual-canvas {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .math-expression {
            font-size: 0.9em;
            color: #666;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒŠ å‘¨æœŸä¿¡å·çš„é¢‘è°±åˆ†æ</h1>
        
        <div class="section">
            <h2>1. æ­£äº¤å‡½æ•°ä¸æ­£äº¤å‡½æ•°é›†</h2>
            
            <h3>1.1 æ­£äº¤å‡½æ•°çš„å®šä¹‰</h3>
            <div class="formula">
                ä¸¤ä¸ªå‡½æ•°fâ‚(t)å’Œfâ‚‚(t)åœ¨åŒºé—´[tâ‚, tâ‚‚]ä¸Šæ­£äº¤ï¼š<br>
                âˆ«_{tâ‚}^{tâ‚‚} fâ‚(t)fâ‚‚(t)dt = 0
            </div>
            
            <h3>1.2 ä¸‰è§’å‡½æ•°çš„æ­£äº¤æ€§</h3>
            <div class="formula">
                âˆ«_{-T/2}^{T/2} cos(nÎ©t)cos(mÎ©t)dt = {T/2, n=mâ‰ 0; 0, nâ‰ m}<br>
                âˆ«_{-T/2}^{Tâ‚‚} sin(nÎ©t)sin(mÎ©t)dt = {T/2, n=mâ‰ 0; 0, nâ‰ m}<br>
                âˆ«_{-T/2}^{T/2} sin(nÎ©t)cos(mÎ©t)dt = 0
            </div>
            
            <div class="orthogonal-demo">
                <h4>æ­£äº¤æ€§å¯è§†åŒ–æ¼”ç¤º</h4>
                <div class="controls">
                    <label>n:</label>
                    <input type="range" id="orthN" min="1" max="5" step="1" value="1">
                    <span id="orthNValue">1</span>
                    <label>m:</label>
                    <input type="range" id="orthM" min="1" max="5" step="1" value="2">
                    <span id="orthMValue">2</span>
                    <button onclick="updateOrthogonality()">æ›´æ–°æ¼”ç¤º</button>
                </div>
                <div class="dual-canvas">
                    <canvas id="orthogonalCanvas" class="signal-canvas" width="700" height="400"></canvas>
                </div>
                <div id="orthogonalResult" class="coefficient-display">ç§¯åˆ†ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º</div>
            </div>
            
            <div class="key-points">
                <h4>æ­£äº¤å‡½æ•°çš„é‡è¦æ€§è´¨ï¼š</h4>
                <ul>
                    <li>æ­£äº¤å‡½æ•°é›†å¯ä»¥ç”¨æ¥è¡¨ç¤ºä»»æ„ä¿¡å·ï¼ˆç±»ä¼¼å‘é‡çš„åŸºï¼‰</li>
                    <li>ä¸‰è§’å‡½æ•°é›†{1, cos(Î©t), sin(Î©t), cos(2Î©t), sin(2Î©t), ...}æ˜¯å®Œå¤‡æ­£äº¤é›†</li>
                    <li>æ­£äº¤æ€§ä½¿å¾—å‚…é‡Œå¶ç³»æ•°çš„è®¡ç®—å˜å¾—ç®€å•</li>
                </ul>
            </div>
            
            <div class="exercise">
                <h4>ğŸ”§ ç»ƒä¹ é¢˜1ï¼š</h4>
                <p>å‡½æ•°cos(3t)å’Œsin(2t)åœ¨åŒºé—´[-Ï€, Ï€]ä¸Šæ˜¯å¦æ­£äº¤ï¼Ÿ</p>
                <select id="answer1" class="answer-input">
                    <option value="">é€‰æ‹©ç­”æ¡ˆ</option>
                    <option value="yes">æ­£äº¤</option>
                    <option value="no">ä¸æ­£äº¤</option>
                </select>
                <button onclick="checkAnswer1()">æäº¤ç­”æ¡ˆ</button>
                <div id="feedback1" class="feedback" style="display:none;"></div>
            </div>
        </div>
        
        <div class="section">
            <h2>2. å‚…é‡Œå¶çº§æ•°</h2>
            
            <h3>2.1 ä¸‰è§’å½¢å¼çš„å‚…é‡Œå¶çº§æ•°</h3>
            <div class="formula">
                x(t) = aâ‚€ + Î£[aâ‚™cos(nÎ©t) + bâ‚™sin(nÎ©t)]<br><br>
                å…¶ä¸­ï¼šÎ© = 2Ï€/Tï¼ŒTä¸ºå‘¨æœŸ<br>
                aâ‚€ = (1/T)âˆ«_{-T/2}^{T/2} x(t)dt<br>
                aâ‚™ = (2/T)âˆ«_{-T/2}^{T/2} x(t)cos(nÎ©t)dt<br>
                bâ‚™ = (2/T)âˆ«_{-T/2}^{T/2} x(t)sin(nÎ©t)dt
            </div>
            
            <h3>2.2 æŒ‡æ•°å½¢å¼çš„å‚…é‡Œå¶çº§æ•°</h3>
            <div class="formula">
                x(t) = Î£ Câ‚™e^{jnÎ©t}<br><br>
                Câ‚™ = (1/T)âˆ«_{-T/2}^{T/2} x(t)e^{-jnÎ©t}dt<br><br>
                ä¸ä¸‰è§’å½¢å¼çš„å…³ç³»ï¼š<br>
                Câ‚€ = aâ‚€, Câ‚™ = (aâ‚™ - jbâ‚™)/2, Câ‚‹â‚™ = (aâ‚™ + jbâ‚™)/2
            </div>
            
            <div class="fourier-demo">
                <h4>å‚…é‡Œå¶çº§æ•°åˆæˆæ¼”ç¤º</h4>
                <div class="controls">
                    <label>é€‰æ‹©ç›®æ ‡ä¿¡å·:</label>
                    <select id="targetSignal" onchange="updateFourierSeries()">
                        <option value="square">æ–¹æ³¢</option>
                        <option value="sawtooth">é”¯é½¿æ³¢</option>
                        <option value="triangle">ä¸‰è§’æ³¢</option>
                    </select>
                    <label>è°æ³¢æ•°N:</label>
                    <input type="range" id="harmonicN" min="1" max="20" step="1" value="5">
                    <span id="harmonicNValue">5</span>
                    <button onclick="updateFourierSeries()">æ›´æ–°åˆæˆ</button>
                    <button onclick="animateFourierSeries()">åŠ¨ç”»æ¼”ç¤º</button>
                </div>
                <div class="canvas-container">
                    <canvas id="fourierTimeCanvas" class="signal-canvas" width="600" height="300"></canvas>
                    <canvas id="fourierSpectrumCanvas" class="signal-canvas" width="600" height="300"></canvas>
                </div>
                <div id="fourierCoefficients" class="coefficient-display">å‚…é‡Œå¶ç³»æ•°å°†åœ¨è¿™é‡Œæ˜¾ç¤º</div>
            </div>
            
            <div class="exercise">
                <h4>ğŸ”§ ç»ƒä¹ é¢˜2ï¼š</h4>
                <p>å‘¨æœŸä¸º2Ï€çš„æ–¹æ³¢ä¿¡å·f(t) = {1, 0â‰¤tâ‰¤Ï€; -1, Ï€â‰¤tâ‰¤2Ï€}ï¼Œå…¶å‚…é‡Œå¶çº§æ•°ä¸­aâ‚€çš„å€¼æ˜¯ï¼š</p>
                <input type="number" id="answer2" class="answer-input" placeholder="è¾“å…¥ç­”æ¡ˆ" step="0.1">
                <button onclick="checkAnswer2()">æäº¤ç­”æ¡ˆ</button>
                <div id="feedback2" class="feedback" style="display:none;"></div>
            </div>
        </div>
        
        <div class="section">
            <h2>3. å…¸å‹å‘¨æœŸå‡½æ•°çš„å‚…é‡Œå¶çº§æ•°</h2>
            
            <h3>3.1 æ–¹æ³¢ä¿¡å·</h3>
            <div class="formula">
                æ–¹æ³¢ x(t) = {A, 0â‰¤tâ‰¤T/2; -A, T/2â‰¤tâ‰¤T}<br>
                x(t) = (4A/Ï€)Î£[sin((2n-1)Î©t)/(2n-1)]ï¼Œn=1,2,3,...
            </div>
            
            <h3>3.2 é”¯é½¿æ³¢ä¿¡å·</h3>
            <div class="formula">
                é”¯é½¿æ³¢ x(t) = (2A/T)t - A, 0â‰¤tâ‰¤T<br>
                x(t) = -(2A/Ï€)Î£[sin(nÎ©t)/n]ï¼Œn=1,2,3,...
            </div>
            
            <h3>3.3 ä¸‰è§’æ³¢ä¿¡å·</h3>
            <div class="formula">
                ä¸‰è§’æ³¢çš„å‚…é‡Œå¶çº§æ•°ï¼š<br>
                x(t) = (8A/Ï€Â²)Î£[sin((2n-1)Î©t)/(2n-1)Â²]ï¼Œn=1,2,3,...
            </div>
            
            <div class="spectrum-display">
                <h4>å…¸å‹ä¿¡å·çš„é¢‘è°±ç‰¹æ€§å¯¹æ¯”</h4>
                <div class="controls">
                    <label>ä¿¡å·ç±»å‹:</label>
                    <select id="spectrumSignal" onchange="updateSpectralComparison()">
                        <option value="square">æ–¹æ³¢</option>
                        <option value="sawtooth">é”¯é½¿æ³¢</option>
                        <option value="triangle">ä¸‰è§’æ³¢</option>
                        <option value="all">å…¨éƒ¨å¯¹æ¯”</option>
                    </select>
                    <label>æ˜¾ç¤º:</label>
                    <select id="spectrumType" onchange="updateSpectralComparison()">
                        <option value="amplitude">å¹…åº¦è°±</option>
                        <option value="phase">ç›¸ä½è°±</option>
                        <option value="both">å¹…åº¦+ç›¸ä½</option>
                    </select>
                </div>
                <div class="canvas-container">
                    <canvas id="spectrumCompareCanvas" class="signal-canvas" width="800" height="400"></canvas>
                </div>
            </div>
            
            <div class="key-points">
                <h4>é¢‘è°±ç‰¹æ€§æ€»ç»“ï¼š</h4>
                <ul>
                    <li><strong>æ–¹æ³¢</strong>ï¼šåªå«å¥‡æ¬¡è°æ³¢ï¼Œå¹…åº¦æŒ‰1/nè¡°å‡</li>
                    <li><strong>é”¯é½¿æ³¢</strong>ï¼šå«æ‰€æœ‰è°æ³¢ï¼Œå¹…åº¦æŒ‰1/nè¡°å‡</li>
                    <li><strong>ä¸‰è§’æ³¢</strong>ï¼šåªå«å¥‡æ¬¡è°æ³¢ï¼Œå¹…åº¦æŒ‰1/nÂ²è¡°å‡ï¼ˆæ”¶æ•›æ›´å¿«ï¼‰</li>
                    <li>ä¿¡å·è¶Š"å°–é”"ï¼Œé«˜é¢‘åˆ†é‡è¶Šä¸°å¯Œ</li>
                </ul>
            </div>
            
            <div class="exercise">
                <h4>ğŸ”§ ç»ƒä¹ é¢˜3ï¼š</h4>
                <p>å“ªç§ä¿¡å·çš„é«˜é¢‘åˆ†é‡è¡°å‡æœ€å¿«ï¼Ÿ</p>
                <select id="answer3" class="answer-input">
                    <option value="">é€‰æ‹©ç­”æ¡ˆ</option>
                    <option value="square">æ–¹æ³¢</option>
                    <option value="sawtooth">é”¯é½¿æ³¢</option>
                    <option value="triangle">ä¸‰è§’æ³¢</option>
                </select>
                <button onclick="checkAnswer3()">æäº¤ç­”æ¡ˆ</button>
                <div id="feedback3" class="feedback" style="display:none;"></div>
            </div>
        </div>
        
        <div class="section">
            <h2>4. å‰å¸ƒæ–¯ç°è±¡</h2>
            
            <h3>4.1 å‰å¸ƒæ–¯ç°è±¡çš„äº§ç”Ÿ</h3>
            <div class="key-points">
                <h4>ç°è±¡æè¿°ï¼š</h4>
                <ul>
                    <li>ç”¨æœ‰é™é¡¹å‚…é‡Œå¶çº§æ•°è¿‘ä¼¼ä¸è¿ç»­ä¿¡å·æ—¶ï¼Œåœ¨è·³è·ƒç‚¹é™„è¿‘å‡ºç°è¿‡å†²å’ŒæŒ¯è¡</li>
                    <li>éšç€è°æ³¢æ•°å¢åŠ ï¼ŒæŒ¯è¡é¢‘ç‡å¢åŠ ä½†è¿‡å†²å¹…åº¦ä¸å‡å°‘</li>
                    <li>è¿‡å†²çº¦ä¸ºè·³è·ƒå¹…åº¦çš„9%ï¼ˆå‡†ç¡®å€¼ä¸º(Ï€-2)/Ï€ Ã— 100% â‰ˆ 8.95%ï¼‰</li>
                </ul>
            </div>
            
            <div class="gibbs-demo">
                <h4>å‰å¸ƒæ–¯ç°è±¡æ¼”ç¤º</h4>
                <div class="controls">
                    <label>è°æ³¢æ•°:</label>
                    <input type="range" id="gibbsN" min="1" max="50" step="1" value="10">
                    <span id="gibbsNValue">10</span>
                    <label>ä¿¡å·ç±»å‹:</label>
                    <select id="gibbsSignal">
                        <option value="square">æ–¹æ³¢</option>
                        <option value="step">é˜¶è·ƒ</option>
                    </select>
                    <button onclick="updateGibbsDemo()">æ›´æ–°æ¼”ç¤º</button>
                    <button onclick="animateGibbs()">åŠ¨ç”»æ¼”ç¤º</button>
                </div>
                <canvas id="gibbsCanvas" class="signal-canvas" width="800" height="400"></canvas>
                <div id="gibbsAnalysis" class="coefficient-display">è¿‡å†²åˆ†æå°†åœ¨è¿™é‡Œæ˜¾ç¤º</div>
            </div>
            
            <h3>4.2 å‰å¸ƒæ–¯ç°è±¡çš„æ•°å­¦è§£é‡Š</h3>
            <div class="formula">
                æ–¹æ³¢çš„éƒ¨åˆ†å’Œï¼šS_N(t) = (4/Ï€)Î£[sin((2n-1)t)/(2n-1)]<br><br>
                åœ¨t=0å¤„çš„è¿‡å†²ï¼šlim_{tâ†’0âº} S_N(t) = (2/Ï€)âˆ«â‚€^Ï€ (sin(x)/x)dx â‰ˆ 1.179
            </div>
            
            <div class="key-points">
                <h4>é‡è¦ç»“è®ºï¼š</h4>
                <ul>
                    <li>å‰å¸ƒæ–¯ç°è±¡æ˜¯å‚…é‡Œå¶çº§æ•°çš„å›ºæœ‰ç‰¹æ€§ï¼Œä¸èƒ½é€šè¿‡å¢åŠ é¡¹æ•°æ¶ˆé™¤</li>
                    <li>åªèƒ½é€šè¿‡çª—å‡½æ•°ç­‰æŠ€æœ¯å‡è½»ï¼Œä½†ä¼šå½±å“é€¼è¿‘ç²¾åº¦</li>
                    <li>åœ¨ä¿¡å·å¤„ç†ä¸­éœ€è¦æƒè¡¡ç²¾åº¦å’ŒæŒ¯è¡ä¹‹é—´çš„å…³ç³»</li>
                </ul>
            </div>
            
            <div class="exercise">
                <h4>ğŸ”§ ç»ƒä¹ é¢˜4ï¼š</h4>
                <p>å‰å¸ƒæ–¯ç°è±¡ä¸­ï¼Œè¿‡å†²çº¦å è·³è·ƒå¹…åº¦çš„ç™¾åˆ†æ¯”æ˜¯ï¼š</p>
                <input type="number" id="answer4" class="answer-input" placeholder="è¾“å…¥ç™¾åˆ†æ¯”" step="0.1">
                <span class="math-expression">%</span>
                <button onclick="checkAnswer4()">æäº¤ç­”æ¡ˆ</button>
                <div id="feedback4" class="feedback" style="display:none;"></div>
            </div>
        </div>
        
        <div class="section">
            <h2>5. é¢‘è°±çš„ç‰©ç†æ„ä¹‰</h2>
            
            <div class="spectrum-display">
                <h4>äº’åŠ¨é¢‘è°±åˆ†æå™¨</h4>
                <div class="controls">
                    <label>åŸºé¢‘fâ‚€:</label>
                    <input type="range" id="fundamentalFreq" min="0.5" max="3" step="0.1" value="1">
                    <span id="fundamentalFreqValue">1</span> Hz
                    <label>å ç©ºæ¯”:</label>
                    <input type="range" id="dutyCycle" min="0.1" max="0.9" step="0.1" value="0.5">
                    <span id="dutyCycleValue">0.5</span>
                    <button onclick="updateInteractiveSpectrum()">æ›´æ–°åˆ†æ</button>
                </div>
                <div class="canvas-container">
                    <canvas id="interactiveTimeCanvas" class="signal-canvas" width="600" height="250"></canvas>
                    <canvas id="interactiveSpectrumCanvas" class="signal-canvas" width="600" height="250"></canvas>
                </div>
                <div id="spectrumAnalysis" class="coefficient-display">é¢‘è°±åˆ†æç»“æœ</div>
            </div>
            
            <div class="key-points">
                <h4>é¢‘è°±åˆ†æçš„æ„ä¹‰ï¼š</h4>
                <ul>
                    <li><strong>é¢‘åŸŸè§‚ç‚¹</strong>ï¼šå°†ä¿¡å·åˆ†è§£ä¸ºä¸åŒé¢‘ç‡çš„æ­£å¼¦æ³¢åˆ†é‡</li>
                    <li><strong>å¸¦å®½æ¦‚å¿µ</strong>ï¼šä¿¡å·çš„ä¸»è¦èƒ½é‡é›†ä¸­åœ¨å“ªäº›é¢‘ç‡èŒƒå›´</li>
                    <li><strong>æ»¤æ³¢è®¾è®¡</strong>ï¼šæ ¹æ®é¢‘è°±ç‰¹æ€§è®¾è®¡åˆé€‚çš„æ»¤æ³¢å™¨</li>
                    <li><strong>ç³»ç»Ÿåˆ†æ</strong>ï¼šé€šè¿‡é¢‘ç‡å“åº”åˆ†æç³»ç»Ÿç‰¹æ€§</li>
                </ul>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ“ æœ¬ç« å°ç»“</h2>
            <div class="key-points">
                <h4>æ ¸å¿ƒè¦ç‚¹ï¼š</h4>
                <ul>
                    <li><strong>æ­£äº¤å‡½æ•°</strong>ï¼šæ˜¯å‚…é‡Œå¶çº§æ•°çš„æ•°å­¦åŸºç¡€ï¼Œä¸‰è§’å‡½æ•°é›†å…·æœ‰æ­£äº¤æ€§</li>
                    <li><strong>å‚…é‡Œå¶çº§æ•°</strong>ï¼šå°†å‘¨æœŸä¿¡å·è¡¨ç¤ºä¸ºè°æ³¢åˆ†é‡çš„å åŠ ï¼Œæœ‰ä¸‰è§’å’ŒæŒ‡æ•°ä¸¤ç§å½¢å¼</li>
                    <li><strong>å…¸å‹ä¿¡å·</strong>ï¼šæ–¹æ³¢ã€é”¯é½¿æ³¢ã€ä¸‰è§’æ³¢çš„é¢‘è°±ç‰¹æ€§å„æœ‰ç‰¹ç‚¹</li>
                    <li><strong>å‰å¸ƒæ–¯ç°è±¡</strong>ï¼šæœ‰é™é¡¹é€¼è¿‘ä¸è¿ç»­ä¿¡å·æ—¶çš„å›ºæœ‰ç°è±¡ï¼Œéœ€è¦äº†è§£å…¶æˆå› å’Œå½±å“</li>
                    <li><strong>é¢‘è°±æ„ä¹‰</strong>ï¼šä»é¢‘åŸŸè§’åº¦ç†è§£ä¿¡å·çš„ç»„æˆå’Œç‰¹æ€§</li>
                </ul>
            </div>
            
            <div class="exercise">
                <h4>ğŸ¯ ç»¼åˆç»ƒä¹ ï¼š</h4>
                <p>ä¸€ä¸ªå‘¨æœŸæ–¹æ³¢ä¿¡å·ï¼Œå¦‚æœè¦ä½¿å…¶å‚…é‡Œå¶çº§æ•°è¿‘ä¼¼çš„è¯¯å·®å°äº5%ï¼Œè‡³å°‘éœ€è¦ä¿ç•™å‰å‡ é¡¹ï¼Ÿ</p>
                <input type="number" id="answer5" class="answer-input" placeholder="è¾“å…¥é¡¹æ•°">
                <button onclick="checkAnswer5()">æäº¤ç­”æ¡ˆ</button>
                <div id="feedback5" class="feedback" style="display:none;"></div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let animationId;
        const colors = {
            primary: '#74b9ff',
            secondary: '#0984e3',
            accent: '#6c5ce7',
            success: '#00b894',
            warning: '#fdcb6e',
            danger: '#e17055'
        };
        
        // ç»˜å›¾å·¥å…·å‡½æ•°
        function drawAxis(ctx, width, height, xLabel = 't', yLabel = 'x(t)', showGrid = true) {
            ctx.clearRect(0, 0, width, height);
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            const centerX = width / 2;
            const centerY = height / 2;
            const margin = 40;
            
            if (showGrid) {
                ctx.strokeStyle = '#f0f0f0';
                ctx.lineWidth = 0.5;
                for (let i = margin; i < width - margin; i += 20) {
                    ctx.beginPath();
                    ctx.moveTo(i, margin);
                    ctx.lineTo(i, height - margin);
                    ctx.stroke();
                }
                for (let i = margin; i < height - margin; i += 20) {
                    ctx.beginPath();
                    ctx.moveTo(margin, i);
                    ctx.lineTo(width - margin, i);
                    ctx.stroke();
                }
            }
            
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            
            // Xè½´
            ctx.beginPath();
            ctx.moveTo(margin, centerY);
            ctx.lineTo(width - margin, centerY);
            ctx.stroke();
            
            // Yè½´
            ctx.beginPath();
            ctx.moveTo(centerX, margin);
            ctx.lineTo(centerX, height - margin);
            ctx.stroke();
            
            // ç®­å¤´
            ctx.fillStyle = '#333';
            ctx.beginPath();
            ctx.moveTo(width - margin, centerY);
            ctx.lineTo(width - margin - 8, centerY - 4);
            ctx.lineTo(width - margin - 8, centerY + 4);
            ctx.fill();
            
            ctx.beginPath();
            ctx.moveTo(centerX, margin);
            ctx.lineTo(centerX - 4, margin + 8);
            ctx.lineTo(centerX + 4, margin + 8);
            ctx.fill();
            
            // æ ‡ç­¾
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.fillText(xLabel, width - margin + 10, centerY + 5);
            ctx.fillText(yLabel, centerX + 10, margin - 5);
            ctx.fillText('0', centerX + 5, centerY + 15);
        }
        
        function drawFrequencyAxis(ctx, width, height) {
            ctx.clearRect(0, 0, width, height);
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            const margin = 40;
            const centerY = height - margin;
            
            // Xè½´ï¼ˆé¢‘ç‡è½´ï¼‰
            ctx.beginPath();
            ctx.moveTo(margin, centerY);
            ctx.lineTo(width - margin, centerY);
            ctx.stroke();
            
            // Yè½´ï¼ˆå¹…åº¦è½´ï¼‰
            ctx.beginPath();
            ctx.moveTo(margin, margin);
            ctx.lineTo(margin, centerY);
            ctx.stroke();
            
            // æ ‡ç­¾
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.fillText('f (Hz)', width - margin + 10, centerY + 5);
            ctx.fillText('|X(f)|', margin - 30, margin - 5);
            ctx.fillText('0', margin - 10, centerY + 15);
        }
        
        // æ­£äº¤æ€§æ¼”ç¤º
        function updateOrthogonality() {
            const n = parseInt(document.getElementById('orthN').value);
            const m = parseInt(document.getElementById('orthM').value);
            document.getElementById('orthNValue').textContent = n;
            document.getElementById('orthMValue').textContent = m;
            
            const canvas = document.getElementById('orthogonalCanvas');
            const ctx = canvas.getContext('2d');
            
            // æ¸…ç©ºå¹¶åˆ†æˆä¸‰ä¸ªå­å›¾
            ctx.clearRect(0, 0, 700, 400);
            
            // ç»˜åˆ¶ä¸‰ä¸ªå‡½æ•°
            const T = 4; // å‘¨æœŸ
            const omega = 2 * Math.PI / T;
            
            // å­å›¾1: cos(nÎ©t)
            drawSubplotAxis(ctx, 0, 0, 700, 120, `cos(${n}Î©t)`);
            drawCosine(ctx, 0, 0, 700, 120, n, omega, colors.primary);
            
            // å­å›¾2: cos(mÎ©t)
            drawSubplotAxis(ctx, 0, 140, 700, 120, `cos(${m}Î©t)`);
            drawCosine(ctx, 0, 140, 700, 120, m, omega, colors.secondary);
            
            // å­å›¾3: ä¹˜ç§¯
            drawSubplotAxis(ctx, 0, 280, 700, 120, `cos(${n}Î©t)Â·cos(${m}Î©t)`);
            drawProduct(ctx, 0, 280, 700, 120, n, m, omega);
            
            // è®¡ç®—ç§¯åˆ†
            const integral = calculateOrthogonalityIntegral(n, m, T);
            document.getElementById('orthogonalResult').innerHTML = `
                âˆ«â‚â‚‹T/â‚‚â‚^â‚T/â‚‚â‚ cos(${n}Î©t)cos(${m}Î©t)dt = ${integral.toFixed(3)}<br>
                ç»“è®º: ${Math.abs(integral) < 0.001 ? 'æ­£äº¤' : 'ä¸æ­£äº¤'}
            `;
        }
        
        function drawSubplotAxis(ctx, x, y, width, height, title) {
            const centerY = y + height / 2;
            const centerX = x + width / 2;
            const margin = 30;
            
            ctx.strokeStyle = '#ddd';
            ctx.lineWidth = 1;
            
            // Xè½´
            ctx.beginPath();
            ctx.moveTo(x + margin, centerY);
            ctx.lineTo(x + width - margin, centerY);
            ctx.stroke();
            
            // æ ‡é¢˜
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.fillText(title, x + margin, y + 15);
        }
        
        function drawCosine(ctx, x, y, width, height, n, omega, color) {
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            
            const centerY = y + height / 2;
            const margin = 30;
            const scaleX = (width - 2 * margin) / 4; // æ˜¾ç¤º2ä¸ªå‘¨æœŸ
            const scaleY = (height - 20) / 4;
            
            ctx.beginPath();
            for (let t = -2; t <= 2; t += 0.02) {
                const plotX = x + margin + (t + 2) * scaleX / 4 * (width - 2 * margin);
                const plotY = centerY - Math.cos(n * omega * t) * scaleY;
                
                if (t === -2) {
                    ctx.moveTo(plotX, plotY);
                } else {
                    ctx.lineTo(plotX, plotY);
                }
            }
            ctx.stroke();
        }
        
        function drawProduct(ctx, x, y, width, height, n, m, omega) {
            ctx.strokeStyle = colors.accent;
            ctx.lineWidth = 2;
            
            const centerY = y + height / 2;
            const margin = 30;
            const scaleX = (width - 2 * margin) / 4;
            const scaleY = (height - 20) / 4;
            
            ctx.beginPath();
            for (let t = -2; t <= 2; t += 0.02) {
                const plotX = x + margin + (t + 2) * scaleX / 4 * (width - 2 * margin);
                const product = Math.cos(n * omega * t) * Math.cos(m * omega * t);
                const plotY = centerY - product * scaleY;
                
                if (t === -2) {
                    ctx.moveTo(plotX, plotY);
                } else {
                    ctx.lineTo(plotX, plotY);
                }
            }
            ctx.stroke();
        }
        
        function calculateOrthogonalityIntegral(n, m, T) {
            if (n === m) {
                return T / 2;
            } else {
                return 0; // ç†è®ºå€¼
            }
        }
        
        // å‚…é‡Œå¶çº§æ•°æ¼”ç¤º
        function updateFourierSeries() {
            const signal = document.getElementById('targetSignal').value;
            const N = parseInt(document.getElementById('harmonicN').value);
            document.getElementById('harmonicNValue').textContent = N;
            
            const timeCanvas = document.getElementById('fourierTimeCanvas');
            const spectrumCanvas = document.getElementById('fourierSpectrumCanvas');
            const timeCtx = timeCanvas.getContext('2d');
            const specCtx = spectrumCanvas.getContext('2d');
            
            // ç»˜åˆ¶æ—¶åŸŸå›¾
            drawAxis(timeCtx, 600, 300, 't', 'x(t)');
            drawFourierTimeDomain(timeCtx, signal, N);
            
            // ç»˜åˆ¶é¢‘è°±å›¾
            drawFrequencyAxis(specCtx, 600, 300);
            drawFourierSpectrum(specCtx, signal, N);
            
            // æ˜¾ç¤ºç³»æ•°
            displayFourierCoefficients(signal, N);
        }
        
        function drawFourierTimeDomain(ctx, signalType, N) {
            const centerX = 300;
            const centerY = 150;
            const scaleX = 50;
            const scaleY = 60;
            const T = 4; // å‘¨æœŸ
            const omega = 2 * Math.PI / T;
            
            // ç»˜åˆ¶åŸä¿¡å·ï¼ˆè™šçº¿ï¼‰
            ctx.strokeStyle = '#ccc';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            drawOriginalSignal(ctx, signalType, centerX, centerY, scaleX, scaleY, T);
            ctx.setLineDash([]);
            
            // ç»˜åˆ¶å‚…é‡Œå¶çº§æ•°è¿‘ä¼¼ï¼ˆå®çº¿ï¼‰
            ctx.strokeStyle = colors.primary;
            ctx.lineWidth = 3;
            drawFourierApproximation(ctx, signalType, N, centerX, centerY, scaleX, scaleY, omega);
        }
        
        function drawOriginalSignal(ctx, signalType, centerX, centerY, scaleX, scaleY, T) {
            ctx.beginPath();
            
            for (let t = -T; t <= T; t += 0.02) {
                let y = 0;
                const tMod = ((t % T) + T) % T; // ç¡®ä¿æ­£å€¼
                
                switch(signalType) {
                    case 'square':
                        y = (tMod < T/2) ? 1 : -1;
                        break;
                    case 'sawtooth':
                        y = (2 * tMod / T) - 1;
                        break;
                    case 'triangle':
                        y = (tMod < T/2) ? (4 * tMod / T) - 1 : 3 - (4 * tMod / T);
                        break;
                }
                
                const x = centerX + t * scaleX;
                const plotY = centerY - y * scaleY;
                
                if (t === -T) {
                    ctx.moveTo(x, plotY);
                } else {
                    ctx.lineTo(x, plotY);
                }
            }
            ctx.stroke();
        }
        
        function drawFourierApproximation(ctx, signalType, N, centerX, centerY, scaleX, scaleY, omega) {
            ctx.beginPath();
            
            for (let t = -2; t <= 2; t += 0.01) {
                let y = 0;
                
                // è®¡ç®—å‚…é‡Œå¶çº§æ•°
                switch(signalType) {
                    case 'square':
                        for (let n = 1; n <= N; n += 2) { // åªæœ‰å¥‡æ¬¡è°æ³¢
                            y += (4 / Math.PI) * Math.sin(n * omega * t) / n;
                        }
                        break;
                    case 'sawtooth':
                        for (let n = 1; n <= N; n++) {
                            y -= (2 / Math.PI) * Math.sin(n * omega * t) / n;
                        }
                        break;
                    case 'triangle':
                        for (let n = 1; n <= N; n += 2) { // åªæœ‰å¥‡æ¬¡è°æ³¢
                            y += (8 / (Math.PI * Math.PI)) * Math.sin(n * omega * t) / (n * n);
                        }
                        break;
                }
                
                const x = centerX + t * scaleX;
                const plotY = centerY - y * scaleY;
                
                if (t === -2) {
                    ctx.moveTo(x, plotY);
                } else {
                    ctx.lineTo(x, plotY);
                }
            }
            ctx.stroke();
        }
        
        function drawFourierSpectrum(ctx, signalType, N) {
            const margin = 40;
            const width = 600;
            const height = 300;
            const centerY = height - margin;
            const maxFreq = N;
            const freqScale = (width - 2 * margin) / (2 * maxFreq);
            const ampScale = (height - 2 * margin) / 2;
            
            // ç»˜åˆ¶é¢‘è°±çº¿
            ctx.strokeStyle = colors.secondary;
            ctx.lineWidth = 3;
            
            for (let n = 1; n <= N; n++) {
                let amplitude = 0;
                
                switch(signalType) {
                    case 'square':
                        if (n % 2 === 1) { // å¥‡æ¬¡è°æ³¢
                            amplitude = 4 / (Math.PI * n);
                        }
                        break;
                    case 'sawtooth':
                        amplitude = 2 / (Math.PI * n);
                        break;
                    case 'triangle':
                        if (n % 2 === 1) { // å¥‡æ¬¡è°æ³¢
                            amplitude = 8 / (Math.PI * Math.PI * n * n);
                        }
                        break;
                }
                
                if (amplitude > 0) {
                    const x = margin + n * freqScale;
                    const lineHeight = amplitude * ampScale * 50; // æ”¾å¤§æ˜¾ç¤º
                    
                    ctx.beginPath();
                    ctx.moveTo(x, centerY);
                    ctx.lineTo(x, centerY - lineHeight);
                    ctx.stroke();
                    
                    // ç»˜åˆ¶é¢‘ç‡æ ‡ç­¾
                    ctx.fillStyle = '#333';
                    ctx.font = '10px Arial';
                    ctx.fillText(n.toString(), x - 5, centerY + 15);
                }
            }
        }
        
        function displayFourierCoefficients(signalType, N) {
            let html = `<strong>${signalType}ä¿¡å·çš„å‚…é‡Œå¶ç³»æ•°ï¼ˆå‰${N}é¡¹ï¼‰:</strong><br>`;
            
            for (let n = 1; n <= Math.min(N, 5); n++) { // åªæ˜¾ç¤ºå‰5é¡¹
                let an = 0, bn = 0;
                
                switch(signalType) {
                    case 'square':
                        if (n % 2 === 1) {
                            bn = 4 / (Math.PI * n);
                        }
                        break;
                    case 'sawtooth':
                        bn = -2 / (Math.PI * n);
                        break;
                    case 'triangle':
                        if (n % 2 === 1) {
                            bn = 8 / (Math.PI * Math.PI * n * n);
                        }
                        break;
                }
                
                if (an !== 0 || bn !== 0) {
                    html += `n=${n}: a${n}=${an.toFixed(4)}, b${n}=${bn.toFixed(4)}<br>`;
                }
            }
            
            document.getElementById('fourierCoefficients').innerHTML = html;
        }
        
        // é¢‘è°±å¯¹æ¯”
        function updateSpectralComparison() {
            const signal = document.getElementById('spectrumSignal').value;
            const type = document.getElementById('spectrumType').value;
            
            const canvas = document.getElementById('spectrumCompareCanvas');
            const ctx = canvas.getContext('2d');
            
            if (signal === 'all') {
                drawAllSpectra(ctx, type);
            } else {
                drawSingleSpectrum(ctx, signal, type);
            }
        }
        
        function drawAllSpectra(ctx, type) {
            ctx.clearRect(0, 0, 800, 400);
            drawFrequencyAxis(ctx, 800, 400);
            
            const signals = ['square', 'sawtooth', 'triangle'];
            const colors = ['#e74c3c', '#27ae60', '#3498db'];
            const N = 10;
            
            // ç»˜åˆ¶å›¾ä¾‹
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.fillText('çº¢: æ–¹æ³¢  ç»¿: é”¯é½¿æ³¢  è“: ä¸‰è§’æ³¢', 60, 30);
            
            signals.forEach((signal, index) => {
                drawSpectrumBars(ctx, signal, N, colors[index], type);
            });
        }
        
        function drawSingleSpectrum(ctx, signal, type) {
            ctx.clearRect(0, 0, 800, 400);
            drawFrequencyAxis(ctx, 800, 400);
            
            const N = 15;
            drawSpectrumBars(ctx, signal, N, colors.primary, type);
        }
        
        function drawSpectrumBars(ctx, signalType, N, color, displayType) {
            const margin = 40;
            const width = 800;
            const height = 400;
            const centerY = height - margin;
            const freqScale = (width - 2 * margin) / N;
            const ampScale = (height - 2 * margin) / 2;
            
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            
            for (let n = 1; n <= N; n++) {
                let amplitude = 0;
                let phase = 0;
                
                switch(signalType) {
                    case 'square':
                        if (n % 2 === 1) {
                            amplitude = 4 / (Math.PI * n);
                            phase = Math.PI / 2; // æ­£å¼¦åˆ†é‡
                        }
                        break;
                    case 'sawtooth':
                        amplitude = 2 / (Math.PI * n);
                        phase = -Math.PI / 2; // è´Ÿæ­£å¼¦åˆ†é‡
                        break;
                    case 'triangle':
                        if (n % 2 === 1) {
                            amplitude = 8 / (Math.PI * Math.PI * n * n);
                            phase = Math.PI / 2;
                        }
                        break;
                }
                
                if (amplitude > 0) {
                    const x = margin + (n - 0.5) * freqScale;
                    
                    if (displayType === 'amplitude' || displayType === 'both') {
                        const lineHeight = amplitude * ampScale * 100;
                        ctx.beginPath();
                        ctx.moveTo(x, centerY);
                        ctx.lineTo(x, centerY - lineHeight);
                        ctx.stroke();
                    }
                    
                    if (displayType === 'phase' || displayType === 'both') {
                        // ç»˜åˆ¶ç›¸ä½ï¼ˆç”¨ä¸åŒé¢œè‰²çš„ç‚¹è¡¨ç¤ºï¼‰
                        ctx.fillStyle = phase > 0 ? '#e74c3c' : '#3498db';
                        ctx.beginPath();
                        ctx.arc(x, centerY - 20, 3, 0, 2 * Math.PI);
                        ctx.fill();
                    }
                }
            }
        }
        
        // å‰å¸ƒæ–¯ç°è±¡æ¼”ç¤º
        function updateGibbsDemo() {
            const N = parseInt(document.getElementById('gibbsN').value);
            const signal = document.getElementById('gibbsSignal').value;
            document.getElementById('gibbsNValue').textContent = N;
            
            const canvas = document.getElementById('gibbsCanvas');
            const ctx = canvas.getContext('2d');
            
            drawAxis(ctx, 800, 400, 't', 'x(t)');
            drawGibbsComparison(ctx, signal, N);
            analyzeGibbsOvershoot(signal, N);
        }
        
        function drawGibbsComparison(ctx, signalType, N) {
            const centerX = 400;
            const centerY = 200;
            const scaleX = 80;
            const scaleY = 80;
            const omega = 2 * Math.PI;
            
            // ç»˜åˆ¶åŸä¿¡å·
            ctx.strokeStyle = '#ccc';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            drawIdealSignal(ctx, signalType, centerX, centerY, scaleX, scaleY);
            ctx.setLineDash([]);
            
            // ç»˜åˆ¶æœ‰é™é¡¹è¿‘ä¼¼
            ctx.strokeStyle = colors.danger;
            ctx.lineWidth = 3;
            drawGibbsApproximation(ctx, signalType, N, centerX, centerY, scaleX, scaleY, omega);
            
            // æ ‡è®°è¿‡å†²ç‚¹
            markOvershoot(ctx, signalType, N, centerX, centerY, scaleX, scaleY, omega);
        }
        
        function drawIdealSignal(ctx, signalType, centerX, centerY, scaleX, scaleY) {
            ctx.beginPath();
            
            for (let t = -2; t <= 2; t += 0.01) {
                let y = 0;
                
                switch(signalType) {
                    case 'square':
                        y = (Math.sin(t) >= 0) ? 1 : -1;
                        break;
                    case 'step':
                        y = (t >= 0) ? 1 : 0;
                        break;
                }
                
                const x = centerX + t * scaleX;
                const plotY = centerY - y * scaleY;
                
                if (t === -2) {
                    ctx.moveTo(x, plotY);
                } else {
                    ctx.lineTo(x, plotY);
                }
            }
            ctx.stroke();
        }
        
        function drawGibbsApproximation(ctx, signalType, N, centerX, centerY, scaleX, scaleY, omega) {
            ctx.beginPath();
            
            for (let t = -2; t <= 2; t += 0.005) {
                let y = 0;
                
                switch(signalType) {
                    case 'square':
                        for (let n = 1; n <= N; n += 2) {
                            y += (4 / Math.PI) * Math.sin(n * omega * t) / n;
                        }
                        break;
                    case 'step':
                        y = 0.5; // ç›´æµåˆ†é‡
                        for (let n = 1; n <= N; n += 2) {
                            y += (2 / Math.PI) * Math.sin(n * omega * t) / n;
                        }
                        break;
                }
                
                const x = centerX + t * scaleX;
                const plotY = centerY - y * scaleY;
                
                if (t === -2) {
                    ctx.moveTo(x, plotY);
                } else {
                    ctx.lineTo(x, plotY);
                }
            }
            ctx.stroke();
        }
        
        function markOvershoot(ctx, signalType, N, centerX, centerY, scaleX, scaleY, omega) {
            // æ‰¾åˆ°è¿‡å†²ç‚¹å¹¶æ ‡è®°
            let maxOvershoot = 0;
            let overshootPosition = 0;
            
            for (let t = 0; t <= 0.5; t += 0.001) {
                let y = 0;
                
                switch(signalType) {
                    case 'square':
                        for (let n = 1; n <= N; n += 2) {
                            y += (4 / Math.PI) * Math.sin(n * omega * t) / n;
                        }
                        break;
                    case 'step':
                        y = 0.5;
                        for (let n = 1; n <= N; n += 2) {
                            y += (2 / Math.PI) * Math.sin(n * omega * t) / n;
                        }
                        break;
                }
                
                if (Math.abs(y) > maxOvershoot) {
                    maxOvershoot = Math.abs(y);
                    overshootPosition = t;
                }
            }
            
            // ç»˜åˆ¶è¿‡å†²æ ‡è®°
            ctx.fillStyle = colors.danger;
            ctx.beginPath();
            ctx.arc(centerX + overshootPosition * scaleX, centerY - maxOvershoot * scaleY, 5, 0, 2 * Math.PI);
            ctx.fill();
        }
        
        function analyzeGibbsOvershoot(signalType, N) {
            const theoretical = 1.179; // ç†è®ºè¿‡å†²å€¼
            const percentage = ((theoretical - 1) / 1 * 100).toFixed(1);
            
            document.getElementById('gibbsAnalysis').innerHTML = `
                <strong>å‰å¸ƒæ–¯ç°è±¡åˆ†æ (N=${N}):</strong><br>
                ç†è®ºè¿‡å†²å¹…åº¦: ${theoretical.toFixed(3)}<br>
                è¿‡å†²ç™¾åˆ†æ¯”: ${percentage}%<br>
                ç»“è®º: æ— è®ºNå¤šå¤§ï¼Œè¿‡å†²éƒ½ä¸ä¼šæ¶ˆå¤±
            `;
        }
        
        // äº¤äº’å¼é¢‘è°±åˆ†æ
        function updateInteractiveSpectrum() {
            const f0 = parseFloat(document.getElementById('fundamentalFreq').value);
            const duty = parseFloat(document.getElementById('dutyCycle').value);
            document.getElementById('fundamentalFreqValue').textContent = f0;
            document.getElementById('dutyCycleValue').textContent = duty;
            
            const timeCanvas = document.getElementById('interactiveTimeCanvas');
            const specCanvas = document.getElementById('interactiveSpectrumCanvas');
            const timeCtx = timeCanvas.getContext('2d');
            const specCtx = specCanvas.getContext('2d');
            
            // ç»˜åˆ¶æ—¶åŸŸæ³¢å½¢
            drawAxis(timeCtx, 600, 250, 't(s)', 'x(t)');
            drawPulseWave(timeCtx, f0, duty);
            
            // ç»˜åˆ¶é¢‘è°±
            drawFrequencyAxis(specCtx, 600, 250);
            drawPulseSpectrum(specCtx, f0, duty);
            
            // åˆ†æç»“æœ
            analyzeSpectrum(f0, duty);
        }
        
        function drawPulseWave(ctx, f0, duty) {
            const centerX = 300;
            const centerY = 125;
            const scaleX = 100;
            const scaleY = 60;
            const T = 1 / f0;
            
            ctx.strokeStyle = colors.primary;
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            for (let t = -2 * T; t <= 2 * T; t += 0.001) {
                const tMod = ((t % T) + T) % T;
                const y = (tMod < duty * T) ? 1 : 0;
                
                const x = centerX + t * scaleX * f0;
                const plotY = centerY - y * scaleY;
                
                if (t === -2 * T) {
                    ctx.moveTo(x, plotY);
                } else {
                    ctx.lineTo(x, plotY);
                }
            }
            ctx.stroke();
        }
        
        function drawPulseSpectrum(ctx, f0, duty) {
            const margin = 40;
            const width = 600;
            const height = 250;
            const centerY = height - margin;
            const maxHarmonic = 20;
            const freqScale = (width - 2 * margin) / (maxHarmonic * f0);
            
            ctx.strokeStyle = colors.secondary;
            ctx.lineWidth = 2;
            
            for (let n = 1; n <= maxHarmonic; n++) {
                const freq = n * f0;
                const amplitude = Math.abs(duty * sinc(n * duty));
                
                if (amplitude > 0.01) { // åªæ˜¾ç¤ºå¹…åº¦å¤§äºé˜ˆå€¼çš„åˆ†é‡
                    const x = margin + freq * freqScale;
                    const lineHeight = amplitude * (height - 2 * margin) * 100;
                    
                    ctx.beginPath();
                    ctx.moveTo(x, centerY);
                    ctx.lineTo(x, centerY - lineHeight);
                    ctx.stroke();
                }
            }
        }
        
        function sinc(x) {
            return (x === 0) ? 1 : Math.sin(Math.PI * x) / (Math.PI * x);
        }
        
        function analyzeSpectrum(f0, duty) {
            const bandwidth = 1 / duty / f0; // ä¸»ç“£å¸¦å®½
            const nullFreq = 1 / duty; // ç¬¬ä¸€ä¸ªé›¶ç‚¹é¢‘ç‡
            
            document.getElementById('spectrumAnalysis').innerHTML = `
                <strong>é¢‘è°±åˆ†æç»“æœ:</strong><br>
                åŸºé¢‘ fâ‚€ = ${f0} Hz<br>
                å ç©ºæ¯” = ${duty}<br>
                ä¸»ç“£å¸¦å®½ â‰ˆ ${bandwidth.toFixed(1)} Ã— fâ‚€<br>
                ç¬¬ä¸€é›¶ç‚¹é¢‘ç‡ = ${nullFreq.toFixed(1)} Hz<br>
                ç»“è®º: å ç©ºæ¯”è¶Šå°ï¼Œé¢‘è°±è¶Šå®½
            `;
        }
        
        // åŠ¨ç”»å‡½æ•°
        function animateFourierSeries() {
            let n = 1;
            const maxN = 20;
            
            const animate = () => {
                document.getElementById('harmonicN').value = n;
                updateFourierSeries();
                n++;
                
                if (n <= maxN) {
                    animationId = setTimeout(animate, 300);
                }
            };
            
            animate();
        }
        
        function animateGibbs() {
            let n = 1;
            const maxN = 50;
            
            const animate = () => {
                document.getElementById('gibbsN').value = n;
                updateGibbsDemo();
                n += 2;
                
                if (n <= maxN) {
                    animationId = setTimeout(animate, 200);
                }
            };
            
            animate();
        }
        
        // ç»ƒä¹ é¢˜ç­”æ¡ˆæ£€æŸ¥
        function checkAnswer1() {
            const answer = document.getElementById('answer1').value;
            const feedback = document.getElementById('feedback1');
            
            if (answer === 'yes') {
                feedback.textContent = 'æ­£ç¡®ï¼cos(3t)å’Œsin(2t)åœ¨ä»»ä½•åŒºé—´ä¸Šéƒ½æ­£äº¤ï¼Œå› ä¸ºä¸€ä¸ªæ˜¯ä½™å¼¦ä¸€ä¸ªæ˜¯æ­£å¼¦ã€‚';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = 'é”™è¯¯ã€‚cos(3t)å’Œsin(2t)æ˜¯æ­£äº¤çš„ï¼Œå› ä¸ºä½™å¼¦å’Œæ­£å¼¦å‡½æ•°åœ¨ä»»ä½•å®Œæ•´å‘¨æœŸä¸Šçš„ç§¯åˆ†éƒ½ä¸º0ã€‚';
                feedback.className = 'feedback incorrect';
            }
            feedback.style.display = 'block';
        }
        
        function checkAnswer2() {
            const answer = parseFloat(document.getElementById('answer2').value);
            const feedback = document.getElementById('feedback2');
            
            if (Math.abs(answer - 0) < 0.01) {
                feedback.textContent = 'æ­£ç¡®ï¼æ–¹æ³¢çš„å¹³å‡å€¼ä¸º0ï¼Œæ‰€ä»¥aâ‚€ = 0ã€‚';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = 'é”™è¯¯ã€‚æ–¹æ³¢åœ¨ä¸€ä¸ªå‘¨æœŸå†…æ­£è´Ÿéƒ¨åˆ†ç›¸ç­‰ï¼Œå¹³å‡å€¼ä¸º0ï¼Œæ‰€ä»¥aâ‚€ = 0ã€‚';
                feedback.className = 'feedback incorrect';
            }
            feedback.style.display = 'block';
        }
        
        function checkAnswer3() {
            const answer = document.getElementById('answer3').value;
            const feedback = document.getElementById('feedback3');
            
            if (answer === 'triangle') {
                feedback.textContent = 'æ­£ç¡®ï¼ä¸‰è§’æ³¢çš„ç³»æ•°æŒ‰1/nÂ²è¡°å‡ï¼Œæ¯”æ–¹æ³¢å’Œé”¯é½¿æ³¢çš„1/nè¡°å‡æ›´å¿«ã€‚';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = 'é”™è¯¯ã€‚ä¸‰è§’æ³¢çš„å‚…é‡Œå¶ç³»æ•°æŒ‰1/nÂ²è¡°å‡ï¼Œæ˜¯ä¸‰ç§ä¿¡å·ä¸­è¡°å‡æœ€å¿«çš„ã€‚';
                feedback.className = 'feedback incorrect';
            }
            feedback.style.display = 'block';
        }
        
        function checkAnswer4() {
            const answer = parseFloat(document.getElementById('answer4').value);
            const feedback = document.getElementById('feedback4');
            
            if (Math.abs(answer - 8.95) < 1) {
                feedback.textContent = 'æ­£ç¡®ï¼å‰å¸ƒæ–¯ç°è±¡çš„è¿‡å†²çº¦ä¸º(Ï€-2)/Ï€ Ã— 100% â‰ˆ 8.95%ã€‚';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = 'é”™è¯¯ã€‚å‰å¸ƒæ–¯ç°è±¡çš„è¿‡å†²ä¸º(Ï€-2)/Ï€ Ã— 100% â‰ˆ 8.95%ã€‚';
                feedback.className = 'feedback incorrect';
            }
            feedback.style.display = 'block';
        }
        
        function checkAnswer5() {
            const answer = parseInt(document.getElementById('answer5').value);
            const feedback = document.getElementById('feedback5');
            
            if (answer >= 5 && answer <= 7) {
                feedback.textContent = 'æ­£ç¡®ï¼é€šå¸¸éœ€è¦ä¿ç•™å‰5-7é¡¹æ‰èƒ½ä½¿è¯¯å·®å°äº5%ã€‚';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = 'é”™è¯¯ã€‚å¯¹äºæ–¹æ³¢ï¼Œé€šå¸¸éœ€è¦ä¿ç•™å‰5-7é¡¹å‚…é‡Œå¶çº§æ•°æ‰èƒ½ä½¿è¯¯å·®å°äº5%ã€‚';
                feedback.className = 'feedback incorrect';
            }
            feedback.style.display = 'block';
        }
        
        // åˆå§‹åŒ–
        window.onload = function() {
            updateOrthogonality();
            updateFourierSeries();
            updateSpectralComparison();
            updateGibbsDemo();
            updateInteractiveSpectrum();
        };
        
        // äº‹ä»¶ç›‘å¬å™¨
        document.getElementById('orthN').addEventListener('input', updateOrthogonality);
        document.getElementById('orthM').addEventListener('input', updateOrthogonality);
        document.getElementById('harmonicN').addEventListener('input', updateFourierSeries);
        document.getElementById('targetSignal').addEventListener('change', updateFourierSeries);
        document.getElementById('gibbsN').addEventListener('input', updateGibbsDemo);
        document.getElementById('gibbsSignal').addEventListener('change', updateGibbsDemo);
        document.getElementById('fundamentalFreq').addEventListener('input', updateInteractiveSpectrum);
        document.getElementById('dutyCycle').addEventListener('input', updateInteractiveSpectrum);
    </script>
</body>
</html>