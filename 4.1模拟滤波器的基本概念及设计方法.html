<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨¡æ‹Ÿæ»¤æ³¢å™¨åŸºæœ¬æ¦‚å¿µ</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 30px;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        
        h2 {
            color: #34495e;
            border-left: 4px solid #3498db;
            padding-left: 15px;
            margin-top: 30px;
        }
        
        h3 {
            color: #2980b9;
            margin-top: 25px;
        }
        
        .knowledge-point {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .formula {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            font-family: 'Times New Roman', serif;
            font-size: 18px;
        }
        
        .important {
            background: #ffeaa7;
            border: 2px solid #fdcb6e;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .example {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .plot-container {
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        canvas {
            border: 1px solid #ccc;
            margin: 10px;
        }
        
        .controls {
            margin: 15px 0;
            text-align: center;
        }
        
        .controls input, .controls select {
            margin: 5px;
            padding: 5px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .controls button {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        
        .controls button:hover {
            background: #2980b9;
        }
        
        .exercise {
            background: #e8f5e8;
            border: 1px solid #c3e6c3;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .exercise h4 {
            color: #2e7d2e;
            margin-top: 0;
        }
        
        .answer {
            background: #f0f0f0;
            border-radius: 5px;
            padding: 10px;
            margin-top: 10px;
            display: none;
        }
        
        .show-answer {
            background: #28a745;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .show-answer:hover {
            background: #218838;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        
        th {
            background: #f2f2f2;
        }
        
        .highlight {
            background: #ffeb3b;
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .concept-box {
            background: #e3f2fd;
            border: 2px solid #2196f3;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .comparison-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        
        .filter-types {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }
        
        .filter-type {
            background: #f0f8ff;
            border: 1px solid #87ceeb;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        
        .design-flow {
            background: #fff3e0;
            border: 1px solid #ffb74d;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .design-step {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            text-align: center;
        }
        
        .characteristic-comparison {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        
        .characteristic-part {
            text-align: center;
            flex: 1;
            margin: 0 10px;
        }
        
        .distortion-demo {
            background: #ffeee8;
            border: 1px solid #ff9800;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .transition-box {
            background: #f3e5f5;
            border: 2px solid #9c27b0;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>æ¨¡æ‹Ÿæ»¤æ³¢å™¨åŸºæœ¬æ¦‚å¿µ</h1>
        
        <div class="transition-box">
            <h3>ğŸ”„ çŸ¥è¯†è½¬æ¢ï¼šä»æ•°å­—åˆ°æ¨¡æ‹Ÿ</h3>
            <p>å‰ä¸ƒç« æˆ‘ä»¬å­¦ä¹ äº†<strong>ç¦»æ•£æ—¶é—´ä¿¡å·å¤„ç†</strong>ï¼Œç°åœ¨è½¬å‘<strong>è¿ç»­æ—¶é—´(æ¨¡æ‹Ÿ)æ»¤æ³¢å™¨</strong>è®¾è®¡ã€‚ä¸¤è€…çš„å…³ç³»ï¼š</p>
            <ul>
                <li><strong>ç†è®ºåŸºç¡€</strong>ï¼šå‚…é‡Œå¶å˜æ¢ç†è®ºæ˜¯å…±åŒåŸºç¡€</li>
                <li><strong>è®¾è®¡æ€æƒ³</strong>ï¼šé¢‘åŸŸåˆ†æå’Œæ»¤æ³¢æ¦‚å¿µç›¸é€š</li>
                <li><strong>å®ç°æ–¹å¼</strong>ï¼šæ¨¡æ‹Ÿâ†’ç”µè·¯å®ç°ï¼Œæ•°å­—â†’ç®—æ³•å®ç°</li>
                <li><strong>åº”ç”¨äº’è¡¥</strong>ï¼šæ¨¡æ‹Ÿæ»¤æ³¢å™¨å¸¸ä½œä¸ºæ•°å­—ç³»ç»Ÿçš„å‰ç«¯å¤„ç†</li>
            </ul>
        </div>
        
        <h2>æ¨¡æ‹Ÿæ»¤æ³¢å™¨çš„åŸºæœ¬æ¦‚å¿µ</h2>
        
        <div class="concept-box">
            <h3>ğŸ“ æ»¤æ³¢å™¨çš„å®šä¹‰</h3>
            <p><strong>æ»¤æ³¢å™¨</strong>æ˜¯ä¸€ç§èƒ½å¤Ÿ<span class="highlight">æœ‰é€‰æ‹©åœ°ä¼ è¾“ä¸åŒé¢‘ç‡æˆåˆ†</span>çš„çº¿æ€§æ—¶ä¸å˜ç³»ç»Ÿã€‚</p>
            <div class="formula">
                y(t) = h(t) * x(t) â†” Y(jÏ‰) = H(jÏ‰) Â· X(jÏ‰)
            </div>
            <p>å…¶ä¸­H(jÏ‰)ç§°ä¸º<strong>é¢‘ç‡å“åº”</strong>æˆ–<strong>ä¼ é€’å‡½æ•°</strong>ï¼Œå†³å®šäº†æ»¤æ³¢å™¨çš„é¢‘ç‡é€‰æ‹©ç‰¹æ€§ã€‚</p>
        </div>
        
        <div class="knowledge-point">
            <h3>æ»¤æ³¢å™¨çš„åŸºæœ¬åŠŸèƒ½</h3>
            <ol>
                <li><strong>é¢‘ç‡é€‰æ‹©</strong>ï¼šå…è®¸æŸäº›é¢‘ç‡é€šè¿‡ï¼ŒæŠ‘åˆ¶å¦ä¸€äº›é¢‘ç‡</li>
                <li><strong>ä¿¡å·åˆ†ç¦»</strong>ï¼šä»å¤åˆä¿¡å·ä¸­æå–æ‰€éœ€çš„é¢‘ç‡æˆåˆ†</li>
                <li><strong>å™ªå£°æŠ‘åˆ¶</strong>ï¼šæ»¤é™¤ä¸éœ€è¦çš„å™ªå£°å’Œå¹²æ‰°</li>
                <li><strong>é¢‘è°±æ•´å½¢</strong>ï¼šæ”¹å˜ä¿¡å·çš„é¢‘è°±ç‰¹æ€§</li>
                <li><strong>ä¿¡å·è°ƒç†</strong>ï¼šä¸ºåç»­å¤„ç†å‡†å¤‡åˆé€‚çš„ä¿¡å·å½¢å¼</li>
            </ol>
        </div>
        
        <div class="filter-types">
            <div class="filter-type">
                <h4>ä½é€šæ»¤æ³¢å™¨</h4>
                <p><strong>Low-Pass Filter</strong></p>
                <p>é€šè¿‡ä½é¢‘ï¼ŒæŠ‘åˆ¶é«˜é¢‘</p>
                <p>åº”ç”¨ï¼šæŠ—æ··å ã€å¹³æ»‘</p>
            </div>
            <div class="filter-type">
                <h4>é«˜é€šæ»¤æ³¢å™¨</h4>
                <p><strong>High-Pass Filter</strong></p>
                <p>é€šè¿‡é«˜é¢‘ï¼ŒæŠ‘åˆ¶ä½é¢‘</p>
                <p>åº”ç”¨ï¼šå»é™¤ç›´æµã€è¾¹ç¼˜æ£€æµ‹</p>
            </div>
            <div class="filter-type">
                <h4>å¸¦é€šæ»¤æ³¢å™¨</h4>
                <p><strong>Band-Pass Filter</strong></p>
                <p>é€šè¿‡æŸé¢‘æ®µï¼ŒæŠ‘åˆ¶å…¶ä»–</p>
                <p>åº”ç”¨ï¼šä¿¡é“é€‰æ‹©ã€è°ƒåˆ¶è§£è°ƒ</p>
            </div>
            <div class="filter-type">
                <h4>å¸¦é˜»æ»¤æ³¢å™¨</h4>
                <p><strong>Band-Stop Filter</strong></p>
                <p>æŠ‘åˆ¶æŸé¢‘æ®µï¼Œé€šè¿‡å…¶ä»–</p>
                <p>åº”ç”¨ï¼šå·¥é¢‘å¹²æ‰°æŠ‘åˆ¶</p>
            </div>
        </div>
        
        <div class="plot-container">
            <h3>å››ç§åŸºæœ¬æ»¤æ³¢å™¨ç±»å‹æ¼”ç¤º</h3>
            <canvas id="filterTypesDemo" width="800" height="400"></canvas>
            <div class="controls">
                <label>æ»¤æ³¢å™¨ç±»å‹ï¼š</label>
                <select id="filterTypeSelect">
                    <option value="lowpass">ä½é€šæ»¤æ³¢å™¨</option>
                    <option value="highpass">é«˜é€šæ»¤æ³¢å™¨</option>
                    <option value="bandpass">å¸¦é€šæ»¤æ³¢å™¨</option>
                    <option value="bandstop">å¸¦é˜»æ»¤æ³¢å™¨</option>
                </select>
                <label>æˆªæ­¢é¢‘ç‡ï¼š</label>
                <input type="range" id="cutoffFreq" min="0.1" max="10" step="0.1" value="2">
                <span id="cutoffValue">2.0</span> Hz
                <button onclick="updateFilterDemo()">æ›´æ–°æ»¤æ³¢å™¨</button>
            </div>
        </div>
        
        <h2>æ— å¤±çœŸä¼ è¾“</h2>
        
        <div class="knowledge-point">
            <h3>æ— å¤±çœŸä¼ è¾“çš„å®šä¹‰</h3>
            <p>å¦‚æœç³»ç»Ÿçš„è¾“å‡ºä¿¡å·åªæ˜¯è¾“å…¥ä¿¡å·çš„<strong>å¹…åº¦ç¼©æ”¾</strong>å’Œ<strong>æ—¶é—´å»¶è¿Ÿ</strong>ï¼Œåˆ™ç§°ä¸ºæ— å¤±çœŸä¼ è¾“ï¼š</p>
            <div class="formula">
                y(t) = K Â· x(t - Ï„)
            </div>
            <p>å…¶ä¸­ï¼šKä¸ºå¢ç›Šå¸¸æ•°ï¼ŒÏ„ä¸ºæ—¶é—´å»¶è¿Ÿ</p>
        </div>
        
        <div class="important">
            <h3>âš¡ æ— å¤±çœŸä¼ è¾“çš„æ¡ä»¶</h3>
            <p>ç³»ç»Ÿå®ç°æ— å¤±çœŸä¼ è¾“å¿…é¡»æ»¡è¶³ï¼š</p>
            
            <h4>1. å¹…åº¦æ¡ä»¶</h4>
            <div class="formula">
                |H(jÏ‰)| = K = å¸¸æ•° ï¼ˆåœ¨æ‰€æœ‰é¢‘ç‡ä¸Šï¼‰
            </div>
            
            <h4>2. ç›¸ä½æ¡ä»¶</h4>
            <div class="formula">
                âˆ H(jÏ‰) = -Ï‰Ï„ ï¼ˆç›¸ä½ä¸é¢‘ç‡æˆçº¿æ€§å…³ç³»ï¼‰
            </div>
            
            <h4>3. ç¾¤å»¶è¿Ÿæ¡ä»¶</h4>
            <div class="formula">
                Ï„_g(Ï‰) = -dâˆ H(jÏ‰)/dÏ‰ = Ï„ = å¸¸æ•°
            </div>
        </div>
        
        <div class="distortion-demo">
            <h3>ğŸ” å¤±çœŸç±»å‹åˆ†æ</h3>
            <div class="comparison-grid">
                <div class="comparison-item">
                    <h4>å¹…åº¦å¤±çœŸ</h4>
                    <p>|H(jÏ‰)| â‰  å¸¸æ•°</p>
                    <p><strong>åæœï¼š</strong>ä¸åŒé¢‘ç‡æˆåˆ†è¢«ä¸åŒç¨‹åº¦åœ°æ”¾å¤§æˆ–è¡°å‡</p>
                    <p><strong>è¡¨ç°ï¼š</strong>æ³¢å½¢å½¢çŠ¶æ”¹å˜</p>
                </div>
                <div class="comparison-item">
                    <h4>ç›¸ä½å¤±çœŸ</h4>
                    <p>âˆ H(jÏ‰) â‰  -Ï‰Ï„</p>
                    <p><strong>åæœï¼š</strong>ä¸åŒé¢‘ç‡æˆåˆ†çš„æ—¶é—´å…³ç³»æ”¹å˜</p>
                    <p><strong>è¡¨ç°ï¼š</strong>æ³¢å½¢æ—¶é—´ç»“æ„å˜åŒ–</p>
                </div>
            </div>
        </div>
        
        <div class="plot-container">
            <h3>æ— å¤±çœŸä¼ è¾“ä¸å¤±çœŸä¼ è¾“å¯¹æ¯”</h3>
            <div class="characteristic-comparison">
                <div class="characteristic-part">
                    <canvas id="inputSignal" width="250" height="200"></canvas>
                    <p>è¾“å…¥ä¿¡å·</p>
                </div>
                <div class="characteristic-part">
                    <canvas id="undistortedOutput" width="250" height="200"></canvas>
                    <p>æ— å¤±çœŸè¾“å‡º</p>
                </div>
                <div class="characteristic-part">
                    <canvas id="distortedOutput" width="250" height="200"></canvas>
                    <p>æœ‰å¤±çœŸè¾“å‡º</p>
                </div>
            </div>
            <div class="controls">
                <label>è¾“å…¥ä¿¡å·ï¼š</label>
                <select id="inputSignalType">
                    <option value="square">æ–¹æ³¢</option>
                    <option value="triangle">ä¸‰è§’æ³¢</option>
                    <option value="pulse">è„‰å†²</option>
                    <option value="chirp">çº¿æ€§è°ƒé¢‘</option>
                </select>
                <label>å¤±çœŸç±»å‹ï¼š</label>
                <select id="distortionType">
                    <option value="amplitude">å¹…åº¦å¤±çœŸ</option>
                    <option value="phase">ç›¸ä½å¤±çœŸ</option>
                    <option value="both">å¹…åº¦+ç›¸ä½å¤±çœŸ</option>
                </select>
                <button onclick="demonstrateDistortion()">æ¼”ç¤ºå¤±çœŸæ•ˆæœ</button>
            </div>
        </div>
        
        <h2>æ»¤æ³¢å™¨çš„ç†æƒ³ç‰¹æ€§ä¸å®é™…ç‰¹æ€§</h2>
        
        <div class="knowledge-point">
            <h3>ç†æƒ³æ»¤æ³¢å™¨ç‰¹æ€§</h3>
            <p>ç†æƒ³æ»¤æ³¢å™¨å…·æœ‰<strong>çŸ©å½¢é¢‘ç‡å“åº”</strong>ï¼š</p>
            
            <h4>ç†æƒ³ä½é€šæ»¤æ³¢å™¨</h4>
            <div class="formula">
                H(jÏ‰) = {1, |Ï‰| â‰¤ Ï‰_c; 0, |Ï‰| > Ï‰_c}
            </div>
            
            <div class="example">
                <h4>ç†æƒ³æ»¤æ³¢å™¨çš„ç‰¹ç‚¹</h4>
                <ul>
                    <li><strong>é€šå¸¦</strong>ï¼šå®Œå…¨æ— æŸä¼ è¾“ï¼ˆ|H(jÏ‰)| = 1ï¼‰</li>
                    <li><strong>é˜»å¸¦</strong>ï¼šå®Œå…¨é˜»æ–­ä¼ è¾“ï¼ˆ|H(jÏ‰)| = 0ï¼‰</li>
                    <li><strong>è¿‡æ¸¡å¸¦</strong>ï¼šç¬é—´è¿‡æ¸¡ï¼ˆå®½åº¦ä¸º0ï¼‰</li>
                    <li><strong>ç›¸ä½</strong>ï¼šçº¿æ€§ç›¸ä½ç‰¹æ€§</li>
                </ul>
            </div>
        </div>
        
        <div class="important">
            <h3>âš ï¸ ç†æƒ³æ»¤æ³¢å™¨çš„é—®é¢˜</h3>
            <ul>
                <li><strong>éå› æœæ€§</strong>ï¼šå†²æ¿€å“åº”åœ¨t<0æ—¶ä¸ä¸ºé›¶</li>
                <li><strong>æ— é™é•¿</strong>ï¼šå†²æ¿€å“åº”ä¸ºsincå‡½æ•°ï¼Œæ—¶åŸŸæ— é™é•¿</li>
                <li><strong>ç‰©ç†ä¸å¯å®ç°</strong>ï¼šéœ€è¦æ— é™å¤šçš„å…ƒä»¶</li>
                <li><strong>å‰å¸ƒæ–¯ç°è±¡</strong>ï¼šé˜¶è·ƒå“åº”æœ‰æŒ¯è¡å’Œè¿‡å†²</li>
            </ul>
        </div>
        
        <div class="knowledge-point">
            <h3>å®é™…æ»¤æ³¢å™¨ç‰¹æ€§</h3>
            <p>å®é™…æ»¤æ³¢å™¨å¿…é¡»åœ¨ç†æƒ³ç‰¹æ€§å’Œå¯å®ç°æ€§ä¹‹é—´æŠ˜è¡·ï¼š</p>
            
            <div class="comparison-grid">
                <div class="comparison-item">
                    <h4>ç†æƒ³æ»¤æ³¢å™¨</h4>
                    <ul>
                        <li>çŸ©å½¢é¢‘ç‡å“åº”</li>
                        <li>æ— è¿‡æ¸¡å¸¦</li>
                        <li>å®Œç¾çš„é€šå¸¦å’Œé˜»å¸¦</li>
                        <li>çº¿æ€§ç›¸ä½</li>
                        <li><strong>ç‰©ç†ä¸å¯å®ç°</strong></li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h4>å®é™…æ»¤æ³¢å™¨</h4>
                    <ul>
                        <li>å¹³æ»‘çš„é¢‘ç‡å“åº”</li>
                        <li>æœ‰é™çš„è¿‡æ¸¡å¸¦</li>
                        <li>é€šå¸¦çº¹æ³¢ï¼Œé˜»å¸¦æ³„æ¼</li>
                        <li>éçº¿æ€§ç›¸ä½</li>
                        <li><strong>ç‰©ç†å¯å®ç°</strong></li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="plot-container">
            <h3>ç†æƒ³ç‰¹æ€§ vs å®é™…ç‰¹æ€§å¯¹æ¯”</h3>
            <canvas id="idealVsReal" width="800" height="400"></canvas>
            <div class="controls">
                <label>æ»¤æ³¢å™¨é˜¶æ•°ï¼š</label>
                <input type="range" id="filterOrder" min="1" max="8" step="1" value="4">
                <span id="orderValue">4</span>
                <label>æ»¤æ³¢å™¨ç±»å‹ï¼š</label>
                <select id="realizationMethod">
                    <option value="butterworth">å·´ç‰¹æ²ƒæ–¯</option>
                    <option value="chebyshev">åˆ‡æ¯”é›ªå¤«</option>
                    <option value="elliptic">æ¤­åœ†</option>
                </select>
                <button onclick="compareIdealReal()">å¯¹æ¯”ç‰¹æ€§</button>
            </div>
        </div>
        
        <h2>æ¨¡æ‹Ÿæ»¤æ³¢å™¨çš„ä¸€èˆ¬è®¾è®¡æ–¹æ³•</h2>
        
        <div class="design-flow">
            <h3>ğŸ”§ æ»¤æ³¢å™¨è®¾è®¡çš„ä¸€èˆ¬æµç¨‹</h3>
            
            <div class="design-step">
                <h4>æ­¥éª¤1ï¼šéœ€æ±‚åˆ†æ</h4>
                <p>ç¡®å®šæŠ€æœ¯æŒ‡æ ‡ï¼šé€šå¸¦ã€é˜»å¸¦ã€çº¹æ³¢ã€è¡°å‡ç­‰</p>
            </div>
            
            <div class="design-step">
                <h4>æ­¥éª¤2ï¼šé€¼è¿‘æ–¹æ³•é€‰æ‹©</h4>
                <p>é€‰æ‹©åˆé€‚çš„é€¼è¿‘å‡½æ•°ï¼šå·´ç‰¹æ²ƒæ–¯ã€åˆ‡æ¯”é›ªå¤«ã€æ¤­åœ†ç­‰</p>
            </div>
            
            <div class="design-step">
                <h4>æ­¥éª¤3ï¼šä¼ é€’å‡½æ•°è®¾è®¡</h4>
                <p>ç¡®å®šæ»¤æ³¢å™¨çš„såŸŸä¼ é€’å‡½æ•°H(s)</p>
            </div>
            
            <div class="design-step">
                <h4>æ­¥éª¤4ï¼šç”µè·¯å®ç°</h4>
                <p>é€‰æ‹©å®ç°ç»“æ„ï¼šæ— æºã€æœ‰æºã€å¼€å…³ç”µå®¹ç­‰</p>
            </div>
            
            <div class="design-step">
                <h4>æ­¥éª¤5ï¼šä»¿çœŸéªŒè¯</h4>
                <p>éªŒè¯è®¾è®¡æ˜¯å¦æ»¡è¶³æŠ€æœ¯æŒ‡æ ‡è¦æ±‚</p>
            </div>
        </div>
        
        <div class="knowledge-point">
            <h3>è®¾è®¡æŠ€æœ¯æŒ‡æ ‡</h3>
            <p>æ¨¡æ‹Ÿæ»¤æ³¢å™¨è®¾è®¡é€šå¸¸éœ€è¦æŒ‡å®šä»¥ä¸‹æŠ€æœ¯å‚æ•°ï¼š</p>
            
            <table>
                <tr>
                    <th>å‚æ•°</th>
                    <th>ç¬¦å·</th>
                    <th>å®šä¹‰</th>
                    <th>å…¸å‹å€¼</th>
                </tr>
                <tr>
                    <td>é€šå¸¦æˆªæ­¢é¢‘ç‡</td>
                    <td>f_p, Ï‰_p</td>
                    <td>é€šå¸¦è¾¹ç•Œé¢‘ç‡</td>
                    <td>æ ¹æ®åº”ç”¨ç¡®å®š</td>
                </tr>
                <tr>
                    <td>é˜»å¸¦æˆªæ­¢é¢‘ç‡</td>
                    <td>f_s, Ï‰_s</td>
                    <td>é˜»å¸¦å¼€å§‹é¢‘ç‡</td>
                    <td>æ ¹æ®åº”ç”¨ç¡®å®š</td>
                </tr>
                <tr>
                    <td>é€šå¸¦çº¹æ³¢</td>
                    <td>R_p</td>
                    <td>é€šå¸¦å†…å¹…åº¦å˜åŒ–</td>
                    <td>0.1~3 dB</td>
                </tr>
                <tr>
                    <td>é˜»å¸¦è¡°å‡</td>
                    <td>A_s</td>
                    <td>é˜»å¸¦æœ€å°è¡°å‡</td>
                    <td>20~80 dB</td>
                </tr>
                <tr>
                    <td>è¿‡æ¸¡å¸¦å®½</td>
                    <td>Î”Ï‰</td>
                    <td>Ï‰_s - Ï‰_p</td>
                    <td>è¶Šå°è¶Šå¥½</td>
                </tr>
            </table>
        </div>
        
        <div class="important">
            <h3>ğŸ¯ è®¾è®¡ä¸­çš„æƒè¡¡è€ƒè™‘</h3>
            <div class="comparison-grid">
                <div class="comparison-item">
                    <h4>æ€§èƒ½è¦æ±‚</h4>
                    <ul>
                        <li>é¢‘ç‡é€‰æ‹©æ€§èƒ½</li>
                        <li>ç›¸ä½çº¿æ€§åº¦</li>
                        <li>æ—¶åŸŸå“åº”</li>
                        <li>ç¨³å®šæ€§</li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h4>å®ç°çº¦æŸ</h4>
                    <ul>
                        <li>å…ƒä»¶å®¹å·®</li>
                        <li>æˆæœ¬é™åˆ¶</li>
                        <li>åŠŸè€—è¦æ±‚</li>
                        <li>ä½“ç§¯é™åˆ¶</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="plot-container">
            <h3>æ»¤æ³¢å™¨è®¾è®¡å‚æ•°å¯è§†åŒ–</h3>
            <canvas id="designParameters" width="800" height="400"></canvas>
            <div class="controls">
                <label>é€šå¸¦æˆªæ­¢é¢‘ç‡ï¼š</label>
                <input type="range" id="passbandFreq" min="0.5" max="5" step="0.1" value="2">
                <span id="passbandValue">2.0</span> Hz
                <label>é˜»å¸¦æˆªæ­¢é¢‘ç‡ï¼š</label>
                <input type="range" id="stopbandFreq" min="2" max="10" step="0.1" value="4">
                <span id="stopbandValue">4.0</span> Hz
                <label>é€šå¸¦çº¹æ³¢ï¼š</label>
                <input type="range" id="passbandRipple" min="0.1" max="3" step="0.1" value="1">
                <span id="rippleValue">1.0</span> dB
                <label>é˜»å¸¦è¡°å‡ï¼š</label>
                <input type="range" id="stopbandAtten" min="20" max="80" step="5" value="40">
                <span id="attenValue">40</span> dB
                <button onclick="updateDesignParameters()">æ›´æ–°å‚æ•°</button>
            </div>
        </div>
        
        <h2>ç»ƒä¹ é¢˜ç›®</h2>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 1ï¼šæ»¤æ³¢å™¨ç±»å‹è¯†åˆ«</h4>
            <p>æ ¹æ®ä»¥ä¸‹åº”ç”¨åœºæ™¯ï¼Œé€‰æ‹©æœ€åˆé€‚çš„æ»¤æ³¢å™¨ç±»å‹ï¼š</p>
            <ol>
                <li>ä»å«æœ‰é«˜é¢‘å™ªå£°çš„éŸ³é¢‘ä¿¡å·ä¸­æå–æœ‰ç”¨ä¿¡å·</li>
                <li>å»é™¤ä¿¡å·ä¸­çš„ç›´æµåˆ†é‡</li>
                <li>ä»å¤åˆä¿¡å·ä¸­æå–ç‰¹å®šé¢‘æ®µçš„è°ƒåˆ¶ä¿¡å·</li>
                <li>æŠ‘åˆ¶50Hzå·¥é¢‘å¹²æ‰°</li>
            </ol>
            <button class="show-answer" onclick="toggleAnswer('answer1')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer1" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                1. ä½é€šæ»¤æ³¢å™¨ - ä¿ç•™ä½é¢‘æœ‰ç”¨ä¿¡å·ï¼Œæ»¤é™¤é«˜é¢‘å™ªå£°<br>
                2. é«˜é€šæ»¤æ³¢å™¨ - é˜»æ–­ç›´æµï¼ˆ0Hzï¼‰ï¼Œä¿ç•™äº¤æµæˆåˆ†<br>
                3. å¸¦é€šæ»¤æ³¢å™¨ - åªä¿ç•™ç‰¹å®šé¢‘æ®µçš„ä¿¡å·<br>
                4. å¸¦é˜»æ»¤æ³¢å™¨ï¼ˆé™·æ³¢å™¨ï¼‰- ä¸“é—¨æŠ‘åˆ¶50Hzé¢‘ç‡æˆåˆ†
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 2ï¼šæ— å¤±çœŸä¼ è¾“æ¡ä»¶</h4>
            <p>ç³»ç»Ÿçš„ä¼ é€’å‡½æ•°ä¸º H(jÏ‰) = 2e^(-j3Ï‰)ï¼Œåˆ¤æ–­ï¼š</p>
            <ol>
                <li>è¯¥ç³»ç»Ÿæ˜¯å¦æ»¡è¶³æ— å¤±çœŸä¼ è¾“æ¡ä»¶ï¼Ÿ</li>
                <li>å¦‚æœæ»¡è¶³ï¼Œæ±‚å‡ºå¢ç›ŠKå’Œå»¶è¿ŸÏ„</li>
                <li>å†™å‡ºè¾“å‡ºä¸è¾“å…¥çš„å…³ç³»</li>
            </ol>
            <button class="show-answer" onclick="toggleAnswer('answer2')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer2" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                1. æ»¡è¶³æ— å¤±çœŸä¼ è¾“æ¡ä»¶<br>
                2. |H(jÏ‰)| = 2 = Kï¼ˆå¸¸æ•°ï¼‰ï¼Œâˆ H(jÏ‰) = -3Ï‰ = -Ï‰Ï„ï¼Œæ‰€ä»¥K = 2ï¼ŒÏ„ = 3<br>
                3. y(t) = 2x(t - 3)ï¼Œè¾“å‡ºæ˜¯è¾“å…¥ä¿¡å·æ”¾å¤§2å€å¹¶å»¶è¿Ÿ3ä¸ªæ—¶é—´å•ä½
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 3ï¼šå¤±çœŸç±»å‹åˆ†æ</h4>
            <p>æŸç³»ç»Ÿå¯¹æ­£å¼¦ä¿¡å·çš„å“åº”å¦‚ä¸‹ï¼š</p>
            <p>è¾“å…¥ï¼šx(t) = cos(Ï‰â‚t) + cos(Ï‰â‚‚t)</p>
            <p>è¾“å‡ºï¼šy(t) = 2cos(Ï‰â‚t - Ï€/4) + cos(Ï‰â‚‚t - Ï€/2)</p>
            <p>åˆ†æè¯¥ç³»ç»Ÿå­˜åœ¨ä»€ä¹ˆç±»å‹çš„å¤±çœŸï¼Ÿ</p>
            <button class="show-answer" onclick="toggleAnswer('answer3')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer3" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                å­˜åœ¨å¹…åº¦å¤±çœŸå’Œç›¸ä½å¤±çœŸï¼š<br>
                1. å¹…åº¦å¤±çœŸï¼šÏ‰â‚é¢‘ç‡æˆåˆ†è¢«æ”¾å¤§2å€ï¼ŒÏ‰â‚‚é¢‘ç‡æˆåˆ†ä¿æŒä¸å˜<br>
                2. ç›¸ä½å¤±çœŸï¼šä¸¤ä¸ªé¢‘ç‡æˆåˆ†çš„ç›¸ä½å»¶è¿Ÿä¸åŒï¼ˆÏ€/4 vs Ï€/2ï¼‰ï¼Œä¸æ»¡è¶³çº¿æ€§ç›¸ä½æ¡ä»¶<br>
                å› æ­¤è¯¥ç³»ç»Ÿæ—¢æœ‰å¹…åº¦å¤±çœŸåˆæœ‰ç›¸ä½å¤±çœŸ
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 4ï¼šè®¾è®¡æŒ‡æ ‡åˆ†æ</h4>
            <p>æŸä½é€šæ»¤æ³¢å™¨è®¾è®¡è¦æ±‚ï¼š</p>
            <ul>
                <li>é€šå¸¦æˆªæ­¢é¢‘ç‡ï¼š1kHz</li>
                <li>é˜»å¸¦æˆªæ­¢é¢‘ç‡ï¼š2kHz</li>
                <li>é€šå¸¦çº¹æ³¢ï¼šâ‰¤1dB</li>
                <li>é˜»å¸¦è¡°å‡ï¼šâ‰¥40dB</li>
            </ul>
            <p>åˆ†æè¿™äº›æŒ‡æ ‡çš„åˆç†æ€§ï¼Œå¹¶è¯´æ˜è¿‡æ¸¡å¸¦å®½åº¦å¯¹æ»¤æ³¢å™¨é˜¶æ•°çš„å½±å“ã€‚</p>
            <button class="show-answer" onclick="toggleAnswer('answer4')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer4" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                1. æŒ‡æ ‡åˆç†æ€§ï¼šé€šå¸¦å’Œé˜»å¸¦é¢‘ç‡æ¯”ä¸º2:1ï¼Œè¿‡æ¸¡å¸¦ç›¸å¯¹è¾ƒå®½ï¼ŒæŒ‡æ ‡è¦æ±‚ä¸­ç­‰ï¼Œåˆç†<br>
                2. è¿‡æ¸¡å¸¦å®½åº¦ = 2kHz - 1kHz = 1kHz<br>
                3. è¿‡æ¸¡å¸¦è¶Šçª„ï¼Œæ‰€éœ€æ»¤æ³¢å™¨é˜¶æ•°è¶Šé«˜ï¼š<br>
                   - å®½è¿‡æ¸¡å¸¦ï¼šå¯ç”¨ä½é˜¶æ»¤æ³¢å™¨å®ç°ï¼Œç®€å•ç»æµ<br>
                   - çª„è¿‡æ¸¡å¸¦ï¼šéœ€è¦é«˜é˜¶æ»¤æ³¢å™¨ï¼Œå¤æ‚æ˜‚è´µ<br>
                4. è¯¥æŒ‡æ ‡ä¸‹ä¼°è®¡éœ€è¦4-6é˜¶æ»¤æ³¢å™¨å¯ä»¥æ»¡è¶³è¦æ±‚
            </div>
        </div>
        
        <h2>8.1.5 å­¦ä¹ è¦ç‚¹æ€»ç»“</h2>
        
        <div class="important">
            <h3>ğŸ¯ æœ¬èŠ‚æ ¸å¿ƒè¦ç‚¹</h3>
            <ol>
                <li><strong>æ»¤æ³¢å™¨æ¦‚å¿µ</strong>ï¼šé¢‘ç‡é€‰æ‹©æ€§çº¿æ€§æ—¶ä¸å˜ç³»ç»Ÿ</li>
                <li><strong>å››ç§åŸºæœ¬ç±»å‹</strong>ï¼šä½é€šã€é«˜é€šã€å¸¦é€šã€å¸¦é˜»</li>
                <li><strong>æ— å¤±çœŸä¼ è¾“</strong>ï¼šå¹…åº¦ä¸ºå¸¸æ•°ï¼Œç›¸ä½çº¿æ€§ï¼Œç¾¤å»¶è¿Ÿæ’å®š</li>
                <li><strong>ç†æƒ³vså®é™…</strong>ï¼šç†æƒ³ä¸å¯å®ç°ï¼Œå®é™…éœ€è¦æŠ˜è¡·</li>
                <li><strong>è®¾è®¡æµç¨‹</strong>ï¼šéœ€æ±‚â†’é€¼è¿‘â†’ä¼ é€’å‡½æ•°â†’ç”µè·¯â†’éªŒè¯</li>
                <li><strong>æŠ€æœ¯æŒ‡æ ‡</strong>ï¼šé€šå¸¦ã€é˜»å¸¦ã€çº¹æ³¢ã€è¡°å‡ã€è¿‡æ¸¡å¸¦</li>
            </ol>
        </div>
        
        <div class="concept-box">
            <h3>ğŸ”— ä¸æ•°å­—æ»¤æ³¢å™¨çš„è”ç³»</h3>
            <p><strong>ç›¸åŒç‚¹ï¼š</strong></p>
            <ul>
                <li>éƒ½åŸºäºé¢‘åŸŸåˆ†æå’Œæ»¤æ³¢æ¦‚å¿µ</li>
                <li>éƒ½æœ‰ç›¸åŒçš„æ»¤æ³¢å™¨åˆ†ç±»</li>
                <li>è®¾è®¡æŒ‡æ ‡å’Œæ€§èƒ½è¦æ±‚ç±»ä¼¼</li>
            </ul>
            <p><strong>ä¸åŒç‚¹ï¼š</strong></p>
            <ul>
                <li>æ•°å­¦å·¥å…·ï¼šè¿ç»­å‚…é‡Œå¶å˜æ¢ vs ç¦»æ•£å‚…é‡Œå¶å˜æ¢</li>
                <li>å®ç°æ–¹å¼ï¼šæ¨¡æ‹Ÿç”µè·¯ vs æ•°å­—ç®—æ³•</li>
                <li>è®¾è®¡æ–¹æ³•ï¼šsåŸŸè®¾è®¡ vs zåŸŸè®¾è®¡</li>
            </ul>
        </div>
    </div>

    <script>
        // ç»˜åˆ¶å››ç§æ»¤æ³¢å™¨ç±»å‹æ¼”ç¤º
        function updateFilterDemo() {
            const canvas = document.getElementById('filterTypesDemo');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            const filterType = document.getElementById('filterTypeSelect').value;
            const cutoff = parseFloat(document.getElementById('cutoffFreq').value);
            
            document.getElementById('cutoffValue').textContent = cutoff.toFixed(1);
            
            ctx.clearRect(0, 0, width, height);
            
            // ç»˜åˆ¶å››ä¸ªå­å›¾
            const subWidth = width / 2;
            const subHeight = height / 2;
            
            drawFilterResponse(ctx, 0, 0, subWidth, subHeight, 'lowpass', cutoff, 'ä½é€šæ»¤æ³¢å™¨');
            drawFilterResponse(ctx, subWidth, 0, subWidth, subHeight, 'highpass', cutoff, 'é«˜é€šæ»¤æ³¢å™¨');
            drawFilterResponse(ctx, 0, subHeight, subWidth, subHeight, 'bandpass', cutoff, 'å¸¦é€šæ»¤æ³¢å™¨');
            drawFilterResponse(ctx, subWidth, subHeight, subWidth, subHeight, 'bandstop', cutoff, 'å¸¦é˜»æ»¤æ³¢å™¨');
            
            // é«˜äº®å½“å‰é€‰æ‹©çš„ç±»å‹
            highlightSelectedFilter(ctx, filterType, subWidth, subHeight);
        }
        
        function drawFilterResponse(ctx, offsetX, offsetY, subWidth, subHeight, type, cutoff, title) {
            const centerY = offsetY + subHeight * 0.8;
            const freqRange = 10; // 0 to 10 Hz
            const scaleX = (subWidth - 40) / freqRange;
            const scaleY = subHeight * 0.5;
            
            // åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            // xè½´
            ctx.beginPath();
            ctx.moveTo(offsetX + 20, centerY);
            ctx.lineTo(offsetX + subWidth - 20, centerY);
            ctx.stroke();
            
            // yè½´
            ctx.beginPath();
            ctx.moveTo(offsetX + 20, offsetY + 20);
            ctx.lineTo(offsetX + 20, centerY);
            ctx.stroke();
            
            // ç»˜åˆ¶é¢‘ç‡å“åº”
            ctx.strokeStyle = '#3498db';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            const points = 200;
            for (let i = 0; i <= points; i++) {
                const freq = (i / points) * freqRange;
                const x = offsetX + 20 + freq * scaleX;
                let magnitude = 0;
                
                switch (type) {
                    case 'lowpass':
                        magnitude = freq <= cutoff ? 1 : 0.01;
                        break;
                    case 'highpass':
                        magnitude = freq >= cutoff ? 1 : 0.01;
                        break;
                    case 'bandpass':
                        magnitude = (freq >= cutoff * 0.8 && freq <= cutoff * 1.2) ? 1 : 0.01;
                        break;
                    case 'bandstop':
                        magnitude = (freq >= cutoff * 0.8 && freq <= cutoff * 1.2) ? 0.01 : 1;
                        break;
                }
                
                const y = centerY - magnitude * scaleY;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // æ ‡é¢˜
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(title, offsetX + subWidth / 2, offsetY + 15);
            
            // é¢‘ç‡è½´æ ‡ç­¾
            ctx.font = '10px Arial';
            ctx.fillText('0', offsetX + 20, centerY + 15);
            ctx.fillText('5', offsetX + 20 + 5 * scaleX, centerY + 15);
            ctx.fillText('10 Hz', offsetX + 20 + 10 * scaleX, centerY + 15);
            
            // å¹…åº¦è½´æ ‡ç­¾
            ctx.textAlign = 'right';
            ctx.fillText('1', offsetX + 15, offsetY + 25);
            ctx.fillText('0', offsetX + 15, centerY + 5);
        }
        
        function highlightSelectedFilter(ctx, selectedType, subWidth, subHeight) {
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 3;
            ctx.setLineDash([5, 5]);
            
            let x = 0, y = 0;
            switch (selectedType) {
                case 'lowpass':
                    x = 0; y = 0;
                    break;
                case 'highpass':
                    x = subWidth; y = 0;
                    break;
                case 'bandpass':
                    x = 0; y = subHeight;
                    break;
                case 'bandstop':
                    x = subWidth; y = subHeight;
                    break;
            }
            
            ctx.beginPath();
            ctx.rect(x + 2, y + 2, subWidth - 4, subHeight - 4);
            ctx.stroke();
            ctx.setLineDash([]);
        }
        
        // æ¼”ç¤ºå¤±çœŸæ•ˆæœ
        function demonstrateDistortion() {
            const signalType = document.getElementById('inputSignalType').value;
            const distortionType = document.getElementById('distortionType').value;
            
            // ç”Ÿæˆè¾“å…¥ä¿¡å·
            const t = [];
            const input = [];
            const fs = 100; // é‡‡æ ·é¢‘ç‡
            const duration = 2; // ä¿¡å·é•¿åº¦
            
            for (let i = 0; i < fs * duration; i++) {
                const time = i / fs;
                t.push(time);
                
                let signal = 0;
                switch (signalType) {
                    case 'square':
                        signal = Math.sign(Math.sin(2 * Math.PI * 2 * time));
                        break;
                    case 'triangle':
                        signal = 2 * Math.abs((time * 2) % 2 - 1) - 1;
                        break;
                    case 'pulse':
                        signal = (time % 1 < 0.1) ? 1 : 0;
                        break;
                    case 'chirp':
                        signal = Math.sin(2 * Math.PI * time * (1 + time));
                        break;
                }
                input.push(signal);
            }
            
            // ç”Ÿæˆæ— å¤±çœŸè¾“å‡ºï¼ˆå»¶è¿Ÿå’Œå¢ç›Šï¼‰
            const undistorted = input.map(val => 0.8 * val); // å»¶è¿Ÿåœ¨æ­¤ç®€åŒ–å¤„ç†
            
            // ç”Ÿæˆæœ‰å¤±çœŸè¾“å‡º
            const distorted = [];
            for (let i = 0; i < input.length; i++) {
                let output = input[i];
                
                switch (distortionType) {
                    case 'amplitude':
                        // å¹…åº¦å¤±çœŸï¼šé«˜é¢‘è¡°å‡
                        output *= (1 - 0.3 * Math.abs(input[i]));
                        break;
                    case 'phase':
                        // ç›¸ä½å¤±çœŸï¼šç®€åŒ–çš„éçº¿æ€§ç›¸ä½
                        output = i > 0 ? 0.7 * input[i] + 0.3 * input[i-1] : input[i];
                        break;
                    case 'both':
                        // å¹…åº¦å’Œç›¸ä½å¤±çœŸ
                        output *= (1 - 0.2 * Math.abs(input[i]));
                        output = i > 0 ? 0.6 * output + 0.4 * input[i-1] : output;
                        break;
                }
                distorted.push(output);
            }
            
            // ç»˜åˆ¶ä¿¡å·
            plotTimeSignal(input, 'inputSignal', 'è¾“å…¥ä¿¡å·');
            plotTimeSignal(undistorted, 'undistortedOutput', 'æ— å¤±çœŸè¾“å‡º');
            plotTimeSignal(distorted, 'distortedOutput', 'æœ‰å¤±çœŸè¾“å‡º');
        }
        
        function plotTimeSignal(signal, canvasId, title) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const centerY = height / 2;
            const scaleX = (width - 40) / signal.length;
            const maxVal = Math.max(...signal.map(Math.abs));
            const scaleY = (height * 0.3) / maxVal;
            
            // åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            ctx.beginPath();
            ctx.moveTo(20, centerY);
            ctx.lineTo(width - 20, centerY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(20, 20);
            ctx.lineTo(20, height - 20);
            ctx.stroke();
            
            // ç»˜åˆ¶ä¿¡å·
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            signal.forEach((val, index) => {
                const x = 20 + index * scaleX;
                const y = centerY - val * scaleY;
                
                if (index === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            ctx.stroke();
            
            // æ ‡é¢˜
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(title, width / 2, 15);
        }
        
        // å¯¹æ¯”ç†æƒ³ä¸å®é™…ç‰¹æ€§
        function compareIdealReal() {
            const canvas = document.getElementById('idealVsReal');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            const order = parseInt(document.getElementById('filterOrder').value);
            const method = document.getElementById('realizationMethod').value;
            
            document.getElementById('orderValue').textContent = order;
            
            ctx.clearRect(0, 0, width, height);
            
            // ç»˜åˆ¶ç†æƒ³å’Œå®é™…é¢‘ç‡å“åº”å¯¹æ¯”
            drawIdealVsRealComparison(ctx, width, height, order, method);
        }
        
        function drawIdealVsRealComparison(ctx, width, height, order, method) {
            const centerY = height * 0.8;
            const freqRange = 10;
            const scaleX = (width - 60) / freqRange;
            const scaleY = height * 0.5;
            
            // åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            ctx.beginPath();
            ctx.moveTo(30, centerY);
            ctx.lineTo(width - 30, centerY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(30, 30);
            ctx.lineTo(30, centerY);
            ctx.stroke();
            
            // ç»˜åˆ¶ç†æƒ³å“åº”
            ctx.strokeStyle = '#3498db';
            ctx.lineWidth = 3;
            ctx.setLineDash([10, 5]);
            ctx.beginPath();
            
            const cutoffFreq = 3;
            for (let i = 0; i <= 200; i++) {
                const freq = (i / 200) * freqRange;
                const x = 30 + freq * scaleX;
                const magnitude = freq <= cutoffFreq ? 1 : 0;
                const y = centerY - magnitude * scaleY;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            ctx.setLineDash([]);
            
            // ç»˜åˆ¶å®é™…å“åº”
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            for (let i = 0; i <= 200; i++) {
                const freq = (i / 200) * freqRange;
                const x = 30 + freq * scaleX;
                let magnitude = 0;
                
                // ç®€åŒ–çš„æ»¤æ³¢å™¨å“åº”æ¨¡å‹
                const s = freq / cutoffFreq;
                switch (method) {
                    case 'butterworth':
                        magnitude = 1 / Math.sqrt(1 + Math.pow(s, 2 * order));
                        break;
                    case 'chebyshev':
                        magnitude = 1 / Math.sqrt(1 + 0.5 * Math.pow(s, 2 * order));
                        break;
                    case 'elliptic':
                        magnitude = s <= 1 ? 1 - 0.1 * Math.sin(order * s) : 0.01;
                        break;
                }
                
                const y = centerY - magnitude * scaleY;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // å›¾ä¾‹
            ctx.fillStyle = '#3498db';
            ctx.fillRect(width - 150, 50, 20, 3);
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('ç†æƒ³å“åº”', width - 125, 55);
            
            ctx.fillStyle = '#e74c3c';
            ctx.fillRect(width - 150, 70, 20, 3);
            ctx.fillText(`å®é™…å“åº” (${order}é˜¶${method})`, width - 125, 75);
            
            // æ ‡ç­¾
            ctx.textAlign = 'center';
            ctx.fillText('é¢‘ç‡ (Hz)', width / 2, height - 10);
            
            ctx.save();
            ctx.translate(15, height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('å¹…åº¦', 0, 0);
            ctx.restore();
        }
        
        // æ›´æ–°è®¾è®¡å‚æ•°
        function updateDesignParameters() {
            const canvas = document.getElementById('designParameters');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            const fp = parseFloat(document.getElementById('passbandFreq').value);
            const fs = parseFloat(document.getElementById('stopbandFreq').value);
            const rp = parseFloat(document.getElementById('passbandRipple').value);
            const as = parseFloat(document.getElementById('stopbandAtten').value);
            
            document.getElementById('passbandValue').textContent = fp.toFixed(1);
            document.getElementById('stopbandValue').textContent = fs.toFixed(1);
            document.getElementById('rippleValue').textContent = rp.toFixed(1);
            document.getElementById('attenValue').textContent = as;
            
            ctx.clearRect(0, 0, width, height);
            
            drawDesignSpecification(ctx, width, height, fp, fs, rp, as);
        }
        
        function drawDesignSpecification(ctx, width, height, fp, fs, rp, as) {
            const centerY = height * 0.8;
            const freqRange = Math.max(fs * 1.5, 10);
            const scaleX = (width - 60) / freqRange;
            const scaleY = height * 0.6 / 60; // 60dB range
            
            // åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            ctx.beginPath();
            ctx.moveTo(30, centerY);
            ctx.lineTo(width - 30, centerY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(30, 30);
            ctx.lineTo(30, centerY);
            ctx.stroke();
            
            // ç»˜åˆ¶è®¾è®¡è§„èŒƒåŒºåŸŸ
            ctx.fillStyle = 'rgba(76, 175, 80, 0.3)'; // é€šå¸¦åŒºåŸŸ
            ctx.fillRect(30, centerY - rp * scaleY, fp * scaleX, rp * scaleY);
            
            ctx.fillStyle = 'rgba(244, 67, 54, 0.3)'; // é˜»å¸¦åŒºåŸŸ
            ctx.fillRect(30 + fs * scaleX, centerY - as * scaleY, (freqRange - fs) * scaleX, as * scaleY);
            
            // ç»˜åˆ¶è¾¹ç•Œçº¿
            ctx.strokeStyle = '#4caf50';
            ctx.lineWidth = 2;
            
            // é€šå¸¦ä¸Šè¾¹ç•Œ
            ctx.beginPath();
            ctx.moveTo(30, centerY);
            ctx.lineTo(30 + fp * scaleX, centerY);
            ctx.stroke();
            
            // é€šå¸¦ä¸‹è¾¹ç•Œ
            ctx.beginPath();
            ctx.moveTo(30, centerY - rp * scaleY);
            ctx.lineTo(30 + fp * scaleX, centerY - rp * scaleY);
            ctx.stroke();
            
            // é˜»å¸¦è¾¹ç•Œ
            ctx.strokeStyle = '#f44336';
            ctx.beginPath();
            ctx.moveTo(30 + fs * scaleX, centerY - as * scaleY);
            ctx.lineTo(width - 30, centerY - as * scaleY);
            ctx.stroke();
            
            // å‚ç›´åˆ†ç•Œçº¿
            ctx.strokeStyle = '#666';
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(30 + fp * scaleX, 30);
            ctx.lineTo(30 + fp * scaleX, centerY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(30 + fs * scaleX, 30);
            ctx.lineTo(30 + fs * scaleX, centerY);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // æ ‡æ³¨
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            
            ctx.fillText(`fp=${fp}Hz`, 30 + fp * scaleX, centerY + 20);
            ctx.fillText(`fs=${fs}Hz`, 30 + fs * scaleX, centerY + 20);
            ctx.fillText('é¢‘ç‡ (Hz)', width / 2, height - 10);
            
            ctx.textAlign = 'right';
            ctx.fillText(`${rp}dB`, 25, centerY - rp * scaleY + 5);
            ctx.fillText(`${as}dB`, 25, centerY - as * scaleY + 5);
            
            // åŒºåŸŸæ ‡ç­¾
            ctx.textAlign = 'center';
            ctx.fillStyle = '#4caf50';
            ctx.fillText('é€šå¸¦', 30 + fp * scaleX / 2, centerY - rp * scaleY / 2);
            
            ctx.fillStyle = '#ff9800';
            ctx.fillText('è¿‡æ¸¡å¸¦', 30 + (fp + fs) * scaleX / 2, centerY - 20);
            
            ctx.fillStyle = '#f44336';
            ctx.fillText('é˜»å¸¦', 30 + (fs + freqRange) * scaleX / 2, centerY - as * scaleY / 2);
        }
        
        // åˆ‡æ¢ç­”æ¡ˆæ˜¾ç¤º
        function toggleAnswer(answerId) {
            const answer = document.getElementById(answerId);
            answer.style.display = answer.style.display === 'none' ? 'block' : 'none';
        }
        
        // é¡µé¢åŠ è½½ååˆå§‹åŒ–
        window.onload = function() {
            updateFilterDemo();
            demonstrateDistortion();
            compareIdealReal();
            updateDesignParameters();
        };
    </script>
</body>
</html>