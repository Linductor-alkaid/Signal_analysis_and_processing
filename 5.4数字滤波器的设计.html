<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¿¡å·åˆ†æä¸å¤„ç† - æ•°å­—æ»¤æ³¢å™¨çš„ç»“æ„</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 30px;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        
        h2 {
            color: #34495e;
            border-left: 4px solid #3498db;
            padding-left: 15px;
            margin-top: 30px;
        }
        
        h3 {
            color: #2980b9;
            margin-top: 25px;
        }
        
        .knowledge-point {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .formula {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            font-family: 'Times New Roman', serif;
            font-size: 18px;
        }
        
        .important {
            background: #ffeaa7;
            border: 2px solid #fdcb6e;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .example {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .plot-container {
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        canvas {
            border: 1px solid #ccc;
            margin: 10px;
        }
        
        .controls {
            margin: 15px 0;
            text-align: center;
        }
        
        .controls input, .controls select {
            margin: 5px;
            padding: 5px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .controls button {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        
        .controls button:hover {
            background: #2980b9;
        }
        
        .exercise {
            background: #e8f5e8;
            border: 1px solid #c3e6c3;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .exercise h4 {
            color: #2e7d2e;
            margin-top: 0;
        }
        
        .answer {
            background: #f0f0f0;
            border-radius: 5px;
            padding: 10px;
            margin-top: 10px;
            display: none;
        }
        
        .show-answer {
            background: #28a745;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .show-answer:hover {
            background: #218838;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        
        th {
            background: #f2f2f2;
        }
        
        .highlight {
            background: #ffeb3b;
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .structure-box {
            background: #e8f5e8;
            border: 2px solid #4caf50;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .iir-box {
            background: #f3e5f5;
            border: 2px solid #9c27b0;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .fir-box {
            background: #e3f2fd;
            border: 2px solid #2196f3;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .comparison-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        
        .signal-flow-demo {
            background: #fff8e1;
            border: 1px solid #ffb74d;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .structure-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .structure-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        
        .advantages-disadvantages {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }
        
        .advantages {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            padding: 15px;
        }
        
        .disadvantages {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 8px;
            padding: 15px;
        }
        
        .flowchart-node {
            background: #ffffff;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 8px;
            margin: 5px;
            display: inline-block;
            font-size: 12px;
            text-align: center;
            min-width: 60px;
        }
        
        .delay-node {
            background: #ffeb3b;
            border-color: #fbc02d;
        }
        
        .adder-node {
            background: #4caf50;
            border-color: #388e3c;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            line-height: 14px;
            color: white;
        }
        
        .multiplier-node {
            background: #2196f3;
            border-color: #1976d2;
            color: white;
        }
        
        .structure-comparison {
            background: #f0f8ff;
            border: 1px solid #87ceeb;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .quantization-effects {
            background: #ffeee8;
            border: 1px solid #ff9800;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .implementation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .implementation-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        
        .lattice-box {
            background: #e8f5e8;
            border: 2px solid #4caf50;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ä¿¡å·åˆ†æä¸å¤„ç† - æ•°å­—æ»¤æ³¢å™¨çš„ç»“æ„</h1>
        
        <div class="important">
            <h3>ğŸ¯ æ»¤æ³¢å™¨ç»“æ„çš„é‡è¦æ€§</h3>
            <p>æ•°å­—æ»¤æ³¢å™¨çš„<strong>ç»“æ„</strong>å†³å®šäº†ç®—æ³•çš„å®ç°æ–¹å¼ï¼Œç›´æ¥å½±å“ï¼š</p>
            <ul>
                <li><strong>è®¡ç®—å¤æ‚åº¦</strong>ï¼šä¹˜æ³•å’ŒåŠ æ³•è¿ç®—çš„æ•°é‡</li>
                <li><strong>å­˜å‚¨éœ€æ±‚</strong>ï¼šå»¶è¿Ÿå•å…ƒå’Œç³»æ•°å­˜å‚¨</li>
                <li><strong>é‡åŒ–æ•æ„Ÿæ€§</strong>ï¼šæœ‰é™å­—é•¿æ•ˆåº”</li>
                <li><strong>æ•°å€¼ç¨³å®šæ€§</strong>ï¼šèˆå…¥è¯¯å·®ç´¯ç§¯</li>
                <li><strong>å¹¶è¡Œåº¦</strong>ï¼šç¡¬ä»¶å®ç°çš„å¯å¹¶è¡Œæ€§</li>
            </ul>
        </div>
        
        <h2>1. æ•°å­—æ»¤æ³¢å™¨ç»“æ„çš„è¡¨ç¤ºæ–¹æ³•</h2>
        
        <div class="structure-box">
            <h3>ğŸŸ¢ ä¿¡å·æµå›¾è¡¨ç¤ºæ³•</h3>
            <p>ä¿¡å·æµå›¾æ˜¯æè¿°æ•°å­—æ»¤æ³¢å™¨ç»“æ„çš„æ ‡å‡†æ–¹æ³•ï¼Œä½¿ç”¨ä»¥ä¸‹åŸºæœ¬å•å…ƒï¼š</p>
            
            <div class="signal-flow-demo">
                <h4>åŸºæœ¬è¿ç®—å•å…ƒ</h4>
                <div style="display: flex; justify-content: space-around; align-items: center; margin: 20px 0;">
                    <div style="text-align: center;">
                        <div class="delay-node">zâ»Â¹</div>
                        <p><strong>å»¶è¿Ÿå•å…ƒ</strong><br>å­˜å‚¨ä¸€ä¸ªæ ·æœ¬</p>
                    </div>
                    <div style="text-align: center;">
                        <div class="adder-node">+</div>
                        <p><strong>åŠ æ³•å™¨</strong><br>ä¿¡å·ç›¸åŠ </p>
                    </div>
                    <div style="text-align: center;">
                        <div class="multiplier-node">Ã—</div>
                        <p><strong>ä¹˜æ³•å™¨</strong><br>ç³»æ•°ä¹˜æ³•</p>
                    </div>
                    <div style="text-align: center;">
                        <div class="flowchart-node">åˆ†æ”¯ç‚¹</div>
                        <p><strong>åˆ†æ”¯èŠ‚ç‚¹</strong><br>ä¿¡å·åˆ†æ”¯</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="knowledge-point">
            <h3>ç»“æ„å®ç°çš„è€ƒè™‘å› ç´ </h3>
            
            <div class="implementation-grid">
                <div class="implementation-item">
                    <h4>è®¡ç®—æ•ˆç‡</h4>
                    <ul>
                        <li>ä¹˜æ³•å™¨æ•°é‡</li>
                        <li>åŠ æ³•å™¨æ•°é‡</li>
                        <li>å»¶è¿Ÿå•å…ƒæ•°é‡</li>
                        <li>å…³é”®è·¯å¾„é•¿åº¦</li>
                    </ul>
                </div>
                
                <div class="implementation-item">
                    <h4>å­˜å‚¨éœ€æ±‚</h4>
                    <ul>
                        <li>ç³»æ•°å­˜å‚¨</li>
                        <li>æ•°æ®ç¼“å­˜</li>
                        <li>ä¸­é—´å˜é‡</li>
                        <li>é‡åŒ–å­—é•¿</li>
                    </ul>
                </div>
                
                <div class="implementation-item">
                    <h4>æ•°å€¼ç‰¹æ€§</h4>
                    <ul>
                        <li>èˆå…¥è¯¯å·®</li>
                        <li>ç³»æ•°é‡åŒ–</li>
                        <li>æç‚¹æ•æ„Ÿæ€§</li>
                        <li>æº¢å‡ºå¤„ç†</li>
                    </ul>
                </div>
                
                <div class="implementation-item">
                    <h4>ç¡¬ä»¶å®ç°</h4>
                    <ul>
                        <li>å¹¶è¡Œåº¦</li>
                        <li>æµæ°´çº¿</li>
                        <li>èµ„æºå…±äº«</li>
                        <li>åŠŸè€—ä¼˜åŒ–</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="plot-container">
            <h3>ä¿¡å·æµå›¾ç»˜åˆ¶æ¼”ç¤º</h3>
            <canvas id="signalFlowDemo" width="800" height="400"></canvas>
            <div class="controls">
                <label>æ»¤æ³¢å™¨ç±»å‹ï¼š</label>
                <select id="filterTypeDemo">
                    <option value="fir">FIRæ»¤æ³¢å™¨</option>
                    <option value="iir">IIRæ»¤æ³¢å™¨</option>
                </select>
                <label>ç»“æ„å½¢å¼ï¼š</label>
                <select id="structureTypeDemo">
                    <option value="direct1">ç›´æ¥å½¢å¼I</option>
                    <option value="direct2">ç›´æ¥å½¢å¼II</option>
                    <option value="cascade">çº§è”å½¢å¼</option>
                </select>
                <label>é˜¶æ•°/é•¿åº¦ï¼š</label>
                <input type="range" id="orderDemo" min="2" max="6" step="1" value="3">
                <span id="orderDemoValue">3</span>
                <button onclick="updateSignalFlow()">æ›´æ–°ç»“æ„å›¾</button>
            </div>
        </div>
        
        <h2>2. IIRæ•°å­—æ»¤æ³¢å™¨çš„ç»“æ„</h2>
        
        <div class="iir-box">
            <h3>ğŸŸ£ åŸºæœ¬ä¼ é€’å‡½æ•°å½¢å¼</h3>
            <p>IIRæ»¤æ³¢å™¨çš„ç³»ç»Ÿå‡½æ•°ä¸€èˆ¬å½¢å¼ï¼š</p>
            <div class="formula">
                H(z) = (âˆ‘(k=0 to M) b_k z^{-k}) / (âˆ‘(k=0 to N) a_k z^{-k}) = Y(z)/X(z)
            </div>
            <p>å¯¹åº”çš„å·®åˆ†æ–¹ç¨‹ï¼š</p>
            <div class="formula">
                y[n] = âˆ‘(k=0 to M) b_k x[n-k] - âˆ‘(k=1 to N) a_k y[n-k]
            </div>
        </div>
        
        <div class="knowledge-point">
            <h3>2.1 ç›´æ¥å½¢å¼I (Direct Form I)</h3>
            
            <div class="structure-comparison">
                <h4>ç»“æ„ç‰¹ç‚¹</h4>
                <ul>
                    <li><strong>åˆ†ç¦»å®ç°</strong>ï¼šåˆ†å­å¤šé¡¹å¼å’Œåˆ†æ¯å¤šé¡¹å¼åˆ†åˆ«å®ç°</li>
                    <li><strong>ä¸¤ä¸ªå»¶è¿Ÿé“¾</strong>ï¼šè¾“å…¥å»¶è¿Ÿé“¾å’Œè¾“å‡ºå»¶è¿Ÿé“¾</li>
                    <li><strong>å»¶è¿Ÿå•å…ƒæ•°</strong>ï¼šM + N ä¸ª</li>
                    <li><strong>ä¹˜æ³•å™¨æ•°</strong>ï¼šM + N + 1 ä¸ª</li>
                </ul>
                
                <div class="advantages-disadvantages">
                    <div class="advantages">
                        <h5>âœ… ä¼˜ç‚¹</h5>
                        <ul>
                            <li>ç»“æ„ç®€å•ï¼Œå®¹æ˜“ç†è§£</li>
                            <li>ç³»æ•°ä¸ä¼ é€’å‡½æ•°ç›´æ¥å¯¹åº”</li>
                            <li>ä¾¿äºçº§è”å’Œå¹¶è”</li>
                            <li>æ•°å€¼ç¨³å®šæ€§è¾ƒå¥½</li>
                        </ul>
                    </div>
                    <div class="disadvantages">
                        <h5>âŒ ç¼ºç‚¹</h5>
                        <ul>
                            <li>å»¶è¿Ÿå•å…ƒæ•°é‡å¤š</li>
                            <li>ä¸æ˜¯æœ€å°å»¶è¿Ÿç»“æ„</li>
                            <li>ç¡¬ä»¶èµ„æºæ¶ˆè€—å¤§</li>
                            <li>ç³»æ•°é‡åŒ–æ•æ„Ÿ</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="knowledge-point">
            <h3>2.2 ç›´æ¥å½¢å¼II (Direct Form II)</h3>
            
            <div class="structure-comparison">
                <h4>ç»“æ„ç‰¹ç‚¹</h4>
                <ul>
                    <li><strong>å…±äº«å»¶è¿Ÿé“¾</strong>ï¼šåªæœ‰ä¸€ä¸ªå»¶è¿Ÿé“¾</li>
                    <li><strong>æœ€å°å»¶è¿Ÿç»“æ„</strong>ï¼šå»¶è¿Ÿå•å…ƒæ•° = max(M, N)</li>
                    <li><strong>è§„èŒƒå½¢å¼</strong>ï¼šä¹Ÿç§°ä¸ºå…¸å‹ç›´æ¥å½¢å¼</li>
                    <li><strong>ä¸­é—´å˜é‡</strong>ï¼šw[n] = x[n] - âˆ‘a_k w[n-k]</li>
                </ul>
                
                <div class="formula">
                    w[n] = x[n] - âˆ‘(k=1 to N) a_k w[n-k]<br>
                    y[n] = âˆ‘(k=0 to M) b_k w[n-k]
                </div>
                
                <div class="advantages-disadvantages">
                    <div class="advantages">
                        <h5>âœ… ä¼˜ç‚¹</h5>
                        <ul>
                            <li>æœ€å°‘å»¶è¿Ÿå•å…ƒ</li>
                            <li>å­˜å‚¨éœ€æ±‚æœ€å°</li>
                            <li>ç¡¬ä»¶å®ç°é«˜æ•ˆ</li>
                            <li>é€‚åˆçº§è”å®ç°</li>
                        </ul>
                    </div>
                    <div class="disadvantages">
                        <h5>âŒ ç¼ºç‚¹</h5>
                        <ul>
                            <li>ä¸­é—´èŠ‚ç‚¹å¯èƒ½æº¢å‡º</li>
                            <li>é‡åŒ–å™ªå£°ç´¯ç§¯</li>
                            <li>å¯¹ç³»æ•°é‡åŒ–æ•æ„Ÿ</li>
                            <li>è°ƒè¯•ç›¸å¯¹å›°éš¾</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="knowledge-point">
            <h3>2.3 çº§è”å½¢å¼ (Cascade Form)</h3>
            
            <p>å°†é«˜é˜¶ä¼ é€’å‡½æ•°åˆ†è§£ä¸º<strong>äºŒé˜¶å­ç³»ç»Ÿçš„çº§è”</strong>ï¼š</p>
            
            <div class="formula">
                H(z) = H_0 âˆ(k=1 to K) H_k(z) = H_0 âˆ(k=1 to K) (b_{0k} + b_{1k}z^{-1} + b_{2k}z^{-2})/(1 + a_{1k}z^{-1} + a_{2k}z^{-2})
            </div>
            
            <div class="structure-comparison">
                <h4>è®¾è®¡è€ƒè™‘</h4>
                <ul>
                    <li><strong>æé›¶é…å¯¹</strong>ï¼šç›¸è¿‘çš„æç‚¹å’Œé›¶ç‚¹é…å¯¹</li>
                    <li><strong>å¢ç›Šåˆ†é…</strong>ï¼šé¿å…ä¸­é—´èŠ‚ç‚¹æº¢å‡º</li>
                    <li><strong>çº§è”æ¬¡åº</strong>ï¼šå½±å“é‡åŒ–å™ªå£°å’ŒåŠ¨æ€èŒƒå›´</li>
                    <li><strong>äºŒé˜¶èŠ‚æ•°</strong>ï¼šK = âŒˆN/2âŒ‰</li>
                </ul>
                
                <div class="advantages-disadvantages">
                    <div class="advantages">
                        <h5>âœ… ä¼˜ç‚¹</h5>
                        <ul>
                            <li>é‡åŒ–æ•ˆåº”å°</li>
                            <li>æç‚¹æ§åˆ¶ç²¾ç¡®</li>
                            <li>æ¨¡å—åŒ–è®¾è®¡</li>
                            <li>ä¾¿äºä¼˜åŒ–é…å¯¹</li>
                        </ul>
                    </div>
                    <div class="disadvantages">
                        <h5>âŒ ç¼ºç‚¹</h5>
                        <ul>
                            <li>ç»“æ„å¤æ‚</li>
                            <li>è®¡ç®—é‡ç•¥å¢</li>
                            <li>é…å¯¹éœ€è¦ä¼˜åŒ–</li>
                            <li>çº§è”æ¬¡åºæ•æ„Ÿ</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="knowledge-point">
            <h3>2.4 å¹¶è”å½¢å¼ (Parallel Form)</h3>
            
            <p>ä½¿ç”¨<strong>éƒ¨åˆ†åˆ†å¼åˆ†è§£</strong>å°†ä¼ é€’å‡½æ•°è¡¨ç¤ºä¸ºä¸€é˜¶å’ŒäºŒé˜¶å­ç³»ç»Ÿçš„å¹¶è”ï¼š</p>
            
            <div class="formula">
                H(z) = C + âˆ‘(k=1 to K1) A_k/(1 - p_k z^{-1}) + âˆ‘(k=1 to K2) (B_{0k} + B_{1k}z^{-1})/(1 + a_{1k}z^{-1} + a_{2k}z^{-2})
            </div>
            
            <div class="structure-comparison">
                <h4>ç‰¹ç‚¹åˆ†æ</h4>
                <ul>
                    <li><strong>å¹¶è¡Œè®¡ç®—</strong>ï¼šå„æ”¯è·¯å¯åŒæ—¶è®¡ç®—</li>
                    <li><strong>è¯¯å·®ç‹¬ç«‹</strong>ï¼šå„æ”¯è·¯é‡åŒ–è¯¯å·®ç›¸äº’ç‹¬ç«‹</li>
                    <li><strong>ç¨³å®šæ€§å¥½</strong>ï¼šå•ä¸ªæç‚¹æ§åˆ¶</li>
                    <li><strong>é€‚åˆæµæ°´çº¿</strong>ï¼šç¡¬ä»¶å¹¶è¡Œå®ç°å‹å¥½</li>
                </ul>
                
                <div class="advantages-disadvantages">
                    <div class="advantages">
                        <h5>âœ… ä¼˜ç‚¹</h5>
                        <ul>
                            <li>è®¡ç®—å¯å¹¶è¡Œ</li>
                            <li>é‡åŒ–å™ªå£°å°</li>
                            <li>ç¨³å®šæ€§æœ€å¥½</li>
                            <li>é€‚åˆVLSIå®ç°</li>
                        </ul>
                    </div>
                    <div class="disadvantages">
                        <h5>âŒ ç¼ºç‚¹</h5>
                        <ul>
                            <li>åŠ æ³•å™¨æ•°é‡å¤š</li>
                            <li>éƒ¨åˆ†åˆ†å¼åˆ†è§£å¤æ‚</li>
                            <li>ç³»æ•°ç²¾åº¦è¦æ±‚é«˜</li>
                            <li>é›¶ç‚¹å®ç°å¤æ‚</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="plot-container">
            <h3>IIRæ»¤æ³¢å™¨ç»“æ„å¯¹æ¯”æ¼”ç¤º</h3>
            <canvas id="iirStructureDemo" width="800" height="500"></canvas>
            <div class="controls">
                <label>IIRç»“æ„ç±»å‹ï¼š</label>
                <select id="iirStructureType">
                    <option value="direct1">ç›´æ¥å½¢å¼I</option>
                    <option value="direct2">ç›´æ¥å½¢å¼II</option>
                    <option value="cascade">çº§è”å½¢å¼</option>
                    <option value="parallel">å¹¶è”å½¢å¼</option>
                </select>
                <label>æ»¤æ³¢å™¨é˜¶æ•°ï¼š</label>
                <input type="range" id="iirOrder" min="2" max="6" step="1" value="4">
                <span id="iirOrderValue">4</span>
                <label>é‡åŒ–å­—é•¿ï¼š</label>
                <input type="range" id="wordLength" min="8" max="16" step="1" value="12">
                <span id="wordLengthValue">12</span> bits
                <button onclick="updateIIRStructure()">æ›´æ–°ç»“æ„åˆ†æ</button>
            </div>
            <div id="iirAnalysisResult" style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 5px;"></div>
        </div>
        
        <h2>3. FIRæ•°å­—æ»¤æ³¢å™¨çš„ç»“æ„</h2>
        
        <div class="fir-box">
            <h3>ğŸ”µ åŸºæœ¬ä¼ é€’å‡½æ•°å½¢å¼</h3>
            <p>FIRæ»¤æ³¢å™¨çš„ç³»ç»Ÿå‡½æ•°ï¼š</p>
            <div class="formula">
                H(z) = âˆ‘(k=0 to N-1) h[k] z^{-k}
            </div>
            <p>å¯¹åº”çš„å·®åˆ†æ–¹ç¨‹ï¼š</p>
            <div class="formula">
                y[n] = âˆ‘(k=0 to N-1) h[k] x[n-k]
            </div>
        </div>
        
        <div class="knowledge-point">
            <h3>3.1 ç›´æ¥å½¢å¼ (Direct Form)</h3>
            
            <div class="structure-comparison">
                <h4>ç»“æ„ç‰¹ç‚¹</h4>
                <ul>
                    <li><strong>æ¨ªæˆªæ»¤æ³¢å™¨</strong>ï¼šä¹Ÿç§°ä¸ºæŠ½å¤´å»¶è¿Ÿçº¿ç»“æ„</li>
                    <li><strong>å»¶è¿Ÿå•å…ƒæ•°</strong>ï¼šN-1 ä¸ª</li>
                    <li><strong>ä¹˜æ³•å™¨æ•°</strong>ï¼šN ä¸ª</li>
                    <li><strong>åŠ æ³•å™¨æ•°</strong>ï¼šN-1 ä¸ª</li>
                </ul>
                
                <div class="advantages-disadvantages">
                    <div class="advantages">
                        <h5>âœ… ä¼˜ç‚¹</h5>
                        <ul>
                            <li>ç»“æ„ç®€å•ç›´è§‚</li>
                            <li>æ€»æ˜¯ç¨³å®š</li>
                            <li>æ˜“äºå®ç°å’Œè°ƒè¯•</li>
                            <li>é€‚åˆå¹¶è¡Œè®¡ç®—</li>
                        </ul>
                    </div>
                    <div class="disadvantages">
                        <h5>âŒ ç¼ºç‚¹</h5>
                        <ul>
                            <li>è®¡ç®—é‡å¤§</li>
                            <li>æœªåˆ©ç”¨å¯¹ç§°æ€§</li>
                            <li>ç¡¬ä»¶èµ„æºæ¶ˆè€—å¤š</li>
                            <li>å®æ—¶æ€§è¦æ±‚é«˜</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="knowledge-point">
            <h3>3.2 çº¿æ€§ç›¸ä½ç»“æ„</h3>
            
            <p>åˆ©ç”¨çº¿æ€§ç›¸ä½FIRæ»¤æ³¢å™¨çš„<strong>å¯¹ç§°æ€§</strong>å‡å°‘è®¡ç®—é‡ï¼š</p>
            
            <div class="structure-types">
                <div class="structure-item">
                    <h4>ç¬¬ä¸€ç±»çº¿æ€§ç›¸ä½</h4>
                    <p><strong>Nä¸ºå¥‡æ•°ï¼Œå¶å¯¹ç§°</strong></p>
                    <div class="formula">h[n] = h[N-1-n]</div>
                    <ul>
                        <li>ä¹˜æ³•å™¨æ•°ï¼š(N+1)/2</li>
                        <li>ä¸­å¿ƒç‚¹ç‹¬ç«‹</li>
                        <li>é€‚åˆæ‰€æœ‰æ»¤æ³¢å™¨ç±»å‹</li>
                    </ul>
                </div>
                
                <div class="structure-item">
                    <h4>ç¬¬äºŒç±»çº¿æ€§ç›¸ä½</h4>
                    <p><strong>Nä¸ºå¶æ•°ï¼Œå¶å¯¹ç§°</strong></p>
                    <div class="formula">h[n] = h[N-1-n]</div>
                    <ul>
                        <li>ä¹˜æ³•å™¨æ•°ï¼šN/2</li>
                        <li>æ— ç‹¬ç«‹ä¸­å¿ƒç‚¹</li>
                        <li>ä¸é€‚åˆé«˜é€šæ»¤æ³¢å™¨</li>
                    </ul>
                </div>
                
                <div class="structure-item">
                    <h4>ç¬¬ä¸‰ç±»çº¿æ€§ç›¸ä½</h4>
                    <p><strong>Nä¸ºå¥‡æ•°ï¼Œå¥‡å¯¹ç§°</strong></p>
                    <div class="formula">h[n] = -h[N-1-n]</div>
                    <ul>
                        <li>ä¹˜æ³•å™¨æ•°ï¼š(N-1)/2</li>
                        <li>ä¸­å¿ƒç‚¹ä¸º0</li>
                        <li>é€‚åˆå¾®åˆ†å™¨ã€Hilbertå˜æ¢</li>
                    </ul>
                </div>
                
                <div class="structure-item">
                    <h4>ç¬¬å››ç±»çº¿æ€§ç›¸ä½</h4>
                    <p><strong>Nä¸ºå¶æ•°ï¼Œå¥‡å¯¹ç§°</strong></p>
                    <div class="formula">h[n] = -h[N-1-n]</div>
                    <ul>
                        <li>ä¹˜æ³•å™¨æ•°ï¼šN/2</li>
                        <li>æ— ç‹¬ç«‹ä¸­å¿ƒç‚¹</li>
                        <li>é€‚åˆå¾®åˆ†å™¨</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="knowledge-point">
            <h3>3.3 çº§è”å½¢å¼</h3>
            
            <p>å°†é•¿FIRæ»¤æ³¢å™¨åˆ†è§£ä¸º<strong>çŸ­FIRæ»¤æ³¢å™¨çš„çº§è”</strong>ï¼š</p>
            
            <div class="formula">
                H(z) = âˆ(k=1 to K) H_k(z)
            </div>
            
            <div class="structure-comparison">
                <h4>åˆ†è§£ç­–ç•¥</h4>
                <ul>
                    <li><strong>ç­‰é•¿åˆ†è§£</strong>ï¼šæ¯ä¸ªå­æ»¤æ³¢å™¨é•¿åº¦ç›¸ç­‰</li>
                    <li><strong>é¢‘ç‡åˆ†è§£</strong>ï¼šæŒ‰é¢‘å¸¦ç‰¹æ€§åˆ†è§£</li>
                    <li><strong>æœ€ä¼˜åˆ†è§£</strong>ï¼šæœ€å°åŒ–æ€»ä¹˜æ³•å™¨æ•°</li>
                    <li><strong>æ¨¡å—åŒ–è®¾è®¡</strong>ï¼šä¾¿äºç¡¬ä»¶å®ç°</li>
                </ul>
                
                <div class="advantages-disadvantages">
                    <div class="advantages">
                        <h5>âœ… ä¼˜ç‚¹</h5>
                        <ul>
                            <li>è®¡ç®—é‡å¯èƒ½å‡å°‘</li>
                            <li>ä¾¿äºæ¨¡å—åŒ–è®¾è®¡</li>
                            <li>å¯åˆ©ç”¨å¿«é€Ÿç®—æ³•</li>
                            <li>ä¾¿äºæµæ°´çº¿å®ç°</li>
                        </ul>
                    </div>
                    <div class="disadvantages">
                        <h5>âŒ ç¼ºç‚¹</h5>
                        <ul>
                            <li>è®¾è®¡å¤æ‚</li>
                            <li>å¯èƒ½å¢åŠ å»¶è¿Ÿ</li>
                            <li>åˆ†è§£ä¸å”¯ä¸€</li>
                            <li>ä¼˜åŒ–å›°éš¾</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="knowledge-point">
            <h3>3.4 å¤šç›¸ç»“æ„ (Polyphase Structure)</h3>
            
            <p>å°†FIRæ»¤æ³¢å™¨åˆ†è§£ä¸º<strong>å¤šä¸ªå­æ»¤æ³¢å™¨çš„å¤šç›¸å½¢å¼</strong>ï¼Œç‰¹åˆ«é€‚ç”¨äº<strong>å¤šç‡ä¿¡å·å¤„ç†</strong>ï¼š</p>
            
            <div class="formula">
                H(z) = âˆ‘(k=0 to M-1) z^{-k} E_k(z^M)
            </div>
            
            <div class="structure-comparison">
                <h4>å¤šç›¸åˆ†è§£</h4>
                <ul>
                    <li><strong>Mç›¸åˆ†è§£</strong>ï¼šh[n] æŒ‰ n mod M åˆ†ç»„</li>
                    <li><strong>é™é‡‡æ ·å‹å¥½</strong>ï¼šè‡ªç„¶é€‚åº”å¤šç‡å¤„ç†</li>
                    <li><strong>è®¡ç®—æ•ˆç‡</strong>ï¼šåœ¨ä½é‡‡æ ·ç‡ä¸Šè®¡ç®—</li>
                    <li><strong>ç¡¬ä»¶ä¼˜åŒ–</strong>ï¼šå‡å°‘è¿ç®—æ—¶é’Ÿé¢‘ç‡</li>
                </ul>
            </div>
        </div>
        
        <div class="lattice-box">
            <h3>3.5 æ ¼å‹ç»“æ„ (Lattice Structure)</h3>
            
            <p>æ ¼å‹ç»“æ„æ˜¯ä¸€ç§<strong>ç‰¹æ®Šçš„é€’å½’ç»“æ„</strong>ï¼Œå…·æœ‰ä¼˜è‰¯çš„æ•°å€¼ç‰¹æ€§ï¼š</p>
            
            <div class="formula">
                f_m[n] = f_{m-1}[n] + k_m g_{m-1}[n-1]<br>
                g_m[n] = g_{m-1}[n-1] + k_m f_{m-1}[n]
            </div>
            
            <div class="advantages-disadvantages">
                <div class="advantages">
                    <h5>âœ… ä¼˜ç‚¹</h5>
                    <ul>
                        <li>æ•°å€¼ç¨³å®šæ€§å¥½</li>
                        <li>ç³»æ•°é‡åŒ–ä¸æ•æ„Ÿ</li>
                        <li>æ¨¡å—åŒ–ç»“æ„</li>
                        <li>é€‚åˆè‡ªé€‚åº”æ»¤æ³¢</li>
                        <li>åå°„ç³»æ•°æœ‰ç•Œ</li>
                    </ul>
                </div>
                <div class="disadvantages">
                    <h5>âŒ ç¼ºç‚¹</h5>
                    <ul>
                        <li>è®¡ç®—é‡å¤§</li>
                        <li>å»¶è¿Ÿå¢åŠ </li>
                        <li>ç»“æ„å¤æ‚</li>
                        <li>ç³»æ•°è®¾è®¡å¤æ‚</li>
                        <li>ä¸é€‚åˆæ‰€æœ‰FIR</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="plot-container">
            <h3>FIRæ»¤æ³¢å™¨ç»“æ„å¯¹æ¯”æ¼”ç¤º</h3>
            <canvas id="firStructureDemo" width="800" height="500"></canvas>
            <div class="controls">
                <label>FIRç»“æ„ç±»å‹ï¼š</label>
                <select id="firStructureType">
                    <option value="direct">ç›´æ¥å½¢å¼</option>
                    <option value="linear_phase">çº¿æ€§ç›¸ä½å½¢å¼</option>
                    <option value="cascade">çº§è”å½¢å¼</option>
                    <option value="polyphase">å¤šç›¸å½¢å¼</option>
                </select>
                <label>æ»¤æ³¢å™¨é•¿åº¦ï¼š</label>
                <input type="range" id="firLength" min="8" max="32" step="4" value="16">
                <span id="firLengthValue">16</span>
                <label>çº¿æ€§ç›¸ä½ç±»å‹ï¼š</label>
                <select id="linearPhaseType">
                    <option value="type1">ç¬¬ä¸€ç±»(Nå¥‡,å¶å¯¹ç§°)</option>
                    <option value="type2">ç¬¬äºŒç±»(Nå¶,å¶å¯¹ç§°)</option>
                    <option value="type3">ç¬¬ä¸‰ç±»(Nå¥‡,å¥‡å¯¹ç§°)</option>
                    <option value="type4">ç¬¬å››ç±»(Nå¶,å¥‡å¯¹ç§°)</option>
                </select>
                <button onclick="updateFIRStructure()">æ›´æ–°ç»“æ„åˆ†æ</button>
            </div>
            <div id="firAnalysisResult" style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 5px;"></div>
        </div>
        
        <div class="plot-container">
            <h3>æ»¤æ³¢å™¨ç»“æ„æ€§èƒ½å¯¹æ¯”</h3>
            <canvas id="performanceComparison" width="800" height="400"></canvas>
            <div class="controls">
                <label>å¯¹æ¯”ç»´åº¦ï¼š</label>
                <select id="comparisonMetric">
                    <option value="multipliers">ä¹˜æ³•å™¨æ•°é‡</option>
                    <option value="memory">å­˜å‚¨éœ€æ±‚</option>
                    <option value="quantization">é‡åŒ–æ•æ„Ÿæ€§</option>
                    <option value="complexity">å®ç°å¤æ‚åº¦</option>
                </select>
                <label>æ»¤æ³¢å™¨é˜¶æ•°/é•¿åº¦ï¼š</label>
                <input type="range" id="filterSize" min="4" max="20" step="2" value="10">
                <span id="filterSizeValue">10</span>
                <button onclick="updatePerformanceComparison()">æ›´æ–°å¯¹æ¯”</button>
            </div>
        </div>
        
        <h2>é‡åŒ–æ•ˆåº”ä¸å®ç°è€ƒè™‘</h2>
        
        <div class="quantization-effects">
            <h3>âš ï¸ æœ‰é™å­—é•¿æ•ˆåº”</h3>
            
            <div class="structure-comparison">
                <h4>é‡åŒ–è¯¯å·®æ¥æº</h4>
                <ul>
                    <li><strong>ç³»æ•°é‡åŒ–</strong>ï¼šæ»¤æ³¢å™¨ç³»æ•°çš„æœ‰é™ç²¾åº¦è¡¨ç¤º</li>
                    <li><strong>è¾“å…¥é‡åŒ–</strong>ï¼šA/Dè½¬æ¢çš„é‡åŒ–è¯¯å·®</li>
                    <li><strong>è¿ç®—é‡åŒ–</strong>ï¼šä¹˜æ³•å’ŒåŠ æ³•è¿ç®—çš„èˆå…¥è¯¯å·®</li>
                    <li><strong>æº¢å‡ºæ•ˆåº”</strong>ï¼šè¿ç®—ç»“æœè¶…å‡ºè¡¨ç¤ºèŒƒå›´</li>
                </ul>
                
                <h4>ä¸åŒç»“æ„çš„æ•æ„Ÿæ€§</h4>
                <table>
                    <tr>
                        <th>ç»“æ„ç±»å‹</th>
                        <th>ç³»æ•°é‡åŒ–æ•æ„Ÿæ€§</th>
                        <th>èˆå…¥è¯¯å·®ç´¯ç§¯</th>
                        <th>æç‚¹ä½ç½®ç¨³å®šæ€§</th>
                        <th>æ¨èåº”ç”¨</th>
                    </tr>
                    <tr>
                        <td><strong>ç›´æ¥å½¢å¼I</strong></td>
                        <td>ä¸­ç­‰</td>
                        <td>è¾ƒå°</td>
                        <td>ä¸­ç­‰</td>
                        <td>ä½é˜¶æ»¤æ³¢å™¨</td>
                    </tr>
                    <tr>
                        <td><strong>ç›´æ¥å½¢å¼II</strong></td>
                        <td>è¾ƒé«˜</td>
                        <td>è¾ƒå¤§</td>
                        <td>è¾ƒå·®</td>
                        <td>é«˜æ•ˆå®ç°</td>
                    </tr>
                    <tr>
                        <td><strong>çº§è”å½¢å¼</strong></td>
                        <td>è¾ƒå°</td>
                        <td>å°</td>
                        <td>å¥½</td>
                        <td>é«˜é˜¶IIRæ»¤æ³¢å™¨</td>
                    </tr>
                    <tr>
                        <td><strong>å¹¶è”å½¢å¼</strong></td>
                        <td>æœ€å°</td>
                        <td>æœ€å°</td>
                        <td>æœ€å¥½</td>
                        <td>é«˜ç²¾åº¦è¦æ±‚</td>
                    </tr>
                    <tr>
                        <td><strong>æ ¼å‹ç»“æ„</strong></td>
                        <td>æœ€å°</td>
                        <td>å°</td>
                        <td>æœ€å¥½</td>
                        <td>è‡ªé€‚åº”æ»¤æ³¢</td>
                    </tr>
                </table>
            </div>
        </div>
        
        <h2>ç»ƒä¹ é¢˜ç›®</h2>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 1ï¼šç»“æ„åˆ†æ</h4>
            <p>ç»™å®š3é˜¶IIRæ»¤æ³¢å™¨ï¼šH(z) = (1 + 2zâ»Â¹ + zâ»Â²)/(1 - 0.5zâ»Â¹ + 0.25zâ»Â²)</p>
            <ol>
                <li>ç”»å‡ºç›´æ¥å½¢å¼Iå’Œç›´æ¥å½¢å¼IIçš„ä¿¡å·æµå›¾</li>
                <li>æ¯”è¾ƒä¸¤ç§ç»“æ„çš„å»¶è¿Ÿå•å…ƒæ•°å’Œä¹˜æ³•å™¨æ•°</li>
                <li>å†™å‡ºå¯¹åº”çš„å·®åˆ†æ–¹ç¨‹</li>
            </ol>
            <button class="show-answer" onclick="toggleAnswer('answer1')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer1" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                1. ç›´æ¥å½¢å¼Iï¼šä¸¤ä¸ªå»¶è¿Ÿé“¾ï¼Œè¾“å…¥é“¾2ä¸ªå»¶è¿Ÿï¼Œè¾“å‡ºé“¾2ä¸ªå»¶è¿Ÿ<br>
                   ç›´æ¥å½¢å¼IIï¼šä¸€ä¸ªå»¶è¿Ÿé“¾ï¼Œå…±äº«2ä¸ªå»¶è¿Ÿå•å…ƒ<br>
                2. ç›´æ¥å½¢å¼Iï¼šå»¶è¿Ÿå•å…ƒ4ä¸ªï¼Œä¹˜æ³•å™¨5ä¸ª<br>
                   ç›´æ¥å½¢å¼IIï¼šå»¶è¿Ÿå•å…ƒ2ä¸ªï¼Œä¹˜æ³•å™¨5ä¸ª<br>
                3. ç›´æ¥å½¢å¼IIå·®åˆ†æ–¹ç¨‹ï¼š<br>
                   w[n] = x[n] + 0.5w[n-1] - 0.25w[n-2]<br>
                   y[n] = w[n] + 2w[n-1] + w[n-2]
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 2ï¼šçº¿æ€§ç›¸ä½ç»“æ„</h4>
            <p>è®¾è®¡ä¸€ä¸ª15é˜¶çº¿æ€§ç›¸ä½FIRä½é€šæ»¤æ³¢å™¨ï¼Œå†²æ¿€å“åº”h[n]å…·æœ‰å¶å¯¹ç§°æ€§ã€‚</p>
            <ol>
                <li>ç¡®å®šçº¿æ€§ç›¸ä½ç±»å‹</li>
                <li>åˆ©ç”¨å¯¹ç§°æ€§ç®€åŒ–ç»“æ„</li>
                <li>è®¡ç®—æ‰€éœ€çš„ä¹˜æ³•å™¨æ•°é‡</li>
            </ol>
            <button class="show-answer" onclick="toggleAnswer('answer2')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer2" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                1. ç¬¬ä¸€ç±»çº¿æ€§ç›¸ä½ï¼ˆN=15ä¸ºå¥‡æ•°ï¼Œå¶å¯¹ç§°ï¼‰<br>
                2. åˆ©ç”¨h[n] = h[14-n]ï¼Œåªéœ€å­˜å‚¨8ä¸ªç‹¬ç«‹ç³»æ•°<br>
                3. ä¹˜æ³•å™¨æ•°é‡ï¼š(15+1)/2 = 8ä¸ªï¼ˆä¸­å¿ƒç³»æ•°h[7]ç‹¬ç«‹ï¼‰<br>
                4. ç»“æ„ï¼šå°†å¯¹ç§°çš„è¾“å…¥æ ·æœ¬å…ˆç›¸åŠ ï¼Œå†ä¸ç³»æ•°ç›¸ä¹˜
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 3ï¼šçº§è”ä¸å¹¶è”å½¢å¼</h4>
            <p>å°†IIRæ»¤æ³¢å™¨H(z) = 1/((1-0.5zâ»Â¹)(1+0.3zâ»Â¹+0.2zâ»Â²))åˆ†åˆ«ç”¨çº§è”å’Œå¹¶è”å½¢å¼å®ç°ã€‚</p>
            <button class="show-answer" onclick="toggleAnswer('answer3')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer3" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                <strong>çº§è”å½¢å¼ï¼š</strong><br>
                H(z) = Hâ‚(z) Ã— Hâ‚‚(z) = 1/(1-0.5zâ»Â¹) Ã— 1/(1+0.3zâ»Â¹+0.2zâ»Â²)<br>
                ä¸¤ä¸ªå­ç³»ç»Ÿçº§è”å®ç°<br><br>
                <strong>å¹¶è”å½¢å¼ï¼š</strong><br>
                ä½¿ç”¨éƒ¨åˆ†åˆ†å¼åˆ†è§£ï¼š<br>
                H(z) = A/(1-0.5zâ»Â¹) + (Bâ‚€+Bâ‚zâ»Â¹)/(1+0.3zâ»Â¹+0.2zâ»Â²)<br>
                é€šè¿‡ç•™æ•°å®šç†è®¡ç®—ç³»æ•°A, Bâ‚€, Bâ‚
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 4ï¼šé‡åŒ–æ•ˆåº”åˆ†æ</h4>
            <p>æ¯”è¾ƒç›´æ¥å½¢å¼IIå’Œçº§è”å½¢å¼å®ç°6é˜¶å·´ç‰¹æ²ƒæ€ä½é€šæ»¤æ³¢å™¨æ—¶çš„é‡åŒ–æ•æ„Ÿæ€§ã€‚</p>
            <button class="show-answer" onclick="toggleAnswer('answer4')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer4" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                <strong>ç›´æ¥å½¢å¼IIï¼š</strong><br>
                - 6ä¸ªæç‚¹ç³»æ•°ï¼Œé‡åŒ–è¯¯å·®ç›´æ¥å½±å“æ‰€æœ‰æç‚¹<br>
                - é«˜é˜¶åˆ†æ¯å¤šé¡¹å¼å¯¹ç³»æ•°å˜åŒ–æ•æ„Ÿ<br>
                - å¯èƒ½å¯¼è‡´æç‚¹ç§»å‡ºå•ä½åœ†<br><br>
                <strong>çº§è”å½¢å¼ï¼š</strong><br>
                - åˆ†è§£ä¸º3ä¸ªäºŒé˜¶èŠ‚ï¼Œæ¯èŠ‚2ä¸ªæç‚¹<br>
                - å„èŠ‚ç³»æ•°é‡åŒ–ç›¸äº’ç‹¬ç«‹<br>
                - äºŒé˜¶èŠ‚çš„æç‚¹ä½ç½®å¯¹ç³»æ•°å˜åŒ–ä¸æ•æ„Ÿ<br>
                - æ¨èç”¨äºé«˜é˜¶IIRæ»¤æ³¢å™¨
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 5ï¼šç»“æ„é€‰æ‹©</h4>
            <p>å¯¹äºä»¥ä¸‹åº”ç”¨åœºæ™¯ï¼Œé€‰æ‹©æœ€åˆé€‚çš„æ»¤æ³¢å™¨ç»“æ„ï¼š</p>
            <ol>
                <li>ä½åŠŸè€—åµŒå…¥å¼éŸ³é¢‘å¤„ç†å™¨ä¸­çš„3é˜¶é«˜é€šæ»¤æ³¢å™¨</li>
                <li>é«˜ç²¾åº¦ä»ªå™¨ä¸­çš„10é˜¶æŠ—æ··å æ»¤æ³¢å™¨</li>
                <li>é€šä¿¡ç³»ç»Ÿä¸­çš„64é˜¶FIRåŒ¹é…æ»¤æ³¢å™¨</li>
                <li>è‡ªé€‚åº”å™ªå£°æ¶ˆé™¤ç³»ç»Ÿä¸­çš„å¯å˜ç³»æ•°æ»¤æ³¢å™¨</li>
            </ol>
            <button class="show-answer" onclick="toggleAnswer('answer5')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer5" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                1. <strong>ç›´æ¥å½¢å¼II</strong> - ä½é˜¶IIRï¼Œæœ€å°‘å»¶è¿Ÿå•å…ƒï¼Œé€‚åˆä½åŠŸè€—<br>
                2. <strong>çº§è”å½¢å¼</strong> - é«˜é˜¶IIRï¼Œé‡åŒ–æ•æ„Ÿæ€§å°ï¼Œç²¾åº¦é«˜<br>
                3. <strong>çº¿æ€§ç›¸ä½ç»“æ„</strong> - åˆ©ç”¨å¯¹ç§°æ€§å‡å°‘ä¸€åŠä¹˜æ³•å™¨<br>
                4. <strong>æ ¼å‹ç»“æ„</strong> - ç³»æ•°æ›´æ–°ç¨³å®šï¼Œé€‚åˆè‡ªé€‚åº”ç®—æ³•
            </div>
        </div>
        
        <h2>å­¦ä¹ è¦ç‚¹æ€»ç»“</h2>
        
        <div class="important">
            <h3>ğŸ¯ æ ¸å¿ƒæŒæ¡è¦ç‚¹</h3>
            <ol>
                <li><strong>ç»“æ„åˆ†ç±»</strong>ï¼šæŒæ¡å„ç§æ»¤æ³¢å™¨ç»“æ„çš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯</li>
                <li><strong>è®¡ç®—å¤æ‚åº¦</strong>ï¼šåˆ†æä¹˜æ³•å™¨ã€åŠ æ³•å™¨ã€å»¶è¿Ÿå•å…ƒçš„æ•°é‡</li>
                <li><strong>é‡åŒ–æ•ˆåº”</strong>ï¼šç†è§£ä¸åŒç»“æ„å¯¹æœ‰é™å­—é•¿çš„æ•æ„Ÿæ€§</li>
                <li><strong>å®ç°æƒè¡¡</strong>ï¼šåœ¨æ€§èƒ½ã€å¤æ‚åº¦ã€ç¨³å®šæ€§é—´åšå‡ºå¹³è¡¡</li>
                <li><strong>çº¿æ€§ç›¸ä½</strong>ï¼šåˆ©ç”¨FIRå¯¹ç§°æ€§ä¼˜åŒ–ç»“æ„</li>
                <li><strong>çº§è”ä¸å¹¶è”</strong>ï¼šé«˜é˜¶æ»¤æ³¢å™¨çš„æ¨¡å—åŒ–å®ç°æ–¹æ³•</li>
            </ol>
        </div>
        
        <div class="structure-box">
            <h3>ğŸ”— ç»“æ„é€‰æ‹©æŒ‡å—</h3>
            <ul>
                <li><strong>ä½é˜¶IIR</strong>ï¼šç›´æ¥å½¢å¼IIï¼Œè®¡ç®—æ•ˆç‡é«˜</li>
                <li><strong>é«˜é˜¶IIR</strong>ï¼šçº§è”å½¢å¼ï¼Œé‡åŒ–æ•æ„Ÿæ€§å°</li>
                <li><strong>é«˜ç²¾åº¦è¦æ±‚</strong>ï¼šå¹¶è”å½¢å¼æˆ–æ ¼å‹ç»“æ„</li>
                <li><strong>FIRæ»¤æ³¢å™¨</strong>ï¼šä¼˜å…ˆè€ƒè™‘çº¿æ€§ç›¸ä½ç»“æ„</li>
                <li><strong>å®æ—¶ç³»ç»Ÿ</strong>ï¼šå…³æ³¨å»¶è¿Ÿå’Œè®¡ç®—å¤æ‚åº¦</li>
                <li><strong>è‡ªé€‚åº”ç³»ç»Ÿ</strong>ï¼šé€‰æ‹©ç³»æ•°æ›´æ–°ç¨³å®šçš„ç»“æ„</li>
            </ul>
        </div>
    </div>

    <script>
        // æ›´æ–°ä¿¡å·æµå›¾æ¼”ç¤º
        function updateSignalFlow() {
            const canvas = document.getElementById('signalFlowDemo');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            const filterType = document.getElementById('filterTypeDemo').value;
            const structureType = document.getElementById('structureTypeDemo').value;
            const order = parseInt(document.getElementById('orderDemo').value);
            
            document.getElementById('orderDemoValue').textContent = order;
            
            ctx.clearRect(0, 0, width, height);
            
            drawSignalFlowGraph(ctx, width, height, filterType, structureType, order);
        }
        
        function drawSignalFlowGraph(ctx, width, height, filterType, structureType, order) {
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            
            if (filterType === 'fir') {
                drawFIRSignalFlow(ctx, width, height, structureType, order);
            } else {
                drawIIRSignalFlow(ctx, width, height, structureType, order);
            }
        }
        
        function drawFIRSignalFlow(ctx, width, height, structureType, order) {
            const nodeSize = 30;
            const spacing = 80;
            const startX = 50;
            const centerY = height / 2;
            
            // æ ‡é¢˜
            ctx.fillStyle = '#2196f3';
            ctx.font = '16px Arial';
            ctx.fillText(`FIRæ»¤æ³¢å™¨ - ${getStructureName(structureType)} (é•¿åº¦=${order+1})`, width/2, 30);
            
            if (structureType === 'direct1') {
                // ç›´æ¥å½¢å¼ï¼šæ¨ªæˆªæ»¤æ³¢å™¨ç»“æ„
                
                // è¾“å…¥
                ctx.fillStyle = '#4caf50';
                ctx.fillRect(startX - nodeSize/2, centerY - nodeSize/2, nodeSize, nodeSize);
                ctx.fillStyle = 'white';
                ctx.fillText('x[n]', startX, centerY + 5);
                
                // å»¶è¿Ÿé“¾å’Œç³»æ•°
                for (let i = 0; i <= order; i++) {
                    const x = startX + (i + 1) * spacing;
                    
                    if (i < order) {
                        // å»¶è¿Ÿå•å…ƒ
                        ctx.fillStyle = '#ffeb3b';
                        ctx.fillRect(x - nodeSize/2, centerY - nodeSize/2, nodeSize, nodeSize);
                        ctx.fillStyle = 'black';
                        ctx.fillText('zâ»Â¹', x, centerY + 5);
                        
                        // è¿æ¥çº¿
                        ctx.strokeStyle = '#333';
                        ctx.lineWidth = 2;
                        ctx.beginPath();
                        ctx.moveTo(x - spacing + nodeSize/2, centerY);
                        ctx.lineTo(x - nodeSize/2, centerY);
                        ctx.stroke();
                    }
                    
                    // ç³»æ•°ä¹˜æ³•å™¨
                    const coeffY = centerY - 80;
                    ctx.fillStyle = '#2196f3';
                    ctx.fillRect(x - nodeSize/2, coeffY - nodeSize/2, nodeSize, nodeSize);
                    ctx.fillStyle = 'white';
                    ctx.fillText(`h[${i}]`, x, coeffY + 5);
                    
                    // è¿æ¥åˆ°å»¶è¿Ÿé“¾
                    ctx.strokeStyle = '#333';
                    ctx.lineWidth = 1;
                    ctx.beginPath();
                    ctx.moveTo(x, centerY - nodeSize/2);
                    ctx.lineTo(x, coeffY + nodeSize/2);
                    ctx.stroke();
                    
                    // åˆ†æ”¯ç‚¹
                    ctx.fillStyle = '#333';
                    ctx.beginPath();
                    ctx.arc(x, centerY, 3, 0, 2 * Math.PI);
                    ctx.fill();
                }
                
                // åŠ æ³•å™¨
                const outputY = centerY + 80;
                for (let i = 0; i <= order; i++) {
                    const x = startX + (i + 1) * spacing;
                    const coeffY = centerY - 80;
                    
                    // è¿æ¥åˆ°åŠ æ³•å™¨
                    ctx.strokeStyle = '#333';
                    ctx.lineWidth = 1;
                    ctx.beginPath();
                    ctx.moveTo(x, coeffY - nodeSize/2);
                    ctx.lineTo(x, outputY - 20);
                    ctx.stroke();
                }
                
                // è¾“å‡ºåŠ æ³•å™¨
                const outputX = startX + (order + 2) * spacing;
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(startX + spacing, outputY - 20);
                ctx.lineTo(outputX - 50, outputY - 20);
                ctx.stroke();
                
                ctx.fillStyle = '#4caf50';
                ctx.beginPath();
                ctx.arc(outputX - 50, outputY - 20, 15, 0, 2 * Math.PI);
                ctx.fill();
                ctx.fillStyle = 'white';
                ctx.fillText('+', outputX - 50, outputY - 15);
                
                // è¾“å‡º
                ctx.fillStyle = '#e74c3c';
                ctx.fillRect(outputX - nodeSize/2, outputY - nodeSize/2, nodeSize, nodeSize);
                ctx.fillStyle = 'white';
                ctx.fillText('y[n]', outputX, outputY + 5);
                
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(outputX - 50 + 15, outputY - 20);
                ctx.lineTo(outputX - nodeSize/2, outputY);
                ctx.stroke();
            }
        }
        
        function drawIIRSignalFlow(ctx, width, height, structureType, order) {
            const nodeSize = 30;
            const spacing = 80;
            const startX = 50;
            const centerY = height / 2;
            
            // æ ‡é¢˜
            ctx.fillStyle = '#9c27b0';
            ctx.font = '16px Arial';
            ctx.fillText(`IIRæ»¤æ³¢å™¨ - ${getStructureName(structureType)} (é˜¶æ•°=${order})`, width/2, 30);
            
            if (structureType === 'direct1') {
                drawIIRDirect1(ctx, width, height, order, startX, centerY, nodeSize, spacing);
            } else if (structureType === 'direct2') {
                drawIIRDirect2(ctx, width, height, order, startX, centerY, nodeSize, spacing);
            } else if (structureType === 'cascade') {
                drawIIRCascade(ctx, width, height, order, startX, centerY, nodeSize, spacing);
            }
        }
        
        function drawIIRDirect1(ctx, width, height, order, startX, centerY, nodeSize, spacing) {
            // ç®€åŒ–çš„ç›´æ¥å½¢å¼Iç»“æ„
            
            // è¾“å…¥
            ctx.fillStyle = '#4caf50';
            ctx.fillRect(startX - nodeSize/2, centerY - nodeSize/2, nodeSize, nodeSize);
            ctx.fillStyle = 'white';
            ctx.fillText('x[n]', startX, centerY + 5);
            
            // åˆ†å­éƒ¨åˆ†ï¼ˆå‰å‘è·¯å¾„ï¼‰
            const forwardY = centerY - 60;
            for (let i = 0; i <= order; i++) {
                const x = startX + (i + 1) * spacing;
                
                if (i > 0) {
                    // å»¶è¿Ÿå•å…ƒ
                    ctx.fillStyle = '#ffeb3b';
                    ctx.fillRect(x - nodeSize/2, forwardY - nodeSize/2, nodeSize, nodeSize);
                    ctx.fillStyle = 'black';
                    ctx.fillText('zâ»Â¹', x, forwardY + 5);
                }
                
                // ç³»æ•°ä¹˜æ³•å™¨
                ctx.fillStyle = '#2196f3';
                ctx.fillRect(x - nodeSize/2, forwardY - 60 - nodeSize/2, nodeSize, nodeSize);
                ctx.fillStyle = 'white';
                ctx.fillText(`b${i}`, x, forwardY - 60 + 5);
            }
            
            // åˆ†æ¯éƒ¨åˆ†ï¼ˆåé¦ˆè·¯å¾„ï¼‰
            const feedbackY = centerY + 60;
            for (let i = 1; i <= order; i++) {
                const x = startX + (i + 1) * spacing;
                
                // å»¶è¿Ÿå•å…ƒ
                ctx.fillStyle = '#ffeb3b';
                ctx.fillRect(x - nodeSize/2, feedbackY - nodeSize/2, nodeSize, nodeSize);
                ctx.fillStyle = 'black';
                ctx.fillText('zâ»Â¹', x, feedbackY + 5);
                
                // ç³»æ•°ä¹˜æ³•å™¨
                ctx.fillStyle = '#f44336';
                ctx.fillRect(x - nodeSize/2, feedbackY + 60 - nodeSize/2, nodeSize, nodeSize);
                ctx.fillStyle = 'white';
                ctx.fillText(`-a${i}`, x, feedbackY + 60 + 5);
            }
            
            // è¾“å‡ºåŠ æ³•å™¨
            const outputX = startX + (order + 2) * spacing;
            ctx.fillStyle = '#4caf50';
            ctx.beginPath();
            ctx.arc(outputX, centerY, 20, 0, 2 * Math.PI);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.fillText('+', outputX, centerY + 5);
            
            // è¾“å‡º
            ctx.fillStyle = '#e74c3c';
            ctx.fillRect(outputX + 40 - nodeSize/2, centerY - nodeSize/2, nodeSize, nodeSize);
            ctx.fillStyle = 'white';
            ctx.fillText('y[n]', outputX + 40, centerY + 5);
        }
        
        function drawIIRDirect2(ctx, width, height, order, startX, centerY, nodeSize, spacing) {
            // ç®€åŒ–çš„ç›´æ¥å½¢å¼IIç»“æ„
            
            // è¾“å…¥
            ctx.fillStyle = '#4caf50';
            ctx.fillRect(startX - nodeSize/2, centerY - nodeSize/2, nodeSize, nodeSize);
            ctx.fillStyle = 'white';
            ctx.fillText('x[n]', startX, centerY + 5);
            
            // ç¬¬ä¸€ä¸ªåŠ æ³•å™¨ï¼ˆåˆ†æ¯éƒ¨åˆ†ï¼‰
            const firstAdderX = startX + spacing;
            ctx.fillStyle = '#4caf50';
            ctx.beginPath();
            ctx.arc(firstAdderX, centerY, 15, 0, 2 * Math.PI);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.fillText('+', firstAdderX, centerY + 5);
            
            // å…±äº«å»¶è¿Ÿé“¾
            for (let i = 1; i <= order; i++) {
                const x = firstAdderX + i * spacing;
                
                // å»¶è¿Ÿå•å…ƒ
                ctx.fillStyle = '#ffeb3b';
                ctx.fillRect(x - nodeSize/2, centerY - nodeSize/2, nodeSize, nodeSize);
                ctx.fillStyle = 'black';
                ctx.fillText('zâ»Â¹', x, centerY + 5);
                
                // åé¦ˆç³»æ•°
                ctx.fillStyle = '#f44336';
                ctx.fillRect(x - nodeSize/2, centerY + 60 - nodeSize/2, nodeSize, nodeSize);
                ctx.fillStyle = 'white';
                ctx.fillText(`-a${i}`, x, centerY + 60 + 5);
                
                // å‰é¦ˆç³»æ•°
                ctx.fillStyle = '#2196f3';
                ctx.fillRect(x - nodeSize/2, centerY - 60 - nodeSize/2, nodeSize, nodeSize);
                ctx.fillStyle = 'white';
                ctx.fillText(`b${i}`, x, centerY - 60 + 5);
            }
            
            // b0ç³»æ•°
            ctx.fillStyle = '#2196f3';
            ctx.fillRect(firstAdderX - nodeSize/2, centerY - 60 - nodeSize/2, nodeSize, nodeSize);
            ctx.fillStyle = 'white';
            ctx.fillText('b0', firstAdderX, centerY - 60 + 5);
            
            // è¾“å‡ºåŠ æ³•å™¨
            const outputAdderX = firstAdderX + (order + 1) * spacing;
            ctx.fillStyle = '#4caf50';
            ctx.beginPath();
            ctx.arc(outputAdderX, centerY, 15, 0, 2 * Math.PI);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.fillText('+', outputAdderX, centerY + 5);
            
            // è¾“å‡º
            ctx.fillStyle = '#e74c3c';
            ctx.fillRect(outputAdderX + 40 - nodeSize/2, centerY - nodeSize/2, nodeSize, nodeSize);
            ctx.fillStyle = 'white';
            ctx.fillText('y[n]', outputAdderX + 40, centerY + 5);
        }
        
        function drawIIRCascade(ctx, width, height, order, startX, centerY, nodeSize, spacing) {
            // çº§è”å½¢å¼ï¼šäºŒé˜¶èŠ‚çš„çº§è”
            const numSections = Math.ceil(order / 2);
            const sectionWidth = 150;
            
            for (let section = 0; section < numSections; section++) {
                const sectionX = startX + section * (sectionWidth + 50);
                
                // äºŒé˜¶èŠ‚æ¡†æ¶
                ctx.strokeStyle = '#9c27b0';
                ctx.lineWidth = 2;
                ctx.strokeRect(sectionX, centerY - 40, sectionWidth, 80);
                
                // èŠ‚æ ‡ç­¾
                ctx.fillStyle = '#9c27b0';
                ctx.font = '12px Arial';
                ctx.fillText(`H${section + 1}(z)`, sectionX + sectionWidth/2, centerY - 50);
                
                // äºŒé˜¶èŠ‚å†…éƒ¨ç»“æ„ï¼ˆç®€åŒ–ï¼‰
                ctx.fillStyle = '#666';
                ctx.font = '10px Arial';
                ctx.fillText('äºŒé˜¶', sectionX + sectionWidth/2, centerY - 10);
                ctx.fillText('ç›´æ¥å½¢å¼II', sectionX + sectionWidth/2, centerY + 5);
                
                // è¿æ¥çº¿
                if (section < numSections - 1) {
                    ctx.strokeStyle = '#333';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(sectionX + sectionWidth, centerY);
                    ctx.lineTo(sectionX + sectionWidth + 50, centerY);
                    ctx.stroke();
                }
            }
            
            // è¾“å…¥è¾“å‡ºæ ‡è®°
            ctx.fillStyle = '#4caf50';
            ctx.font = '14px Arial';
            ctx.fillText('x[n]', startX - 30, centerY + 5);
            
            ctx.fillStyle = '#e74c3c';
            ctx.fillText('y[n]', startX + numSections * (sectionWidth + 50) - 20, centerY + 5);
        }
        
        function getStructureName(type) {
            const names = {
                'direct1': 'ç›´æ¥å½¢å¼I',
                'direct2': 'ç›´æ¥å½¢å¼II',
                'cascade': 'çº§è”å½¢å¼',
                'parallel': 'å¹¶è”å½¢å¼'
            };
            return names[type] || type;
        }
        
        // æ›´æ–°IIRç»“æ„æ¼”ç¤º
        function updateIIRStructure() {
            const canvas = document.getElementById('iirStructureDemo');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            const structureType = document.getElementById('iirStructureType').value;
            const order = parseInt(document.getElementById('iirOrder').value);
            const wordLength = parseInt(document.getElementById('wordLength').value);
            
            document.getElementById('iirOrderValue').textContent = order;
            document.getElementById('wordLengthValue').textContent = wordLength;
            
            ctx.clearRect(0, 0, width, height);
            
            drawIIRStructureAnalysis(ctx, width, height, structureType, order);
            updateIIRAnalysisResult(structureType, order, wordLength);
        }
        
        function drawIIRStructureAnalysis(ctx, width, height, structureType, order) {
            // ç»˜åˆ¶ç»“æ„ç‰¹æ€§åˆ†æå›¾
            const barHeight = 40;
            const barSpacing = 60;
            const startY = 50;
            const maxWidth = width - 200;
            
            // æ ‡é¢˜
            ctx.fillStyle = '#9c27b0';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`IIRæ»¤æ³¢å™¨ç»“æ„åˆ†æ - ${getStructureName(structureType)}`, width/2, 25);
            
            // è®¡ç®—å„é¡¹æŒ‡æ ‡
            const metrics = calculateIIRMetrics(structureType, order);
            const labels = ['å»¶è¿Ÿå•å…ƒ', 'ä¹˜æ³•å™¨', 'åŠ æ³•å™¨', 'é‡åŒ–æ•æ„Ÿæ€§', 'å®ç°å¤æ‚åº¦'];
            const colors = ['#ffeb3b', '#2196f3', '#4caf50', '#ff9800', '#e74c3c'];
            
            ctx.textAlign = 'left';
            ctx.font = '12px Arial';
            
            for (let i = 0; i < metrics.length; i++) {
                const y = startY + i * barSpacing;
                const barWidth = (metrics[i] / Math.max(...metrics)) * maxWidth;
                
                // æ ‡ç­¾
                ctx.fillStyle = '#333';
                ctx.fillText(labels[i], 20, y + barHeight/2 + 5);
                
                // æŸ±çŠ¶å›¾
                ctx.fillStyle = colors[i];
                ctx.fillRect(120, y, barWidth, barHeight);
                
                // æ•°å€¼
                ctx.fillStyle = '#333';
                ctx.fillText(metrics[i].toString(), 130 + barWidth, y + barHeight/2 + 5);
            }
        }
        
        function calculateIIRMetrics(structureType, order) {
            switch (structureType) {
                case 'direct1':
                    return [order * 2, order * 2 + 1, order * 2, 6, 3]; // å»¶è¿Ÿï¼Œä¹˜æ³•ï¼ŒåŠ æ³•ï¼Œé‡åŒ–æ•æ„Ÿæ€§ï¼Œå¤æ‚åº¦
                case 'direct2':
                    return [order, order * 2 + 1, order * 2, 8, 4];
                case 'cascade':
                    const sections = Math.ceil(order / 2);
                    return [sections * 2, sections * 5, sections * 4, 3, 6];
                case 'parallel':
                    return [sections * 2, sections * 3, order + 1, 2, 7];
                default:
                    return [0, 0, 0, 0, 0];
            }
        }
        
        function updateIIRAnalysisResult(structureType, order, wordLength) {
            const resultDiv = document.getElementById('iirAnalysisResult');
            const metrics = calculateIIRMetrics(structureType, order);
            
            // é‡åŒ–å™ªå£°ä¼°ç®—ï¼ˆç®€åŒ–ï¼‰
            const quantizationNoise = Math.pow(2, -wordLength) / Math.sqrt(12);
            const scaledNoise = quantizationNoise * metrics[3]; // ä¹˜ä»¥æ•æ„Ÿæ€§å› å­
            
            resultDiv.innerHTML = `
                <h4>${getStructureName(structureType)}ç»“æ„åˆ†æç»“æœ</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h5>ç¡¬ä»¶èµ„æºéœ€æ±‚</h5>
                        <ul>
                            <li><strong>å»¶è¿Ÿå•å…ƒï¼š</strong>${metrics[0]} ä¸ª</li>
                            <li><strong>ä¹˜æ³•å™¨ï¼š</strong>${metrics[1]} ä¸ª</li>
                            <li><strong>åŠ æ³•å™¨ï¼š</strong>${metrics[2]} ä¸ª</li>
                            <li><strong>å­˜å‚¨éœ€æ±‚ï¼š</strong>${metrics[0] + metrics[1]} å•å…ƒ</li>
                        </ul>
                    </div>
                    <div>
                        <h5>æ•°å€¼ç‰¹æ€§</h5>
                        <ul>
                            <li><strong>é‡åŒ–æ•æ„Ÿæ€§ï¼š</strong>${getQuantizationLevel(metrics[3])}</li>
                            <li><strong>å­—é•¿ï¼š</strong>${wordLength} bits</li>
                            <li><strong>ä¼°ç®—é‡åŒ–å™ªå£°ï¼š</strong>${scaledNoise.toExponential(2)}</li>
                            <li><strong>å®ç°å¤æ‚åº¦ï¼š</strong>${getComplexityLevel(metrics[4])}</li>
                        </ul>
                    </div>
                </div>
                <p><strong>æ¨èåº”ç”¨ï¼š</strong>${getRecommendation(structureType, order)}</p>
            `;
        }
        
        function getQuantizationLevel(level) {
            if (level <= 3) return 'ä½';
            if (level <= 6) return 'ä¸­ç­‰';
            return 'é«˜';
        }
        
        function getComplexityLevel(level) {
            if (level <= 3) return 'ç®€å•';
            if (level <= 6) return 'ä¸­ç­‰';
            return 'å¤æ‚';
        }
        
        function getRecommendation(structureType, order) {
            switch (structureType) {
                case 'direct1':
                    return order <= 4 ? 'é€‚åˆä½é˜¶æ»¤æ³¢å™¨ï¼Œç»“æ„æ¸…æ™°' : 'é«˜é˜¶æ—¶è€ƒè™‘å…¶ä»–ç»“æ„';
                case 'direct2':
                    return 'å­˜å‚¨æ•ˆç‡é«˜ï¼Œé€‚åˆèµ„æºå—é™çš„åº”ç”¨';
                case 'cascade':
                    return 'é«˜é˜¶æ»¤æ³¢å™¨çš„é¦–é€‰ï¼Œé‡åŒ–æ€§èƒ½å¥½';
                case 'parallel':
                    return 'æœ€ä½³æ•°å€¼æ€§èƒ½ï¼Œé€‚åˆé«˜ç²¾åº¦è¦æ±‚';
                default:
                    return 'æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©';
            }
        }
        
        // æ›´æ–°FIRç»“æ„æ¼”ç¤º
        function updateFIRStructure() {
            const canvas = document.getElementById('firStructureDemo');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            const structureType = document.getElementById('firStructureType').value;
            const length = parseInt(document.getElementById('firLength').value);
            const linearPhaseType = document.getElementById('linearPhaseType').value;
            
            document.getElementById('firLengthValue').textContent = length;
            
            ctx.clearRect(0, 0, width, height);
            
            drawFIRStructureAnalysis(ctx, width, height, structureType, length, linearPhaseType);
            updateFIRAnalysisResult(structureType, length, linearPhaseType);
        }
        
        function drawFIRStructureAnalysis(ctx, width, height, structureType, length, linearPhaseType) {
            // ç»˜åˆ¶FIRç»“æ„ç‰¹æ€§åˆ†æå›¾
            const barHeight = 35;
            const barSpacing = 50;
            const startY = 50;
            const maxWidth = width - 200;
            
            // æ ‡é¢˜
            ctx.fillStyle = '#2196f3';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`FIRæ»¤æ³¢å™¨ç»“æ„åˆ†æ - ${getFIRStructureName(structureType)}`, width/2, 25);
            
            // è®¡ç®—å„é¡¹æŒ‡æ ‡
            const metrics = calculateFIRMetrics(structureType, length, linearPhaseType);
            const labels = ['å»¶è¿Ÿå•å…ƒ', 'ä¹˜æ³•å™¨', 'åŠ æ³•å™¨', 'å¯¹ç§°æ€§åˆ©ç”¨', 'å¹¶è¡Œåº¦'];
            const colors = ['#ffeb3b', '#2196f3', '#4caf50', '#ff9800', '#9c27b0'];
            
            ctx.textAlign = 'left';
            ctx.font = '12px Arial';
            
            for (let i = 0; i < metrics.length; i++) {
                const y = startY + i * barSpacing;
                const barWidth = (metrics[i] / Math.max(...metrics)) * maxWidth;
                
                // æ ‡ç­¾
                ctx.fillStyle = '#333';
                ctx.fillText(labels[i], 20, y + barHeight/2 + 5);
                
                // æŸ±çŠ¶å›¾
                ctx.fillStyle = colors[i];
                ctx.fillRect(120, y, barWidth, barHeight);
                
                // æ•°å€¼
                ctx.fillStyle = '#333';
                ctx.fillText(metrics[i].toString(), 130 + barWidth, y + barHeight/2 + 5);
            }
            
            // å¯¹ç§°æ€§æ¼”ç¤º
            if (structureType === 'linear_phase') {
                drawSymmetryDemo(ctx, width, height, length, linearPhaseType);
            }
        }
        
        function drawSymmetryDemo(ctx, width, height, length, linearPhaseType) {
            const demoY = height - 150;
            const nodeSize = 15;
            const spacing = 30;
            const startX = 50;
            
            ctx.fillStyle = '#2196f3';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('å¯¹ç§°æ€§æ¼”ç¤º', width/2, demoY - 20);
            
            // ç»˜åˆ¶ç³»æ•°
            for (let i = 0; i < length; i++) {
                const x = startX + i * spacing;
                
                // åˆ¤æ–­å¯¹ç§°å…³ç³»
                let isSymmetric = false;
                let symmetricIndex = -1;
                
                if (linearPhaseType === 'type1' || linearPhaseType === 'type2') {
                    // å¶å¯¹ç§°
                    symmetricIndex = length - 1 - i;
                    isSymmetric = (i !== symmetricIndex) && (i < symmetricIndex);
                } else {
                    // å¥‡å¯¹ç§°
                    symmetricIndex = length - 1 - i;
                    isSymmetric = (i !== symmetricIndex) && (i < symmetricIndex);
                }
                
                // é¢œè‰²ç¼–ç 
                if (isSymmetric) {
                    ctx.fillStyle = '#4caf50'; // å¯¹ç§°çš„ç³»æ•°
                } else if (i === Math.floor(length / 2) && length % 2 === 1) {
                    ctx.fillStyle = '#ff9800'; // ä¸­å¿ƒç³»æ•°
                } else {
                    ctx.fillStyle = '#e0e0e0'; // ä»å±ç³»æ•°
                }
                
                ctx.beginPath();
                ctx.arc(x, demoY, nodeSize/2, 0, 2 * Math.PI);
                ctx.fill();
                
                // ç³»æ•°æ ‡å·
                ctx.fillStyle = '#333';
                ctx.font = '8px Arial';
                ctx.fillText(`h[${i}]`, x, demoY + 20);
            }
            
            // å¯¹ç§°æ€§è¿çº¿
            ctx.strokeStyle = '#4caf50';
            ctx.lineWidth = 1;
            ctx.setLineDash([3, 3]);
            
            for (let i = 0; i < Math.floor(length / 2); i++) {
                const x1 = startX + i * spacing;
                const x2 = startX + (length - 1 - i) * spacing;
                
                if (x1 !== x2) {
                    ctx.beginPath();
                    ctx.arc(x1, demoY - 30, 3, 0, 2 * Math.PI);
                    ctx.moveTo(x1, demoY - 30);
                    ctx.lineTo(x2, demoY - 30);
                    ctx.arc(x2, demoY - 30, 3, 0, 2 * Math.PI);
                    ctx.stroke();
                }
            }
            
            ctx.setLineDash([]);
        }
        
        function getFIRStructureName(type) {
            const names = {
                'direct': 'ç›´æ¥å½¢å¼',
                'linear_phase': 'çº¿æ€§ç›¸ä½å½¢å¼',
                'cascade': 'çº§è”å½¢å¼',
                'polyphase': 'å¤šç›¸å½¢å¼'
            };
            return names[type] || type;
        }
        
        function calculateFIRMetrics(structureType, length, linearPhaseType) {
            switch (structureType) {
                case 'direct':
                    return [length - 1, length, length - 1, 0, length];
                case 'linear_phase':
                    const multipliers = getLinearPhaseMultipliers(length, linearPhaseType);
                    return [length - 1, multipliers, multipliers - 1, 10, length/2];
                case 'cascade':
                    const sections = Math.ceil(Math.log2(length));
                    return [length - 1, length * 0.8, length - sections, 5, sections];
                case 'polyphase':
                    const phases = 4; // å‡è®¾4ç›¸åˆ†è§£
                    return [length - 1, length/phases, length/phases, 8, phases];
                default:
                    return [0, 0, 0, 0, 0];
            }
        }
        
        function getLinearPhaseMultipliers(length, type) {
            switch (type) {
                case 'type1': return Math.ceil(length / 2);
                case 'type2': return length / 2;
                case 'type3': return Math.floor(length / 2);
                case 'type4': return length / 2;
                default: return length;
            }
        }
        
        function updateFIRAnalysisResult(structureType, length, linearPhaseType) {
            const resultDiv = document.getElementById('firAnalysisResult');
            const metrics = calculateFIRMetrics(structureType, length, linearPhaseType);
            
            // è®¡ç®—èŠ‚çœçš„èµ„æº
            const directMultipliers = length;
            const actualMultipliers = metrics[1];
            const savings = ((directMultipliers - actualMultipliers) / directMultipliers * 100).toFixed(1);
            
            resultDiv.innerHTML = `
                <h4>${getFIRStructureName(structureType)}ç»“æ„åˆ†æç»“æœ</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h5>ç¡¬ä»¶èµ„æºéœ€æ±‚</h5>
                        <ul>
                            <li><strong>æ»¤æ³¢å™¨é•¿åº¦ï¼š</strong>${length}</li>
                            <li><strong>å»¶è¿Ÿå•å…ƒï¼š</strong>${metrics[0]} ä¸ª</li>
                            <li><strong>ä¹˜æ³•å™¨ï¼š</strong>${metrics[1]} ä¸ª</li>
                            <li><strong>åŠ æ³•å™¨ï¼š</strong>${metrics[2]} ä¸ª</li>
                        </ul>
                    </div>
                    <div>
                        <h5>æ€§èƒ½ç‰¹ç‚¹</h5>
                        <ul>
                            <li><strong>å¯¹ç§°æ€§åˆ©ç”¨ï¼š</strong>${metrics[3] > 0 ? 'æ˜¯' : 'å¦'}</li>
                            <li><strong>èµ„æºèŠ‚çœï¼š</strong>${savings}%</li>
                            <li><strong>å¹¶è¡Œåº¦ï¼š</strong>${getParallelismLevel(metrics[4])}</li>
                            <li><strong>çº¿æ€§ç›¸ä½ï¼š</strong>${structureType.includes('linear') ? 'ä¿è¯' : 'ä¸ä¿è¯'}</li>
                        </ul>
                    </div>
                </div>
                <p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong>${getFIRRecommendation(structureType, length)}</p>
            `;
        }
        
        function getParallelismLevel(level) {
            if (level >= 16) return 'é«˜';
            if (level >= 8) return 'ä¸­ç­‰';
            return 'ä½';
        }
        
        function getFIRRecommendation(structureType, length) {
            switch (structureType) {
                case 'direct':
                    return length <= 16 ? 'çŸ­æ»¤æ³¢å™¨çš„æ ‡å‡†å®ç°' : 'è€ƒè™‘ä½¿ç”¨ä¼˜åŒ–ç»“æ„';
                case 'linear_phase':
                    return 'åˆ©ç”¨å¯¹ç§°æ€§ï¼ŒèŠ‚çœçº¦50%çš„ä¹˜æ³•å™¨';
                case 'cascade':
                    return 'é•¿æ»¤æ³¢å™¨çš„æ¨¡å—åŒ–å®ç°ï¼Œä¾¿äºä¼˜åŒ–';
                case 'polyphase':
                    return 'å¤šç‡ä¿¡å·å¤„ç†çš„é«˜æ•ˆå®ç°';
                default:
                    return 'æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©';
            }
        }
        
        // æ›´æ–°æ€§èƒ½å¯¹æ¯”æ¼”ç¤º
        function updatePerformanceComparison() {
            const canvas = document.getElementById('performanceComparison');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            const metric = document.getElementById('comparisonMetric').value;
            const filterSize = parseInt(document.getElementById('filterSize').value);
            
            document.getElementById('filterSizeValue').textContent = filterSize;
            
            ctx.clearRect(0, 0, width, height);
            
            drawPerformanceChart(ctx, width, height, metric, filterSize);
        }
        
        function drawPerformanceChart(ctx, width, height, metric, filterSize) {
            const structures = ['Direct I', 'Direct II', 'Cascade', 'Parallel', 'FIR Direct', 'FIR Linear'];
            const colors = ['#e74c3c', '#3498db', '#9c27b0', '#ff9800', '#2196f3', '#4caf50'];
            
            // æ ‡é¢˜
            ctx.fillStyle = '#333';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`æ»¤æ³¢å™¨ç»“æ„æ€§èƒ½å¯¹æ¯” - ${getMetricName(metric)}`, width/2, 25);
            
            // è®¡ç®—å„ç»“æ„çš„æ€§èƒ½æ•°æ®
            const values = structures.map(structure => 
                calculatePerformanceMetric(structure, metric, filterSize)
            );
            
            // ç»˜åˆ¶æŸ±çŠ¶å›¾
            const barWidth = 80;
            const barSpacing = 20;
            const startX = 60;
            const maxValue = Math.max(...values);
            const scaleY = (height - 100) / maxValue;
            
            ctx.textAlign = 'center';
            ctx.font = '12px Arial';
            
            for (let i = 0; i < structures.length; i++) {
                const x = startX + i * (barWidth + barSpacing);
                const barHeight = values[i] * scaleY;
                const y = height - 50 - barHeight;
                
                // æŸ±çŠ¶å›¾
                ctx.fillStyle = colors[i];
                ctx.fillRect(x, y, barWidth, barHeight);
                
                // æ•°å€¼æ ‡ç­¾
                ctx.fillStyle = '#333';
                ctx.fillText(values[i].toString(), x + barWidth/2, y - 5);
                
                // ç»“æ„åç§°
                ctx.save();
                ctx.translate(x + barWidth/2, height - 30);
                ctx.rotate(-Math.PI / 6);
                ctx.fillText(structures[i], 0, 0);
                ctx.restore();
            }
            
            // Yè½´æ ‡ç­¾
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'right';
            for (let i = 0; i <= 5; i++) {
                const y = height - 50 - (maxValue * i / 5) * scaleY;
                const value = (maxValue * i / 5).toFixed(1);
                ctx.fillText(value, 50, y + 5);
            }
        }
        
        function getMetricName(metric) {
            const names = {
                'multipliers': 'ä¹˜æ³•å™¨æ•°é‡',
                'memory': 'å­˜å‚¨éœ€æ±‚ (å•å…ƒ)',
                'quantization': 'é‡åŒ–æ•æ„Ÿæ€§',
                'complexity': 'å®ç°å¤æ‚åº¦'
            };
            return names[metric] || metric;
        }
        
        function calculatePerformanceMetric(structure, metric, filterSize) {
            // ç®€åŒ–çš„æ€§èƒ½è®¡ç®—
            const metrics = {
                'Direct I': {
                    multipliers: filterSize * 2 + 1,
                    memory: filterSize * 2,
                    quantization: 6,
                    complexity: 3
                },
                'Direct II': {
                    multipliers: filterSize * 2 + 1,
                    memory: filterSize,
                    quantization: 8,
                    complexity: 4
                },
                'Cascade': {
                    multipliers: Math.ceil(filterSize/2) * 5,
                    memory: Math.ceil(filterSize/2) * 2,
                    quantization: 3,
                    complexity: 6
                },
                'Parallel': {
                    multipliers: Math.ceil(filterSize/2) * 3,
                    memory: Math.ceil(filterSize/2) * 2,
                    quantization: 2,
                    complexity: 7
                },
                'FIR Direct': {
                    multipliers: filterSize,
                    memory: filterSize,
                    quantization: 1,
                    complexity: 2
                },
                'FIR Linear': {
                    multipliers: Math.ceil(filterSize/2),
                    memory: filterSize,
                    quantization: 1,
                    complexity: 3
                }
            };
            
            return metrics[structure][metric] || 0;
        }
        
        // åˆ‡æ¢ç­”æ¡ˆæ˜¾ç¤º
        function toggleAnswer(answerId) {
            const answer = document.getElementById(answerId);
            answer.style.display = answer.style.display === 'none' ? 'block' : 'none';
        }
        
        // é¡µé¢åŠ è½½ååˆå§‹åŒ–
        window.onload = function() {
            updateSignalFlow();
            updateIIRStructure();
            updateFIRStructure();
            updatePerformanceComparison();
        };
    </script>
</body>
</html>