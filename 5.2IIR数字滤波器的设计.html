<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¿¡å·åˆ†æä¸å¤„ç† - IIRæ•°å­—æ»¤æ³¢å™¨çš„è®¾è®¡</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 30px;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        
        h2 {
            color: #34495e;
            border-left: 4px solid #3498db;
            padding-left: 15px;
            margin-top: 30px;
        }
        
        h3 {
            color: #2980b9;
            margin-top: 25px;
        }
        
        .knowledge-point {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .formula {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            font-family: 'Times New Roman', serif;
            font-size: 18px;
        }
        
        .important {
            background: #ffeaa7;
            border: 2px solid #fdcb6e;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .example {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .plot-container {
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        canvas {
            border: 1px solid #ccc;
            margin: 10px;
        }
        
        .controls {
            margin: 15px 0;
            text-align: center;
        }
        
        .controls input, .controls select {
            margin: 5px;
            padding: 5px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .controls button {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        
        .controls button:hover {
            background: #2980b9;
        }
        
        .exercise {
            background: #e8f5e8;
            border: 1px solid #c3e6c3;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .exercise h4 {
            color: #2e7d2e;
            margin-top: 0;
        }
        
        .answer {
            background: #f0f0f0;
            border-radius: 5px;
            padding: 10px;
            margin-top: 10px;
            display: none;
        }
        
        .show-answer {
            background: #28a745;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .show-answer:hover {
            background: #218838;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        
        th {
            background: #f2f2f2;
        }
        
        .highlight {
            background: #ffeb3b;
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .method-box {
            background: #e8f5e8;
            border: 2px solid #4caf50;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .bilinear-box {
            background: #e3f2fd;
            border: 2px solid #2196f3;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .comparison-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        
        .design-steps {
            background: #f0f8ff;
            border: 1px solid #87ceeb;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .design-steps ol {
            margin: 0;
            padding-left: 20px;
        }
        
        .frequency-mapping {
            background: #fff3e0;
            border: 1px solid #ffb74d;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .transformation-demo {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        
        .transformation-part {
            text-align: center;
            flex: 1;
            margin: 0 10px;
        }
        
        .warping-demo {
            background: #ffeee8;
            border: 1px solid #ff9800;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ä¿¡å·åˆ†æä¸å¤„ç† - IIRæ•°å­—æ»¤æ³¢å™¨çš„è®¾è®¡</h1>
        
        <div class="important">
            <h3>ğŸ¯ è®¾è®¡åŸºæœ¬æ€è·¯</h3>
            <p>IIRæ•°å­—æ»¤æ³¢å™¨è®¾è®¡çš„<strong>åŸºæœ¬æ€æƒ³</strong>ï¼šå€ŸåŠ©æˆç†Ÿçš„æ¨¡æ‹Ÿæ»¤æ³¢å™¨è®¾è®¡ç†è®ºï¼Œé€šè¿‡<strong>såŸŸåˆ°zåŸŸçš„æ˜ å°„</strong>å®ç°æ•°å­—æ»¤æ³¢å™¨è®¾è®¡ã€‚</p>
            <div class="formula">
                H_a(s) â†’ H(z)
            </div>
            <p>å…³é”®é—®é¢˜ï¼šå¦‚ä½•å»ºç«‹såŸŸä¸zåŸŸä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Ÿ</p>
        </div>
        
        <h2>1. å†²æ¿€å“åº”ä¸å˜æ³•</h2>
        
        <div class="method-box">
            <h3>ğŸŸ¢ åŸºæœ¬åŸç†</h3>
            <p>å†²æ¿€å“åº”ä¸å˜æ³•çš„æ ¸å¿ƒæ€æƒ³ï¼š<strong>æ•°å­—æ»¤æ³¢å™¨çš„å†²æ¿€å“åº”åºåˆ—h[n]ç­‰äºæ¨¡æ‹Ÿæ»¤æ³¢å™¨å†²æ¿€å“åº”ha(t)çš„é‡‡æ ·</strong>ã€‚</p>
            <div class="formula">
                h[n] = T Â· ha(nT), n = 0, 1, 2, ...
            </div>
            <p>å…¶ä¸­Tæ˜¯é‡‡æ ·å‘¨æœŸã€‚</p>
        </div>
        
        <div class="knowledge-point">
            <h3>å˜æ¢å…¬å¼æ¨å¯¼</h3>
            
            <h4>såŸŸåˆ°zåŸŸçš„æ˜ å°„å…³ç³»</h4>
            <div class="formula">
                s = Ïƒ + jÎ© â†’ z = e^{sT} = e^{ÏƒT}e^{jÎ©T}
            </div>
            
            <h4>éƒ¨åˆ†åˆ†å¼åˆ†è§£æ³•</h4>
            <p>å¯¹äºæ¨¡æ‹Ÿæ»¤æ³¢å™¨ä¼ é€’å‡½æ•°ï¼š</p>
            <div class="formula">
                H_a(s) = âˆ‘(k=1 to N) A_k/(s - s_k)
            </div>
            
            <p>å¯¹åº”çš„æ•°å­—æ»¤æ³¢å™¨ä¼ é€’å‡½æ•°ï¼š</p>
            <div class="formula">
                H(z) = âˆ‘(k=1 to N) A_k/(1 - e^{s_k T}z^{-1})
            </div>
            
            <div class="example">
                <h4>æ˜ å°„å…³ç³»ç‰¹ç‚¹</h4>
                <ul>
                    <li><strong>å·¦åŠså¹³é¢</strong> â†’ <strong>å•ä½åœ†å†…</strong>ï¼šä¿æŒç¨³å®šæ€§</li>
                    <li><strong>jÎ©è½´</strong> â†’ <strong>å•ä½åœ†</strong>ï¼šé¢‘ç‡è½´æ˜ å°„</li>
                    <li><strong>å¤šå€¼æ˜ å°„</strong>ï¼šÎ©å’ŒÎ©+2Ï€/Tæ˜ å°„åˆ°åŒä¸€ç‚¹</li>
                </ul>
            </div>
        </div>
        
        <div class="design-steps">
            <h3>ğŸ”§ è®¾è®¡æ­¥éª¤</h3>
            <ol>
                <li><strong>ç¡®å®šé‡‡æ ·é¢‘ç‡</strong>ï¼šé€‰æ‹©åˆé€‚çš„é‡‡æ ·å‘¨æœŸT</li>
                <li><strong>è®¾è®¡æ¨¡æ‹ŸåŸå‹</strong>ï¼šè®¾è®¡æ»¡è¶³æŒ‡æ ‡çš„Ha(s)</li>
                <li><strong>éƒ¨åˆ†åˆ†å¼åˆ†è§£</strong>ï¼šå°†Ha(s)åˆ†è§£ä¸ºç®€å•åˆ†å¼ä¹‹å’Œ</li>
                <li><strong>åº”ç”¨å˜æ¢å…¬å¼</strong>ï¼šé€é¡¹è¿›è¡Œsâ†’zå˜æ¢</li>
                <li><strong>åˆå¹¶åŒç±»é¡¹</strong>ï¼šå¾—åˆ°æœ€ç»ˆçš„H(z)</li>
            </ol>
        </div>
        
        <div class="important">
            <h3>âš ï¸ ä¼˜ç¼ºç‚¹åˆ†æ</h3>
            <div class="comparison-grid">
                <div class="comparison-item">
                    <h4>âœ… ä¼˜ç‚¹</h4>
                    <ul>
                        <li>ä¿æŒæ—¶åŸŸç‰¹æ€§</li>
                        <li>ç¨³å®šæ€§ä¿æŒ</li>
                        <li>è®¾è®¡è¿‡ç¨‹ç›´è§‚</li>
                        <li>é€‚åˆæ—¶åŸŸè®¾è®¡è¦æ±‚</li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h4>âŒ ç¼ºç‚¹</h4>
                    <ul>
                        <li>å­˜åœ¨é¢‘è°±æ··å </li>
                        <li>é«˜é¢‘ç‰¹æ€§å·®</li>
                        <li>ä¸é€‚åˆé«˜é€šã€å¸¦é˜»</li>
                        <li>éœ€è¦æ»¡è¶³é‡‡æ ·å®šç†</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="plot-container">
            <h3>å†²æ¿€å“åº”ä¸å˜æ³•æ¼”ç¤º</h3>
            <canvas id="impulseInvariantDemo" width="800" height="400"></canvas>
            <div class="controls">
                <label>æ¨¡æ‹Ÿæ»¤æ³¢å™¨ç±»å‹ï¼š</label>
                <select id="analogFilterType">
                    <option value="butterworth">å·´ç‰¹æ²ƒæ€</option>
                    <option value="chebyshev">åˆ‡æ¯”é›ªå¤«</option>
                </select>
                <label>æ»¤æ³¢å™¨é˜¶æ•°ï¼š</label>
                <input type="range" id="filterOrder1" min="2" max="6" step="1" value="3">
                <span id="orderValue1">3</span>
                <label>é‡‡æ ·é¢‘ç‡ï¼š</label>
                <input type="range" id="samplingFreq" min="5" max="20" step="1" value="10">
                <span id="samplingValue">10</span> Hz
                <button onclick="updateImpulseInvariant()">æ›´æ–°æ¼”ç¤º</button>
            </div>
        </div>
        
        <h2>2. åŒçº¿æ€§å˜æ¢æ³•</h2>
        
        <div class="bilinear-box">
            <h3>ğŸ”µ åŸºæœ¬åŸç†</h3>
            <p>åŒçº¿æ€§å˜æ¢æ³•é€šè¿‡<strong>æ•°å€¼ç§¯åˆ†çš„æ¢¯å½¢å…¬å¼</strong>å»ºç«‹såŸŸä¸zåŸŸçš„æ˜ å°„å…³ç³»ï¼Œé¿å…äº†é¢‘è°±æ··å é—®é¢˜ã€‚</p>
            
            <h4>å˜æ¢å…¬å¼</h4>
            <div class="formula">
                s = (2/T) Â· (1 - z^{-1})/(1 + z^{-1})
            </div>
            
            <p>æˆ–è€…é€†å˜æ¢ï¼š</p>
            <div class="formula">
                z = (1 + sT/2)/(1 - sT/2)
            </div>
        </div>
        
        <div class="knowledge-point">
            <h3>é¢‘ç‡æ˜ å°„å…³ç³»</h3>
            
            <h4>æ¨¡æ‹Ÿé¢‘ç‡ä¸æ•°å­—é¢‘ç‡çš„å…³ç³»</h4>
            <div class="formula">
                Î© = (2/T) tan(Ï‰T/2)
            </div>
            
            <p>æˆ–è€…ï¼š</p>
            <div class="formula">
                Ï‰ = 2 arctan(Î©T/2)
            </div>
            
            <div class="warping-demo">
                <h4>ğŸŒ€ é¢‘ç‡å¼¯æ›²ç°è±¡</h4>
                <p>åŒçº¿æ€§å˜æ¢å¼•å…¥<strong>é¢‘ç‡å¼¯æ›²(Frequency Warping)</strong>ï¼š</p>
                <ul>
                    <li><strong>ä½é¢‘æ®µ</strong>ï¼šè¿‘ä¼¼çº¿æ€§å…³ç³» Ï‰ â‰ˆ Î©T</li>
                    <li><strong>é«˜é¢‘æ®µ</strong>ï¼šä¸¥é‡éçº¿æ€§ï¼ŒÏ‰ â†’ Ï€ å½“ Î© â†’ âˆ</li>
                    <li><strong>å…³é”®é¢‘ç‡</strong>ï¼šå‡†ç¡®æ˜ å°„ï¼Œå…¶ä»–é¢‘ç‡å¤±çœŸ</li>
                </ul>
            </div>
        </div>
        
        <div class="design-steps">
            <h3>ğŸ”§ è®¾è®¡æ­¥éª¤</h3>
            <ol>
                <li><strong>é¢‘ç‡é¢„ç•¸å˜</strong>ï¼šå°†æ•°å­—é¢‘ç‡æŒ‡æ ‡è½¬æ¢ä¸ºæ¨¡æ‹Ÿé¢‘ç‡æŒ‡æ ‡</li>
                <li><strong>è®¾è®¡æ¨¡æ‹ŸåŸå‹</strong>ï¼šæŒ‰é¢„ç•¸å˜åçš„æŒ‡æ ‡è®¾è®¡Ha(s)</li>
                <li><strong>åº”ç”¨åŒçº¿æ€§å˜æ¢</strong>ï¼šå°†sæ›¿æ¢ä¸º(2/T)(1-z^{-1})/(1+z^{-1})</li>
                <li><strong>åŒ–ç®€è¡¨è¾¾å¼</strong>ï¼šå¾—åˆ°æœ€ç»ˆçš„H(z)</li>
            </ol>
        </div>
        
        <div class="frequency-mapping">
            <h3>ğŸ“Š é¢„ç•¸å˜å…¬å¼</h3>
            <p>è®¾è®¡å‰éœ€è¦å¯¹å…³é”®é¢‘ç‡è¿›è¡Œé¢„ç•¸å˜ï¼š</p>
            <div class="formula">
                Î©_p = (2/T) tan(Ï‰_p T/2)<br>
                Î©_s = (2/T) tan(Ï‰_s T/2)
            </div>
            <p>å…¶ä¸­Ï‰pã€Ï‰sæ˜¯æ•°å­—æ»¤æ³¢å™¨çš„é€šå¸¦ã€é˜»å¸¦æˆªæ­¢é¢‘ç‡ã€‚</p>
        </div>
        
        <div class="important">
            <h3>âš ï¸ ä¼˜ç¼ºç‚¹åˆ†æ</h3>
            <div class="comparison-grid">
                <div class="comparison-item">
                    <h4>âœ… ä¼˜ç‚¹</h4>
                    <ul>
                        <li>æ— é¢‘è°±æ··å </li>
                        <li>ç¨³å®šæ€§ä¿æŒ</li>
                        <li>é€‚ç”¨äºæ‰€æœ‰æ»¤æ³¢å™¨ç±»å‹</li>
                        <li>è®¾è®¡æ–¹æ³•æˆç†Ÿ</li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h4>âŒ ç¼ºç‚¹</h4>
                    <ul>
                        <li>é¢‘ç‡å¼¯æ›²ç°è±¡</li>
                        <li>éœ€è¦é¢„ç•¸å˜</li>
                        <li>æ—¶åŸŸç‰¹æ€§æ”¹å˜</li>
                        <li>é«˜é¢‘æ®µå¤±çœŸè¾ƒå¤§</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="plot-container">
            <h3>åŒçº¿æ€§å˜æ¢æ³•æ¼”ç¤º</h3>
            <canvas id="bilinearDemo" width="800" height="400"></canvas>
            <div class="controls">
                <label>æ¨¡æ‹Ÿæ»¤æ³¢å™¨ç±»å‹ï¼š</label>
                <select id="analogFilterType2">
                    <option value="butterworth">å·´ç‰¹æ²ƒæ€</option>
                    <option value="chebyshev">åˆ‡æ¯”é›ªå¤«</option>
                </select>
                <label>æ»¤æ³¢å™¨é˜¶æ•°ï¼š</label>
                <input type="range" id="filterOrder2" min="2" max="6" step="1" value="3">
                <span id="orderValue2">3</span>
                <label>é‡‡æ ·é¢‘ç‡ï¼š</label>
                <input type="range" id="samplingFreq2" min="5" max="20" step="1" value="10">
                <span id="samplingValue2">10</span> Hz
                <button onclick="updateBilinear()">æ›´æ–°æ¼”ç¤º</button>
            </div>
        </div>
        
        <div class="plot-container">
            <h3>é¢‘ç‡å¼¯æ›²æ•ˆåº”æ¼”ç¤º</h3>
            <canvas id="warpingDemo" width="800" height="300"></canvas>
            <div class="controls">
                <label>é‡‡æ ·é¢‘ç‡fsï¼š</label>
                <input type="range" id="warpingFs" min="5" max="50" step="5" value="20">
                <span id="warpingFsValue">20</span> Hz
                <button onclick="updateWarping()">æ›´æ–°å¼¯æ›²å›¾</button>
            </div>
        </div>
        
        <h2>3. ä¸¤ç§æ–¹æ³•å¯¹æ¯”</h2>
        
        <div class="knowledge-point">
            <h3>å¯¹æ¯”æ€»ç»“</h3>
            <table>
                <tr>
                    <th>ç‰¹æ€§</th>
                    <th>å†²æ¿€å“åº”ä¸å˜æ³•</th>
                    <th>åŒçº¿æ€§å˜æ¢æ³•</th>
                </tr>
                <tr>
                    <td><strong>s-zæ˜ å°„</strong></td>
                    <td>z = e^{sT}</td>
                    <td>s = (2/T)(1-z^{-1})/(1+z^{-1})</td>
                </tr>
                <tr>
                    <td><strong>é¢‘ç‡æ˜ å°„</strong></td>
                    <td>Ï‰ = Î©Tï¼ˆå­˜åœ¨æ··å ï¼‰</td>
                    <td>Î© = (2/T)tan(Ï‰T/2)ï¼ˆå¼¯æ›²ï¼‰</td>
                </tr>
                <tr>
                    <td><strong>ç¨³å®šæ€§</strong></td>
                    <td>ä¿æŒ</td>
                    <td>ä¿æŒ</td>
                </tr>
                <tr>
                    <td><strong>æ—¶åŸŸç‰¹æ€§</strong></td>
                    <td>ä¿æŒè„‰å†²å“åº”å½¢çŠ¶</td>
                    <td>æ”¹å˜è„‰å†²å“åº”</td>
                </tr>
                <tr>
                    <td><strong>é¢‘åŸŸç‰¹æ€§</strong></td>
                    <td>ä½é¢‘å¥½ï¼Œé«˜é¢‘å·®</td>
                    <td>éœ€è¦é¢„ç•¸å˜è¡¥å¿</td>
                </tr>
                <tr>
                    <td><strong>é€‚ç”¨ç±»å‹</strong></td>
                    <td>ä½é€šã€å¸¦é€š</td>
                    <td>æ‰€æœ‰ç±»å‹</td>
                </tr>
                <tr>
                    <td><strong>è®¾è®¡å¤æ‚åº¦</strong></td>
                    <td>è¾ƒå¤æ‚ï¼ˆéƒ¨åˆ†åˆ†å¼ï¼‰</td>
                    <td>è¾ƒç®€å•ï¼ˆç›´æ¥æ›¿æ¢ï¼‰</td>
                </tr>
            </table>
        </div>
        
        <h2>4. å…¶ä»–ç±»å‹IIRæ•°å­—æ»¤æ³¢å™¨è®¾è®¡</h2>
        
        <div class="knowledge-point">
            <h3>é¢‘ç‡å˜æ¢åœ¨æ•°å­—åŸŸçš„åº”ç”¨</h3>
            <p>ä¸æ¨¡æ‹Ÿæ»¤æ³¢å™¨ç±»ä¼¼ï¼Œå¯ä»¥é€šè¿‡<strong>æ•°å­—é¢‘ç‡å˜æ¢</strong>ä»ä½é€šåŸå‹è®¾è®¡å…¶ä»–ç±»å‹çš„æ•°å­—æ»¤æ³¢å™¨ã€‚</p>
            
            <h4>æ•°å­—é¢‘ç‡å˜æ¢å…¬å¼</h4>
            
            <h5>1. ä½é€šåˆ°é«˜é€šå˜æ¢</h5>
            <div class="formula">
                z^{-1} â†’ -z^{-1}
            </div>
            
            <h5>2. ä½é€šåˆ°å¸¦é€šå˜æ¢</h5>
            <div class="formula">
                z^{-1} â†’ -[(z^{-1} - Î±)/(Î±z^{-1} - 1)]
            </div>
            <p>å…¶ä¸­ Î± = cos((Ï‰l + Ï‰h)/2) / cos((Ï‰h - Ï‰l)/2)</p>
            
            <h5>3. ä½é€šåˆ°å¸¦é˜»å˜æ¢</h5>
            <div class="formula">
                z^{-1} â†’ [(z^{-1} - Î±)/(Î±z^{-1} - 1)]
            </div>
        </div>
        
        <div class="design-steps">
            <h3>ğŸ”§ é€šç”¨è®¾è®¡æµç¨‹</h3>
            <ol>
                <li><strong>è§„æ ¼åŒ–</strong>ï¼šå°†æ•°å­—æ»¤æ³¢å™¨æŒ‡æ ‡è½¬æ¢ä¸ºè§„æ ¼åŒ–ä½é€šæŒ‡æ ‡</li>
                <li><strong>è®¾è®¡ä½é€šåŸå‹</strong>ï¼šç”¨åŒçº¿æ€§å˜æ¢æ³•è®¾è®¡æ•°å­—ä½é€šåŸå‹</li>
                <li><strong>é¢‘ç‡å˜æ¢</strong>ï¼šåº”ç”¨ç›¸åº”çš„æ•°å­—é¢‘ç‡å˜æ¢</li>
                <li><strong>éªŒè¯æŒ‡æ ‡</strong>ï¼šæ£€æŸ¥è®¾è®¡ç»“æœæ˜¯å¦æ»¡è¶³è¦æ±‚</li>
            </ol>
        </div>
        
        <div class="plot-container">
            <h3>æ•°å­—é¢‘ç‡å˜æ¢æ¼”ç¤º</h3>
            <div class="transformation-demo">
                <div class="transformation-part">
                    <canvas id="prototypeFilter" width="250" height="200"></canvas>
                    <p>ä½é€šåŸå‹</p>
                </div>
                <div class="transformation-part">
                    <canvas id="transformedFilter" width="250" height="200"></canvas>
                    <p>å˜æ¢åæ»¤æ³¢å™¨</p>
                </div>
            </div>
            <div class="controls">
                <label>ç›®æ ‡æ»¤æ³¢å™¨ç±»å‹ï¼š</label>
                <select id="targetFilterType">
                    <option value="highpass">é«˜é€šæ»¤æ³¢å™¨</option>
                    <option value="bandpass">å¸¦é€šæ»¤æ³¢å™¨</option>
                    <option value="bandstop">å¸¦é˜»æ»¤æ³¢å™¨</option>
                </select>
                <label>æˆªæ­¢é¢‘ç‡1ï¼š</label>
                <input type="range" id="cutoff1" min="0.1" max="0.4" step="0.02" value="0.2">
                <span id="cutoff1Value">0.2</span>Ï€
                <label>æˆªæ­¢é¢‘ç‡2ï¼š</label>
                <input type="range" id="cutoff2" min="0.4" max="0.8" step="0.02" value="0.6">
                <span id="cutoff2Value">0.6</span>Ï€
                <button onclick="updateDigitalTransform()">åº”ç”¨å˜æ¢</button>
            </div>
        </div>
        
        <div class="plot-container">
            <h3>IIRæ•°å­—æ»¤æ³¢å™¨è®¾è®¡å™¨</h3>
            <canvas id="iirDesigner" width="800" height="300"></canvas>
            <div class="controls">
                <label>è®¾è®¡æ–¹æ³•ï¼š</label>
                <select id="designMethod">
                    <option value="bilinear">åŒçº¿æ€§å˜æ¢</option>
                    <option value="impulse">å†²æ¿€å“åº”ä¸å˜</option>
                </select>
                <label>æ»¤æ³¢å™¨ç±»å‹ï¼š</label>
                <select id="filterType">
                    <option value="lowpass">ä½é€š</option>
                    <option value="highpass">é«˜é€š</option>
                    <option value="bandpass">å¸¦é€š</option>
                    <option value="bandstop">å¸¦é˜»</option>
                </select>
                <label>åŸå‹ç±»å‹ï¼š</label>
                <select id="prototypeType">
                    <option value="butterworth">å·´ç‰¹æ²ƒæ€</option>
                    <option value="chebyshev1">åˆ‡æ¯”é›ªå¤«Iå‹</option>
                </select>
                <label>é˜¶æ•°ï¼š</label>
                <input type="range" id="designOrder" min="2" max="8" step="1" value="4">
                <span id="designOrderValue">4</span>
                <button onclick="designIIRFilter()">è®¾è®¡æ»¤æ³¢å™¨</button>
            </div>
            <div id="designResult" style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 5px;"></div>
        </div>
        
        <h2>ç»ƒä¹ é¢˜ç›®</h2>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 1ï¼šå†²æ¿€å“åº”ä¸å˜æ³•è®¾è®¡</h4>
            <p>ç”¨å†²æ¿€å“åº”ä¸å˜æ³•è®¾è®¡æ•°å­—ä½é€šæ»¤æ³¢å™¨ï¼Œè¦æ±‚ï¼š</p>
            <ul>
                <li>æ¨¡æ‹ŸåŸå‹ï¼š2é˜¶å·´ç‰¹æ²ƒæ€ï¼Œæˆªæ­¢é¢‘ç‡1 rad/s</li>
                <li>é‡‡æ ·é¢‘ç‡ï¼šfs = 4 Hz</li>
            </ul>
            <p>æ±‚æ•°å­—æ»¤æ³¢å™¨çš„ä¼ é€’å‡½æ•°H(z)ã€‚</p>
            <button class="show-answer" onclick="toggleAnswer('answer1')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer1" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                1. æ¨¡æ‹ŸåŸå‹ï¼šHa(s) = 1/(sÂ² + âˆš2s + 1)<br>
                2. éƒ¨åˆ†åˆ†å¼åˆ†è§£ï¼šHa(s) = 0.707/(s + 0.707 - j0.707) + 0.707/(s + 0.707 + j0.707)<br>
                3. T = 1/4 = 0.25s<br>
                4. åº”ç”¨å˜æ¢ï¼šH(z) = 0.707/(1 - e^{-0.707T}e^{j0.707T}z^{-1}) + 0.707/(1 - e^{-0.707T}e^{-j0.707T}z^{-1})<br>
                5. åŒ–ç®€å¾—ï¼šH(z) = 0.067(1 + z^{-1})/(1 - 1.143z^{-1} + 0.413z^{-2})
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 2ï¼šåŒçº¿æ€§å˜æ¢æ³•è®¾è®¡</h4>
            <p>ç”¨åŒçº¿æ€§å˜æ¢æ³•è®¾è®¡æ•°å­—é«˜é€šæ»¤æ³¢å™¨ï¼Œè¦æ±‚ï¼š</p>
            <ul>
                <li>é€šå¸¦æˆªæ­¢é¢‘ç‡ï¼šfp = 1.5 kHz</li>
                <li>é˜»å¸¦æˆªæ­¢é¢‘ç‡ï¼šfs = 1 kHz</li>
                <li>é‡‡æ ·é¢‘ç‡ï¼š8 kHz</li>
                <li>ç”¨2é˜¶å·´ç‰¹æ²ƒæ€åŸå‹</li>
            </ul>
            <button class="show-answer" onclick="toggleAnswer('answer2')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer2" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                1. æ•°å­—é¢‘ç‡ï¼šÏ‰p = 2Ï€Ã—1500/8000 = 1.178 rad, Ï‰s = 2Ï€Ã—1000/8000 = 0.785 rad<br>
                2. é¢„ç•¸å˜ï¼šÎ©p = (2Ã—8000/2)tan(1.178/2) = 8000Ã—0.647 = 5176 rad/s<br>
                   Î©s = 8000Ã—tan(0.785/2) = 8000Ã—0.414 = 3312 rad/s<br>
                3. è®¾è®¡ä½é€šåŸå‹ï¼Œç„¶åå˜æ¢ä¸ºé«˜é€š<br>
                4. åº”ç”¨åŒçº¿æ€§å˜æ¢å¾—åˆ°æ•°å­—é«˜é€šæ»¤æ³¢å™¨
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 3ï¼šé¢‘ç‡å¼¯æ›²åˆ†æ</h4>
            <p>åœ¨åŒçº¿æ€§å˜æ¢ä¸­ï¼Œå¦‚æœé‡‡æ ·é¢‘ç‡fs = 10 Hzï¼Œåˆ†æä»¥ä¸‹æ¨¡æ‹Ÿé¢‘ç‡å¯¹åº”çš„æ•°å­—é¢‘ç‡ï¼š</p>
            <ol>
                <li>Î© = 1 rad/s</li>
                <li>Î© = 5 rad/s</li>
                <li>Î© = 10 rad/s</li>
            </ol>
            <button class="show-answer" onclick="toggleAnswer('answer3')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer3" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                T = 1/10 = 0.1sï¼Œä½¿ç”¨ Ï‰ = 2arctan(Î©T/2)ï¼š<br>
                1. Ï‰â‚ = 2arctan(1Ã—0.1/2) = 2arctan(0.05) = 0.1 rad<br>
                2. Ï‰â‚‚ = 2arctan(5Ã—0.1/2) = 2arctan(0.25) = 0.491 rad<br>
                3. Ï‰â‚ƒ = 2arctan(10Ã—0.1/2) = 2arctan(0.5) = 0.927 rad<br>
                å¯è§é«˜é¢‘æ®µå¼¯æ›²è¶Šæ¥è¶Šä¸¥é‡
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 4ï¼šè®¾è®¡æ–¹æ³•é€‰æ‹©</h4>
            <p>å¯¹äºä»¥ä¸‹åº”ç”¨åœºæ™¯ï¼Œåº”è¯¥é€‰æ‹©å“ªç§è®¾è®¡æ–¹æ³•ï¼Ÿè¯´æ˜ç†ç”±ã€‚</p>
            <ol>
                <li>è®¾è®¡æ•°å­—é«˜é€šæ»¤æ³¢å™¨ï¼Œæˆªæ­¢é¢‘ç‡æ¥è¿‘Nyquisté¢‘ç‡</li>
                <li>è®¾è®¡æ§åˆ¶ç³»ç»Ÿä¸­çš„æ•°å­—æ»¤æ³¢å™¨ï¼Œè¦æ±‚ä¿æŒæ—¶åŸŸç‰¹æ€§</li>
                <li>è®¾è®¡éŸ³é¢‘å‡è¡¡å™¨ä¸­çš„å¸¦é€šæ»¤æ³¢å™¨</li>
            </ol>
            <button class="show-answer" onclick="toggleAnswer('answer4')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer4" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                1. åŒçº¿æ€§å˜æ¢æ³• - å†²æ¿€å“åº”ä¸å˜æ³•åœ¨é«˜é¢‘æ—¶æœ‰æ··å é—®é¢˜ï¼Œä¸é€‚åˆé«˜é€šæ»¤æ³¢å™¨<br>
                2. å†²æ¿€å“åº”ä¸å˜æ³• - èƒ½ä¿æŒæ—¶åŸŸå†²æ¿€å“åº”ç‰¹æ€§ï¼Œé€‚åˆæ§åˆ¶ç³»ç»Ÿåº”ç”¨<br>
                3. åŒçº¿æ€§å˜æ¢æ³• - é€‚åˆæ‰€æœ‰æ»¤æ³¢å™¨ç±»å‹ï¼Œä¸”éŸ³é¢‘é¢‘ç‡ç›¸å¯¹è¾ƒä½ï¼Œå¼¯æ›²å½±å“è¾ƒå°
            </div>
        </div>
        
        <h2>å­¦ä¹ è¦ç‚¹æ€»ç»“</h2>
        
        <div class="important">
            <h3>ğŸ¯ æ ¸å¿ƒæŒæ¡è¦ç‚¹</h3>
            <ol>
                <li><strong>è®¾è®¡æ€è·¯</strong>ï¼šåˆ©ç”¨æˆç†Ÿçš„æ¨¡æ‹Ÿæ»¤æ³¢å™¨è®¾è®¡ï¼Œé€šè¿‡s-zæ˜ å°„å®ç°</li>
                <li><strong>å†²æ¿€å“åº”ä¸å˜æ³•</strong>ï¼šä¿æŒæ—¶åŸŸç‰¹æ€§ï¼Œå­˜åœ¨é¢‘è°±æ··å ï¼Œé€‚åˆä½é€šæ»¤æ³¢å™¨</li>
                <li><strong>åŒçº¿æ€§å˜æ¢æ³•</strong>ï¼šæ— æ··å ï¼Œæœ‰é¢‘ç‡å¼¯æ›²ï¼Œéœ€é¢„ç•¸å˜ï¼Œé€‚åˆæ‰€æœ‰ç±»å‹</li>
                <li><strong>æ–¹æ³•é€‰æ‹©</strong>ï¼šæ ¹æ®åº”ç”¨è¦æ±‚å’Œæ»¤æ³¢å™¨ç±»å‹é€‰æ‹©åˆé€‚æ–¹æ³•</li>
                <li><strong>é¢‘ç‡å˜æ¢</strong>ï¼šä»ä½é€šåŸå‹è®¾è®¡å…¶ä»–ç±»å‹æ»¤æ³¢å™¨çš„ç»Ÿä¸€æ–¹æ³•</li>
                <li><strong>å·¥ç¨‹æƒè¡¡</strong>ï¼šæ—¶åŸŸvsé¢‘åŸŸç‰¹æ€§ï¼Œè®¾è®¡å¤æ‚åº¦vsæ€§èƒ½çš„å¹³è¡¡</li>
            </ol>
        </div>
        
        <div class="bilinear-box">
            <h3>ğŸ”— å®ç”¨è®¾è®¡å»ºè®®</h3>
            <ul>
                <li><strong>é¦–é€‰åŒçº¿æ€§å˜æ¢</strong>ï¼šé€‚ç”¨æ€§å¹¿ï¼Œæ— æ··å é—®é¢˜</li>
                <li><strong>å…³é”®é¢‘ç‡é¢„ç•¸å˜</strong>ï¼šç¡®ä¿é‡è¦é¢‘ç‡ç‚¹å‡†ç¡®æ˜ å°„</li>
                <li><strong>é‡‡æ ·é¢‘ç‡é€‰æ‹©</strong>ï¼šè‡³å°‘æ˜¯æœ€é«˜é¢‘ç‡çš„5-10å€</li>
                <li><strong>é˜¶æ•°æƒè¡¡</strong>ï¼šåœ¨æ»¡è¶³æŒ‡æ ‡å‰æä¸‹é€‰æ‹©æœ€ä½é˜¶æ•°</li>
                <li><strong>æ•°å€¼ç¨³å®šæ€§</strong>ï¼šæ³¨æ„å®ç°æ—¶çš„é‡åŒ–æ•ˆåº”</li>
            </ul>
        </div>
    </div>

    <script>
        // æ›´æ–°å†²æ¿€å“åº”ä¸å˜æ³•æ¼”ç¤º
        function updateImpulseInvariant() {
            const canvas = document.getElementById('impulseInvariantDemo');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            const filterType = document.getElementById('analogFilterType').value;
            const order = parseInt(document.getElementById('filterOrder1').value);
            const fs = parseFloat(document.getElementById('samplingFreq').value);
            
            document.getElementById('orderValue1').textContent = order;
            document.getElementById('samplingValue').textContent = fs;
            
            ctx.clearRect(0, 0, width, height);
            
            // ç»˜åˆ¶æ¨¡æ‹Ÿå’Œæ•°å­—æ»¤æ³¢å™¨å¯¹æ¯”
            drawMethodComparison(ctx, width, height, 'impulse', filterType, order, fs);
        }
        
        // æ›´æ–°åŒçº¿æ€§å˜æ¢æ¼”ç¤º
        function updateBilinear() {
            const canvas = document.getElementById('bilinearDemo');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            const filterType = document.getElementById('analogFilterType2').value;
            const order = parseInt(document.getElementById('filterOrder2').value);
            const fs = parseFloat(document.getElementById('samplingFreq2').value);
            
            document.getElementById('orderValue2').textContent = order;
            document.getElementById('samplingValue2').textContent = fs;
            
            ctx.clearRect(0, 0, width, height);
            
            // ç»˜åˆ¶æ¨¡æ‹Ÿå’Œæ•°å­—æ»¤æ³¢å™¨å¯¹æ¯”
            drawMethodComparison(ctx, width, height, 'bilinear', filterType, order, fs);
        }
        
        function drawMethodComparison(ctx, width, height, method, filterType, order, fs) {
            const subHeight = height / 2;
            
            // ä¸ŠåŠéƒ¨åˆ†ï¼šæ¨¡æ‹Ÿæ»¤æ³¢å™¨
            drawFilterResponse(ctx, 0, 0, width, subHeight, 'analog', filterType, order, fs, 'æ¨¡æ‹Ÿæ»¤æ³¢å™¨ Ha(s)');
            
            // ä¸‹åŠéƒ¨åˆ†ï¼šæ•°å­—æ»¤æ³¢å™¨
            drawFilterResponse(ctx, 0, subHeight, width, subHeight, method, filterType, order, fs, `æ•°å­—æ»¤æ³¢å™¨ H(z) - ${method === 'impulse' ? 'å†²æ¿€å“åº”ä¸å˜æ³•' : 'åŒçº¿æ€§å˜æ¢æ³•'}`);
        }
        
        function drawFilterResponse(ctx, offsetX, offsetY, width, height, type, filterType, order, fs, title) {
            const centerY = offsetY + height * 0.8;
            const freqRange = type === 'analog' ? 10 : Math.PI;
            const scaleX = (width - 60) / freqRange;
            const scaleY = height * 0.5;
            
            // åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            ctx.beginPath();
            ctx.moveTo(offsetX + 30, centerY);
            ctx.lineTo(offsetX + width - 30, centerY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(offsetX + 30, offsetY + 20);
            ctx.lineTo(offsetX + 30, centerY);
            ctx.stroke();
            
            // ç»˜åˆ¶é¢‘ç‡å“åº”
            const color = type === 'analog' ? '#e74c3c' : '#3498db';
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            for (let i = 0; i <= 200; i++) {
                const freq = (i / 200) * freqRange;
                const x = offsetX + 30 + freq * scaleX;
                let magnitude;
                
                if (type === 'analog') {
                    // æ¨¡æ‹Ÿæ»¤æ³¢å™¨å“åº”
                    magnitude = analogFilterResponse(freq, filterType, order);
                } else {
                    // æ•°å­—æ»¤æ³¢å™¨å“åº”
                    magnitude = digitalFilterResponse(freq, filterType, order, fs, type);
                }
                
                const y = centerY - magnitude * scaleY;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // æ ‡é¢˜
            ctx.fillStyle = color;
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(title, offsetX + width/2, offsetY + 15);
            
            // é¢‘ç‡è½´æ ‡ç­¾
            ctx.fillStyle = '#333';
            ctx.font = '10px Arial';
            if (type === 'analog') {
                ctx.fillText('0', offsetX + 30, centerY + 15);
                ctx.fillText('5', offsetX + 30 + 5 * scaleX, centerY + 15);
                ctx.fillText('10 rad/s', offsetX + 30 + 10 * scaleX, centerY + 15);
            } else {
                ctx.fillText('0', offsetX + 30, centerY + 15);
                ctx.fillText('Ï€/2', offsetX + 30 + Math.PI/2 * scaleX, centerY + 15);
                ctx.fillText('Ï€', offsetX + 30 + Math.PI * scaleX, centerY + 15);
            }
        }
        
        function analogFilterResponse(freq, type, order) {
            const cutoff = 2; // å½’ä¸€åŒ–æˆªæ­¢é¢‘ç‡
            switch (type) {
                case 'butterworth':
                    return 1 / Math.sqrt(1 + Math.pow(freq / cutoff, 2 * order));
                case 'chebyshev':
                    const epsilon = 0.5;
                    const x = freq / cutoff;
                    const Tn = chebyshevPolynomial(order, x);
                    return 1 / Math.sqrt(1 + epsilon * epsilon * Tn * Tn);
                default:
                    return 1;
            }
        }
        
        function digitalFilterResponse(freq, type, order, fs, method) {
            // ç®€åŒ–çš„æ•°å­—æ»¤æ³¢å™¨å“åº”è®¡ç®—
            let analogFreq;
            
            if (method === 'impulse') {
                // å†²æ¿€å“åº”ä¸å˜æ³•ï¼šç›´æ¥æ˜ å°„ï¼Œä½†æœ‰æ··å 
                analogFreq = freq * fs / (2 * Math.PI);
                // æ·»åŠ æ··å æ•ˆåº”ï¼ˆç®€åŒ–ï¼‰
                const aliasing = 0.1 * Math.sin(freq * 3);
                return analogFilterResponse(analogFreq, type, order) + Math.abs(aliasing);
            } else {
                // åŒçº¿æ€§å˜æ¢æ³•ï¼šé¢‘ç‡å¼¯æ›²
                const T = 1 / fs;
                analogFreq = (2 / T) * Math.tan(freq / 2);
                return analogFilterResponse(analogFreq, type, order);
            }
        }
        
        function chebyshevPolynomial(n, x) {
            if (n === 0) return 1;
            if (n === 1) return x;
            
            let T0 = 1;
            let T1 = x;
            let Tn = 0;
            
            for (let i = 2; i <= n; i++) {
                Tn = 2 * x * T1 - T0;
                T0 = T1;
                T1 = Tn;
            }
            
            return Tn;
        }
        
        // æ›´æ–°é¢‘ç‡å¼¯æ›²æ¼”ç¤º
        function updateWarping() {
            const canvas = document.getElementById('warpingDemo');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            const fs = parseFloat(document.getElementById('warpingFs').value);
            
            document.getElementById('warpingFsValue').textContent = fs;
            
            ctx.clearRect(0, 0, width, height);
            
            drawWarpingEffect(ctx, width, height, fs);
        }
        
        function drawWarpingEffect(ctx, width, height, fs) {
            const centerY = height * 0.8;
            const freqRange = fs / 2; // Nyquist frequency
            const scaleX = (width - 60) / freqRange;
            const scaleY = height * 0.5 / Math.PI;
            
            // åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            ctx.beginPath();
            ctx.moveTo(30, centerY);
            ctx.lineTo(width - 30, centerY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(30, 30);
            ctx.lineTo(30, centerY);
            ctx.stroke();
            
            // ç†æƒ³çº¿æ€§å…³ç³»
            ctx.strokeStyle = '#666';
            ctx.setLineDash([5, 5]);
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(30, centerY);
            ctx.lineTo(width - 30, 30);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // å®é™…å¼¯æ›²å…³ç³»
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            const T = 1 / fs;
            for (let i = 0; i <= 200; i++) {
                const analogFreq = (i / 200) * freqRange;
                const digitalFreq = 2 * Math.atan(analogFreq * T / 2);
                
                const x = 30 + analogFreq * scaleX;
                const y = centerY - digitalFreq * scaleY;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // æ ‡ç­¾
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('é¢‘ç‡å¼¯æ›²æ•ˆåº”', width / 2, 20);
            ctx.fillText('æ¨¡æ‹Ÿé¢‘ç‡ Î© (rad/s)', width / 2, height - 5);
            
            ctx.save();
            ctx.translate(15, height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('æ•°å­—é¢‘ç‡ Ï‰ (rad)', 0, 0);
            ctx.restore();
            
            // å›¾ä¾‹
            ctx.fillStyle = '#666';
            ctx.fillRect(width - 200, 50, 20, 2);
            ctx.fillStyle = '#333';
            ctx.font = '10px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('ç†æƒ³çº¿æ€§å…³ç³»', width - 175, 55);
            
            ctx.fillStyle = '#e74c3c';
            ctx.fillRect(width - 200, 70, 20, 3);
            ctx.fillText('åŒçº¿æ€§å˜æ¢å®é™…å…³ç³»', width - 175, 75);
        }
        
        // æ›´æ–°æ•°å­—é¢‘ç‡å˜æ¢æ¼”ç¤º
        function updateDigitalTransform() {
            const targetType = document.getElementById('targetFilterType').value;
            const cutoff1 = parseFloat(document.getElementById('cutoff1').value);
            const cutoff2 = parseFloat(document.getElementById('cutoff2').value);
            
            document.getElementById('cutoff1Value').textContent = cutoff1.toFixed(2);
            document.getElementById('cutoff2Value').textContent = cutoff2.toFixed(2);
            
            // ç»˜åˆ¶åŸå‹æ»¤æ³¢å™¨
            drawPrototypeFilter();
            
            // ç»˜åˆ¶å˜æ¢åæ»¤æ³¢å™¨
            drawTransformedDigitalFilter(targetType, cutoff1, cutoff2);
        }
        
        function drawPrototypeFilter() {
            const canvas = document.getElementById('prototypeFilter');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            drawDigitalFilterResponse(ctx, width, height, 'lowpass', 0.3, 0.7, 'ä½é€šåŸå‹', '#3498db');
        }
        
        function drawTransformedDigitalFilter(type, cutoff1, cutoff2) {
            const canvas = document.getElementById('transformedFilter');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const titles = {
                'highpass': 'é«˜é€šæ»¤æ³¢å™¨',
                'bandpass': 'å¸¦é€šæ»¤æ³¢å™¨',
                'bandstop': 'å¸¦é˜»æ»¤æ³¢å™¨'
            };
            
            drawDigitalFilterResponse(ctx, width, height, type, cutoff1, cutoff2, titles[type], '#e74c3c');
        }
        
        function drawDigitalFilterResponse(ctx, width, height, type, cutoff1, cutoff2, title, color) {
            const centerY = height * 0.8;
            const scaleX = (width - 40) / Math.PI;
            const scaleY = height * 0.5;
            
            // åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            ctx.beginPath();
            ctx.moveTo(20, centerY);
            ctx.lineTo(width - 20, centerY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(20, 20);
            ctx.lineTo(20, centerY);
            ctx.stroke();
            
            // ç»˜åˆ¶é¢‘ç‡å“åº”
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            for (let i = 0; i <= 100; i++) {
                const freq = (i / 100) * Math.PI;
                const x = 20 + freq * scaleX;
                let magnitude = 0;
                
                switch (type) {
                    case 'lowpass':
                        magnitude = freq <= cutoff1 * Math.PI ? 1 : 0.01;
                        break;
                    case 'highpass':
                        magnitude = freq >= cutoff1 * Math.PI ? 1 : 0.01;
                        break;
                    case 'bandpass':
                        magnitude = (freq >= cutoff1 * Math.PI && freq <= cutoff2 * Math.PI) ? 1 : 0.01;
                        break;
                    case 'bandstop':
                        magnitude = (freq >= cutoff1 * Math.PI && freq <= cutoff2 * Math.PI) ? 0.01 : 1;
                        break;
                }
                
                const y = centerY - magnitude * scaleY;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // æ ‡é¢˜
            ctx.fillStyle = color;
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(title, width / 2, 15);
            
            // é¢‘ç‡è½´æ ‡ç­¾
            ctx.fillStyle = '#333';
            ctx.font = '8px Arial';
            ctx.fillText('0', 20, centerY + 12);
            ctx.fillText('Ï€/2', 20 + Math.PI/2 * scaleX, centerY + 12);
            ctx.fillText('Ï€', width - 25, centerY + 12);
        }
        
        // è®¾è®¡IIRæ»¤æ³¢å™¨
        function designIIRFilter() {
            const method = document.getElementById('designMethod').value;
            const filterType = document.getElementById('filterType').value;
            const prototypeType = document.getElementById('prototypeType').value;
            const order = parseInt(document.getElementById('designOrder').value);
            
            document.getElementById('designOrderValue').textContent = order;
            
            // ç»˜åˆ¶è®¾è®¡ç»“æœ
            const canvas = document.getElementById('iirDesigner');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            drawDesignedFilter(ctx, width, height, method, filterType, prototypeType, order);
            
            // æ˜¾ç¤ºè®¾è®¡ä¿¡æ¯
            showDesignInfo(method, filterType, prototypeType, order);
        }
        
        function drawDesignedFilter(ctx, width, height, method, filterType, prototypeType, order) {
            const centerY = height * 0.8;
            const scaleX = (width - 60) / Math.PI;
            const scaleY = height * 0.5;
            
            // åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            ctx.beginPath();
            ctx.moveTo(30, centerY);
            ctx.lineTo(width - 30, centerY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(30, 30);
            ctx.lineTo(30, centerY);
            ctx.stroke();
            
            // ç»˜åˆ¶è®¾è®¡çš„æ»¤æ³¢å™¨å“åº”
            ctx.strokeStyle = '#2ecc71';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            for (let i = 0; i <= 200; i++) {
                const freq = (i / 200) * Math.PI;
                const x = 30 + freq * scaleX;
                
                // ç®€åŒ–çš„æ»¤æ³¢å™¨å“åº”è®¡ç®—
                let magnitude = calculateIIRResponse(freq, filterType, prototypeType, order, method);
                
                const y = centerY - magnitude * scaleY;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // æ ‡é¢˜
            ctx.fillStyle = '#2ecc71';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`${order}é˜¶${prototypeType}${filterType}æ»¤æ³¢å™¨ (${method === 'bilinear' ? 'åŒçº¿æ€§å˜æ¢' : 'å†²æ¿€å“åº”ä¸å˜'})`, width / 2, 20);
            
            // é¢‘ç‡è½´æ ‡ç­¾
            ctx.fillStyle = '#333';
            ctx.font = '10px Arial';
            ctx.fillText('0', 30, centerY + 15);
            ctx.fillText('Ï€/4', 30 + Math.PI/4 * scaleX, centerY + 15);
            ctx.fillText('Ï€/2', 30 + Math.PI/2 * scaleX, centerY + 15);
            ctx.fillText('3Ï€/4', 30 + 3*Math.PI/4 * scaleX, centerY + 15);
            ctx.fillText('Ï€', 30 + Math.PI * scaleX, centerY + 15);
        }
        
        function calculateIIRResponse(freq, filterType, prototypeType, order, method) {
            // ç®€åŒ–çš„IIRæ»¤æ³¢å™¨å“åº”è®¡ç®—
            let response = 1;
            
            // åŸºæœ¬å“åº”æ¨¡å¼
            switch (filterType) {
                case 'lowpass':
                    response = 1 / (1 + Math.pow(freq / (Math.PI * 0.3), 2 * order));
                    break;
                case 'highpass':
                    response = Math.pow(freq / Math.PI, 2 * order) / (1 + Math.pow(freq / (Math.PI * 0.7), 2 * order));
                    break;
                case 'bandpass':
                    const center = Math.PI * 0.5;
                    const bandwidth = Math.PI * 0.2;
                    response = 1 / (1 + Math.pow((freq - center) / bandwidth, 2 * order));
                    break;
                case 'bandstop':
                    const center2 = Math.PI * 0.5;
                    const bandwidth2 = Math.PI * 0.2;
                    response = Math.pow((freq - center2) / bandwidth2, 2 * order) / (1 + Math.pow((freq - center2) / bandwidth2, 2 * order));
                    break;
            }
            
            // æ·»åŠ åŸå‹ç±»å‹çš„å½±å“
            if (prototypeType === 'chebyshev1') {
                response *= (1 + 0.1 * Math.sin(order * freq)); // ç®€åŒ–çš„çº¹æ³¢æ•ˆåº”
            }
            
            // æ·»åŠ è®¾è®¡æ–¹æ³•çš„å½±å“
            if (method === 'impulse' && freq > Math.PI * 0.7) {
                response += 0.05 * Math.sin(freq * 3); // ç®€åŒ–çš„æ··å æ•ˆåº”
            }
            
            return Math.max(0.001, Math.min(1, response));
        }
        
        function showDesignInfo(method, filterType, prototypeType, order) {
            const resultDiv = document.getElementById('designResult');
            
            const typeNames = {
                'lowpass': 'ä½é€š',
                'highpass': 'é«˜é€š', 
                'bandpass': 'å¸¦é€š',
                'bandstop': 'å¸¦é˜»'
            };
            
            const prototypeNames = {
                'butterworth': 'å·´ç‰¹æ²ƒæ€',
                'chebyshev1': 'åˆ‡æ¯”é›ªå¤«Iå‹'
            };
            
            const methodNames = {
                'bilinear': 'åŒçº¿æ€§å˜æ¢æ³•',
                'impulse': 'å†²æ¿€å“åº”ä¸å˜æ³•'
            };
            
            let assessment = '';
            if (method === 'impulse' && (filterType === 'highpass' || filterType === 'bandstop')) {
                assessment = 'âš ï¸ æ³¨æ„ï¼šå†²æ¿€å“åº”ä¸å˜æ³•ä¸é€‚åˆé«˜é€šå’Œå¸¦é˜»æ»¤æ³¢å™¨è®¾è®¡';
            } else if (method === 'bilinear') {
                assessment = 'âœ… æ¨èé€‰æ‹©ï¼šåŒçº¿æ€§å˜æ¢æ³•é€‚ç”¨äºæ‰€æœ‰æ»¤æ³¢å™¨ç±»å‹';
            } else {
                assessment = 'âœ… åˆé€‚é€‰æ‹©ï¼šé€‚åˆå½“å‰æ»¤æ³¢å™¨ç±»å‹';
            }
            
            resultDiv.innerHTML = `
                <h4>è®¾è®¡ç»“æœ</h4>
                <p><strong>æ»¤æ³¢å™¨ç±»å‹ï¼š</strong>${order}é˜¶${prototypeNames[prototypeType]}${typeNames[filterType]}æ»¤æ³¢å™¨</p>
                <p><strong>è®¾è®¡æ–¹æ³•ï¼š</strong>${methodNames[method]}</p>
                <p><strong>è®¾è®¡è¯„ä¼°ï¼š</strong>${assessment}</p>
                <p><strong>ç‰¹æ€§è¯´æ˜ï¼š</strong></p>
                <ul>
                    <li>${prototypeNames[prototypeType]}åŸå‹å…·æœ‰${prototypeType === 'butterworth' ? 'æœ€å¤§å¹³å¦ç‰¹æ€§' : 'ç­‰çº¹æ³¢ç‰¹æ€§'}</li>
                    <li>${methodNames[method]}${method === 'bilinear' ? 'æ— é¢‘è°±æ··å ä½†æœ‰é¢‘ç‡å¼¯æ›²' : 'ä¿æŒæ—¶åŸŸç‰¹æ€§ä½†å¯èƒ½æœ‰æ··å '}</li>
                    <li>å»ºè®®åœ¨å®é™…åº”ç”¨å‰è¿›è¡Œä»¿çœŸéªŒè¯</li>
                </ul>
            `;
        }
        
        // åˆ‡æ¢ç­”æ¡ˆæ˜¾ç¤º
        function toggleAnswer(answerId) {
            const answer = document.getElementById(answerId);
            answer.style.display = answer.style.display === 'none' ? 'block' : 'none';
        }
        
        // é¡µé¢åŠ è½½ååˆå§‹åŒ–
        window.onload = function() {
            updateImpulseInvariant();
            updateBilinear();
            updateWarping();
            updateDigitalTransform();
            designIIRFilter();
        };
    </script>
</body>
</html>