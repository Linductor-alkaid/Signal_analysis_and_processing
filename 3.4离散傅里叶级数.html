<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¦»æ•£å‚…é‡Œå¶çº§æ•°(DFS)</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 30px;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        
        h2 {
            color: #34495e;
            border-left: 4px solid #3498db;
            padding-left: 15px;
            margin-top: 30px;
        }
        
        h3 {
            color: #2980b9;
            margin-top: 25px;
        }
        
        .knowledge-point {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .formula {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            font-family: 'Times New Roman', serif;
            font-size: 18px;
        }
        
        .important {
            background: #ffeaa7;
            border: 2px solid #fdcb6e;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .example {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .plot-container {
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        canvas {
            border: 1px solid #ccc;
            margin: 10px;
        }
        
        .controls {
            margin: 15px 0;
            text-align: center;
        }
        
        .controls input, .controls select {
            margin: 5px;
            padding: 5px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .controls button {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        
        .controls button:hover {
            background: #2980b9;
        }
        
        .exercise {
            background: #e8f5e8;
            border: 1px solid #c3e6c3;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .exercise h4 {
            color: #2e7d2e;
            margin-top: 0;
        }
        
        .answer {
            background: #f0f0f0;
            border-radius: 5px;
            padding: 10px;
            margin-top: 10px;
            display: none;
        }
        
        .show-answer {
            background: #28a745;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .show-answer:hover {
            background: #218838;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        
        th {
            background: #f2f2f2;
        }
        
        .highlight {
            background: #ffeb3b;
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .symmetry-box {
            background: #e8f5e8;
            border: 2px solid #4caf50;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .duality-box {
            background: #f3e5f5;
            border: 2px solid #9c27b0;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .comparison-table {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin: 20px 0;
        }
        
        .comparison-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            text-align: center;
        }
        
        .comparison-item h4 {
            margin-top: 0;
            color: #495057;
        }
        
        .period-demo {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        
        .period-part {
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ä¿¡å·åˆ†æä¸å¤„ç† - ç¬¬å››ç« ï¼šç¦»æ•£å‚…é‡Œå¶çº§æ•°(DFS)</h1>
        
        <h2>4.1 å‚…é‡Œå¶å˜æ¢çš„å¯¹ç§°è§„å¾‹</h2>
        
        <div class="knowledge-point">
            <h3>æ—¶åŸŸ-é¢‘åŸŸå¯¹ç§°æ€§æ¦‚è¿°</h3>
            <p>å‚…é‡Œå¶å˜æ¢å…·æœ‰æ·±åˆ»çš„<strong>å¯¹ç§°æ€§è´¨</strong>ï¼Œç†è§£è¿™ç§å¯¹ç§°æ€§æ˜¯æŒæ¡å„ç§å‚…é‡Œå¶å˜æ¢çš„å…³é”®ã€‚</p>
        </div>
        
        <div class="symmetry-box">
            <h3>ğŸ”„ å››ç§å‚…é‡Œå¶å˜æ¢çš„å¯¹ç§°å…³ç³»</h3>
            <div class="comparison-table">
                <div class="comparison-item">
                    <h4>è¿ç»­æ—¶é—´ - è¿ç»­é¢‘ç‡</h4>
                    <p><strong>å‚…é‡Œå¶å˜æ¢ (FT)</strong></p>
                    <p>æ—¶åŸŸï¼šè¿ç»­</p>
                    <p>é¢‘åŸŸï¼šè¿ç»­</p>
                </div>
                <div class="comparison-item">
                    <h4>ç¦»æ•£æ—¶é—´ - è¿ç»­é¢‘ç‡</h4>
                    <p><strong>DTFT</strong></p>
                    <p>æ—¶åŸŸï¼šç¦»æ•£</p>
                    <p>é¢‘åŸŸï¼šè¿ç»­å‘¨æœŸ</p>
                </div>
                <div class="comparison-item">
                    <h4>è¿ç»­æ—¶é—´ - ç¦»æ•£é¢‘ç‡</h4>
                    <p><strong>å‚…é‡Œå¶çº§æ•° (FS)</strong></p>
                    <p>æ—¶åŸŸï¼šè¿ç»­å‘¨æœŸ</p>
                    <p>é¢‘åŸŸï¼šç¦»æ•£</p>
                </div>
                <div class="comparison-item">
                    <h4>ç¦»æ•£æ—¶é—´ - ç¦»æ•£é¢‘ç‡</h4>
                    <p><strong>DFS/DFT</strong></p>
                    <p>æ—¶åŸŸï¼šç¦»æ•£å‘¨æœŸ</p>
                    <p>é¢‘åŸŸï¼šç¦»æ•£å‘¨æœŸ</p>
                </div>
            </div>
        </div>
        
        <div class="duality-box">
            <h3>ğŸ¯ å¯¹ç§°è§„å¾‹æ€»ç»“</h3>
            <ol>
                <li><strong>æ—¶åŸŸç¦»æ•£åŒ–</strong> â†” <strong>é¢‘åŸŸå‘¨æœŸåŒ–</strong></li>
                <li><strong>æ—¶åŸŸå‘¨æœŸåŒ–</strong> â†” <strong>é¢‘åŸŸç¦»æ•£åŒ–</strong></li>
                <li><strong>æ—¶åŸŸæœ‰é™</strong> â†” <strong>é¢‘åŸŸæ— é™</strong></li>
                <li><strong>æ—¶åŸŸæ— é™</strong> â†” <strong>é¢‘åŸŸå¯èƒ½æœ‰é™</strong></li>
            </ol>
            <p class="highlight">DFS/DFTæ˜¯å”¯ä¸€æ—¢ç¦»æ•£åˆå‘¨æœŸçš„å˜æ¢ï¼Œåœ¨æ•°å­—ä¿¡å·å¤„ç†ä¸­æœ€ä¸ºå®ç”¨ï¼</p>
        </div>
        
        <h2>4.2 ç¦»æ•£å‚…é‡Œå¶çº§æ•°(DFS)çš„å®šä¹‰</h2>
        
        <div class="knowledge-point">
            <h3>å‘¨æœŸåºåˆ—çš„è¡¨ç¤º</h3>
            <p>å¯¹äºå‘¨æœŸä¸ºNçš„ç¦»æ•£å‘¨æœŸåºåˆ— x[n]ï¼Œæ»¡è¶³ï¼š</p>
            <div class="formula">
                x[n] = x[n + N], âˆ€n
            </div>
            <p>å…¶ç¦»æ•£å‚…é‡Œå¶çº§æ•°è¡¨ç¤ºä¸ºï¼š</p>
            <div class="formula">
                x[n] = (1/N) âˆ‘<sub>k=0</sub><sup>N-1</sup> X[k]e<sup>j2Ï€kn/N</sup>
            </div>
            <p>å…¶ä¸­X[k]æ˜¯DFSç³»æ•°ã€‚</p>
        </div>
        
        <div class="knowledge-point">
            <h3>DFSæ­£å˜æ¢å’Œé€†å˜æ¢</h3>
            
            <h4>æ­£å˜æ¢ï¼ˆåˆ†æå…¬å¼ï¼‰</h4>
            <div class="formula">
                X[k] = âˆ‘<sub>n=0</sub><sup>N-1</sup> x[n]e<sup>-j2Ï€kn/N</sup>, k = 0,1,...,N-1
            </div>
            
            <h4>é€†å˜æ¢ï¼ˆç»¼åˆå…¬å¼ï¼‰</h4>
            <div class="formula">
                x[n] = (1/N) âˆ‘<sub>k=0</sub><sup>N-1</sup> X[k]e<sup>j2Ï€kn/N</sup>, n = 0,1,...,N-1
            </div>
            
            <div class="important">
                <p><strong>è®°å¿†æŠ€å·§ï¼š</strong></p>
                <ul>
                    <li>æ­£å˜æ¢ï¼šè´ŸæŒ‡æ•°ï¼Œæ— (1/N)</li>
                    <li>é€†å˜æ¢ï¼šæ­£æŒ‡æ•°ï¼Œæœ‰(1/N)</li>
                </ul>
            </div>
        </div>
        
        <div class="knowledge-point">
            <h3>DFSçš„é‡è¦æ€§è´¨</h3>
            
            <h4>1. å‘¨æœŸæ€§</h4>
            <div class="formula">
                X[k] = X[k + N]ï¼Œx[n] = x[n + N]
            </div>
            <p>æ—¶åŸŸå’Œé¢‘åŸŸéƒ½å…·æœ‰ç›¸åŒçš„å‘¨æœŸN</p>
            
            <h4>2. å¯¹ç§°æ€§ï¼ˆå®åºåˆ—ï¼‰</h4>
            <div class="formula">
                X[k] = X*[N-k] = X*[-k]
            </div>
            
            <h4>3. çº¿æ€§</h4>
            <div class="formula">
                axâ‚[n] + bxâ‚‚[n] â†” aXâ‚[k] + bXâ‚‚[k]
            </div>
            
            <h4>4. æ—¶ç§»</h4>
            <div class="formula">
                x[n-nâ‚€] â†” X[k]e<sup>-j2Ï€knâ‚€/N</sup>
            </div>
            
            <h4>5. é¢‘ç§»</h4>
            <div class="formula">
                x[n]e<sup>j2Ï€kâ‚€n/N</sup> â†” X[k-kâ‚€]
            </div>
        </div>
        
        <div class="plot-container">
            <h3>DFSæ¼”ç¤ºï¼šå‘¨æœŸåºåˆ—åŠå…¶é¢‘è°±</h3>
            <div class="period-demo">
                <div class="period-part">
                    <canvas id="periodicSequence" width="350" height="250"></canvas>
                    <p>å‘¨æœŸåºåˆ— x[n]</p>
                </div>
                <div class="period-part">
                    <canvas id="dfsSpectrum" width="350" height="250"></canvas>
                    <p>DFSç³»æ•° X[k]</p>
                </div>
            </div>
            <div class="controls">
                <label>åºåˆ—ç±»å‹ï¼š</label>
                <select id="periodicType">
                    <option value="rectangular">çŸ©å½¢è„‰å†²</option>
                    <option value="triangular">ä¸‰è§’æ³¢</option>
                    <option value="sawtooth">é”¯é½¿æ³¢</option>
                    <option value="cosine">ä½™å¼¦æ³¢</option>
                </select>
                <label>å‘¨æœŸNï¼š</label>
                <input type="number" id="periodN" value="8" min="4" max="16">
                <label>è„‰å†²å®½åº¦ï¼š</label>
                <input type="number" id="pulseWidth" value="3" min="1" max="8">
                <button onclick="plotDFS()">è®¡ç®—DFS</button>
            </div>
        </div>
        
        <h2>4.3 DFSä¸DTFTçš„å…³ç³»</h2>
        
        <div class="knowledge-point">
            <h3>ä»DTFTåˆ°DFS</h3>
            <p>å‘¨æœŸåºåˆ—çš„DTFTæ˜¯å†²æ¿€å‡½æ•°çš„çº¿æ€§ç»„åˆï¼š</p>
            <div class="formula">
                X(e<sup>jÏ‰</sup>) = (2Ï€/N) âˆ‘<sub>k=0</sub><sup>N-1</sup> X[k]Î´(Ï‰ - 2Ï€k/N)
            </div>
            <p>å…¶ä¸­X[k]å°±æ˜¯DFSç³»æ•°ã€‚</p>
        </div>
        
        <div class="example">
            <h4>å…³ç³»ç†è§£</h4>
            <ul>
                <li><strong>DFSç³»æ•°X[k]</strong>ï¼šDTFTåœ¨Ï‰ = 2Ï€k/Nå¤„çš„"æ ·æœ¬"ï¼ˆé™¤å»2Ï€/Nå› å­ï¼‰</li>
                <li><strong>é¢‘ç‡é‡‡æ ·</strong>ï¼šDFSå¯ä»¥çœ‹ä½œDTFTçš„é¢‘ç‡åŸŸé‡‡æ ·</li>
                <li><strong>å‘¨æœŸå»¶æ‹“</strong>ï¼šæœ‰é™é•¿åºåˆ—å‘¨æœŸå»¶æ‹“åçš„DFS</li>
            </ul>
        </div>
        
        <h2>4.4 DFSè®¡ç®—å®ä¾‹</h2>
        
        <div class="example">
            <h4>ä¾‹é¢˜ï¼šçŸ©å½¢è„‰å†²åºåˆ—çš„DFS</h4>
            <p><strong>é—®é¢˜ï¼š</strong>æ±‚å‘¨æœŸçŸ©å½¢è„‰å†²åºåˆ—çš„DFSç³»æ•°</p>
            <p>è®¾ x[n] = {1, 0â‰¤nâ‰¤L-1; 0, Lâ‰¤nâ‰¤N-1}ï¼Œå‘¨æœŸä¸ºN</p>
            
            <p><strong>è§£ï¼š</strong></p>
            <div class="formula">
                X[k] = âˆ‘<sub>n=0</sub><sup>L-1</sup> e<sup>-j2Ï€kn/N</sup> = (1-e<sup>-j2Ï€kL/N</sup>)/(1-e<sup>-j2Ï€k/N</sup>)
            </div>
            
            <p>å½“k â‰  0æ—¶ï¼š</p>
            <div class="formula">
                X[k] = e<sup>-jÏ€k(L-1)/N</sup> Â· sin(Ï€kL/N)/sin(Ï€k/N)
            </div>
            
            <p>å½“k = 0æ—¶ï¼š</p>
            <div class="formula">
                X[0] = L
            </div>
        </div>
        
        <div class="plot-container">
            <h3>DFSè®¡ç®—å™¨</h3>
            <canvas id="dfsCalculator" width="800" height="300"></canvas>
            <div class="controls">
                <label>è‡ªå®šä¹‰åºåˆ—(ç”¨é€—å·åˆ†éš”)ï¼š</label>
                <input type="text" id="customSequence" value="1,1,0,0,0,0,0,0" placeholder="ä¾‹: 1,1,0,0">
                <button onclick="calculateCustomDFS()">è®¡ç®—DFS</button>
            </div>
            <div id="dfsResult" style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 5px;"></div>
        </div>
        
        <h2>4.5 DFSçš„åº”ç”¨</h2>
        
        <div class="knowledge-point">
            <h3>ä¸»è¦åº”ç”¨é¢†åŸŸ</h3>
            <ol>
                <li><strong>å‘¨æœŸä¿¡å·åˆ†æ</strong>ï¼šåˆ†è§£ä¸ºè°æ³¢åˆ†é‡</li>
                <li><strong>DFTçš„åŸºç¡€</strong>ï¼šDFSæ˜¯DFTçš„ç†è®ºåŸºç¡€</li>
                <li><strong>é¢‘è°±åˆ†æ</strong>ï¼šå‘¨æœŸåºåˆ—çš„é¢‘ç‡å†…å®¹</li>
                <li><strong>æ»¤æ³¢å™¨è®¾è®¡</strong>ï¼šå‘¨æœŸæ€§æ»¤æ³¢å™¨çš„é¢‘ç‡å“åº”</li>
                <li><strong>ä¿¡å·é‡æ„</strong>ï¼šç”±é¢‘è°±ç³»æ•°é‡æ„æ—¶åŸŸä¿¡å·</li>
            </ol>
        </div>
        
        <div class="knowledge-point">
            <h3>DFS vs DTFT vs DFTå¯¹æ¯”</h3>
            <table>
                <tr>
                    <th>å˜æ¢ç±»å‹</th>
                    <th>æ—¶åŸŸç‰¹ç‚¹</th>
                    <th>é¢‘åŸŸç‰¹ç‚¹</th>
                    <th>é€‚ç”¨ä¿¡å·</th>
                    <th>è®¡ç®—å¤æ‚åº¦</th>
                </tr>
                <tr>
                    <td>DTFT</td>
                    <td>ç¦»æ•£ã€æ— é™é•¿</td>
                    <td>è¿ç»­ã€å‘¨æœŸ</td>
                    <td>ä»»æ„åºåˆ—</td>
                    <td>è§£æè®¡ç®—</td>
                </tr>
                <tr>
                    <td>DFS</td>
                    <td>ç¦»æ•£ã€å‘¨æœŸ</td>
                    <td>ç¦»æ•£ã€å‘¨æœŸ</td>
                    <td>å‘¨æœŸåºåˆ—</td>
                    <td>O(NÂ²)</td>
                </tr>
                <tr>
                    <td>DFT</td>
                    <td>ç¦»æ•£ã€æœ‰é™é•¿</td>
                    <td>ç¦»æ•£ã€å‘¨æœŸ</td>
                    <td>æœ‰é™é•¿åºåˆ—</td>
                    <td>O(NÂ²) æˆ– O(NlogN)</td>
                </tr>
            </table>
        </div>
        
        <h2>ç»ƒä¹ é¢˜ç›®</h2>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 1ï¼šDFSåŸºæœ¬è®¡ç®—</h4>
            <p>æ±‚å‘¨æœŸåºåˆ— x[n] = {2, 1, 0, 1} ï¼ˆå‘¨æœŸN=4ï¼‰çš„DFSç³»æ•° X[k]</p>
            <button class="show-answer" onclick="toggleAnswer('answer1')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer1" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                X[0] = 2 + 1 + 0 + 1 = 4<br>
                X[1] = 2 + 1Â·e^(-jÏ€/2) + 0Â·e^(-jÏ€) + 1Â·e^(-j3Ï€/2) = 2 - j + 0 + j = 2<br>
                X[2] = 2 + 1Â·e^(-jÏ€) + 0Â·e^(-j2Ï€) + 1Â·e^(-j3Ï€) = 2 - 1 + 0 - 1 = 0<br>
                X[3] = 2 + 1Â·e^(-j3Ï€/2) + 0Â·e^(-j3Ï€) + 1Â·e^(-j9Ï€/2) = 2 + j + 0 - j = 2
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 2ï¼šå¯¹ç§°æ€§åº”ç”¨</h4>
            <p>å·²çŸ¥å®å‘¨æœŸåºåˆ—çš„DFSç³»æ•°ä¸ºï¼šX[0]=6, X[1]=2+j, X[2]=0, X[3]=?</p>
            <p>åˆ©ç”¨å¯¹ç§°æ€§æ±‚X[3]ï¼ˆå‘¨æœŸN=4ï¼‰</p>
            <button class="show-answer" onclick="toggleAnswer('answer2')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer2" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                ç”±äºå®åºåˆ—çš„å¯¹ç§°æ€§ï¼šX[k] = X*[N-k]<br>
                X[3] = X*[4-3] = X*[1] = (2+j)* = 2-j
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 3ï¼šæ—¶ç§»æ€§è´¨</h4>
            <p>å·²çŸ¥å‘¨æœŸåºåˆ—x[n]çš„DFSä¸ºX[k]ï¼Œæ±‚y[n] = x[n-2]çš„DFS Y[k]ï¼ˆå‘¨æœŸN=8ï¼‰</p>
            <button class="show-answer" onclick="toggleAnswer('answer3')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer3" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                æ ¹æ®æ—¶ç§»æ€§è´¨ï¼šY[k] = X[k]Â·e^(-j2Ï€kÂ·2/8) = X[k]Â·e^(-jÏ€k/2)<br>
                å³ï¼šY[k] = X[k]Â·(-j)^k
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 4ï¼šDFSä¸DTFTå…³ç³»</h4>
            <p>æœ‰é™é•¿åºåˆ—h[n] = {1, 2, 1}çš„DTFTä¸ºH(e^jÏ‰)ï¼Œå°†å…¶å‘¨æœŸå»¶æ‹“ä¸ºå‘¨æœŸN=6çš„åºåˆ—ï¼Œæ±‚DFSç³»æ•°</p>
            <button class="show-answer" onclick="toggleAnswer('answer4')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer4" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                å‘¨æœŸå»¶æ‹“åºåˆ—ï¼š{1, 2, 1, 0, 0, 0}ï¼Œå‘¨æœŸN=6<br>
                DFSç³»æ•°ï¼šX[k] = H(e^j2Ï€k/6), k = 0,1,2,3,4,5<br>
                H(e^jÏ‰) = 1 + 2e^(-jÏ‰) + e^(-j2Ï‰)<br>
                å› æ­¤ï¼šX[k] = 1 + 2e^(-j2Ï€k/6) + e^(-j4Ï€k/6)
            </div>
        </div>
        
        <h2>4.6 å­¦ä¹ è¦ç‚¹æ€»ç»“</h2>
        
        <div class="important">
            <h3>ğŸ¯ æ ¸å¿ƒè¦ç‚¹</h3>
            <ol>
                <li><strong>å¯¹ç§°è§„å¾‹</strong>ï¼šæ—¶åŸŸç¦»æ•£â†”é¢‘åŸŸå‘¨æœŸï¼Œæ—¶åŸŸå‘¨æœŸâ†”é¢‘åŸŸç¦»æ•£</li>
                <li><strong>DFSå®šä¹‰</strong>ï¼šå‘¨æœŸåºåˆ—çš„é¢‘åŸŸè¡¨ç¤ºï¼Œæ—¶é¢‘åŒå‘¨æœŸ</li>
                <li><strong>è®¡ç®—å…¬å¼</strong>ï¼šæ­£å˜æ¢ï¼ˆè´ŸæŒ‡æ•°ï¼‰ã€é€†å˜æ¢ï¼ˆæ­£æŒ‡æ•°ï¼Œ1/Nï¼‰</li>
                <li><strong>é‡è¦æ€§è´¨</strong>ï¼šå‘¨æœŸæ€§ã€å¯¹ç§°æ€§ã€çº¿æ€§ã€æ—¶ç§»ã€é¢‘ç§»</li>
                <li><strong>ä¸DTFTå…³ç³»</strong>ï¼šDFSç³»æ•°æ˜¯DTFTçš„é¢‘ç‡é‡‡æ ·</li>
                <li><strong>åº”ç”¨ä»·å€¼</strong>ï¼šDFTçš„ç†è®ºåŸºç¡€ï¼Œå‘¨æœŸä¿¡å·åˆ†æå·¥å…·</li>
            </ol>
        </div>
        
        <div class="duality-box">
            <h3>ğŸ”— æ‰¿å‰å¯å</h3>
            <p><strong>å‘å‰è”ç³»ï¼š</strong>DFSæ˜¯DTFTå¯¹å‘¨æœŸåºåˆ—çš„ç‰¹åŒ–</p>
            <p><strong>å‘åè¿æ¥ï¼š</strong>DFSæ˜¯ç†è§£DFTçš„å…³é”®æ¡¥æ¢</p>
            <p><strong>å®ç”¨æ„ä¹‰ï¼š</strong>ä¸ºFFTç®—æ³•å’Œæ•°å­—æ»¤æ³¢å™¨å¥ å®šç†è®ºåŸºç¡€</p>
        </div>
    </div>

    <script>
        // ç”Ÿæˆå‘¨æœŸåºåˆ—
        function generatePeriodicSequence(type, N, width) {
            const sequence = [];
            
            for (let n = 0; n < N; n++) {
                let value = 0;
                
                switch (type) {
                    case 'rectangular':
                        value = (n < width) ? 1 : 0;
                        break;
                    case 'triangular':
                        if (n < N/2) {
                            value = 2*n/(N-1);
                        } else {
                            value = 2*(N-1-n)/(N-1);
                        }
                        break;
                    case 'sawtooth':
                        value = n / (N-1);
                        break;
                    case 'cosine':
                        value = Math.cos(2 * Math.PI * n / N);
                        break;
                }
                
                sequence.push(value);
            }
            
            return sequence;
        }
        
        // è®¡ç®—DFS
        function calculateDFS(x) {
            const N = x.length;
            const X = [];
            
            for (let k = 0; k < N; k++) {
                let real = 0;
                let imag = 0;
                
                for (let n = 0; n < N; n++) {
                    const angle = -2 * Math.PI * k * n / N;
                    real += x[n] * Math.cos(angle);
                    imag += x[n] * Math.sin(angle);
                }
                
                X.push({real: real, imag: imag, magnitude: Math.sqrt(real*real + imag*imag)});
            }
            
            return X;
        }
        
        // ç»˜åˆ¶DFSæ¼”ç¤º
        function plotDFS() {
            const type = document.getElementById('periodicType').value;
            const N = parseInt(document.getElementById('periodN').value);
            const width = parseInt(document.getElementById('pulseWidth').value);
            
            // ç”Ÿæˆåºåˆ—
            const sequence = generatePeriodicSequence(type, N, width);
            
            // è®¡ç®—DFS
            const dfsCoeffs = calculateDFS(sequence);
            
            // ç»˜åˆ¶æ—¶åŸŸåºåˆ—
            plotSequence(sequence, 'periodicSequence', 'å‘¨æœŸåºåˆ— x[n]');
            
            // ç»˜åˆ¶é¢‘åŸŸç³»æ•°
            plotDFSCoefficients(dfsCoeffs, 'dfsSpectrum', 'DFSç³»æ•°å¹…åº¦ |X[k]|');
        }
        
        // ç»˜åˆ¶åºåˆ—
        function plotSequence(data, canvasId, title) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const centerY = height * 0.8;
            const scaleX = (width - 60) / (data.length + 1);
            const maxVal = Math.max(...data.map(Math.abs)) || 1;
            const scaleY = (height * 0.5) / maxVal;
            
            // åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            ctx.beginPath();
            ctx.moveTo(30, centerY);
            ctx.lineTo(width - 30, centerY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(50, 20);
            ctx.lineTo(50, height - 20);
            ctx.stroke();
            
            // ç»˜åˆ¶åºåˆ—
            ctx.strokeStyle = 'blue';
            ctx.fillStyle = 'blue';
            ctx.lineWidth = 2;
            
            data.forEach((value, index) => {
                const x = 50 + (index + 1) * scaleX;
                const y = centerY - value * scaleY;
                
                // èŒ
                ctx.beginPath();
                ctx.moveTo(x, centerY);
                ctx.lineTo(x, y);
                ctx.stroke();
                
                // ç‚¹
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, 2 * Math.PI);
                ctx.fill();
                
                // æ ‡è®°nå€¼
                if (index % Math.ceil(data.length/8) === 0) {
                    ctx.fillStyle = '#333';
                    ctx.font = '10px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(index.toString(), x, centerY + 15);
                    ctx.fillStyle = 'blue';
                }
            });
            
            // æ ‡é¢˜
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(title, width/2, 15);
        }
        
        // ç»˜åˆ¶DFSç³»æ•°
        function plotDFSCoefficients(coeffs, canvasId, title) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const centerY = height * 0.8;
            const scaleX = (width - 60) / (coeffs.length + 1);
            const maxMag = Math.max(...coeffs.map(c => c.magnitude)) || 1;
            const scaleY = (height * 0.5) / maxMag;
            
            // åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            ctx.beginPath();
            ctx.moveTo(30, centerY);
            ctx.lineTo(width - 30, centerY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(50, 20);
            ctx.lineTo(50, height - 20);
            ctx.stroke();
            
            // ç»˜åˆ¶å¹…åº¦è°±
            ctx.strokeStyle = 'red';
            ctx.fillStyle = 'red';
            ctx.lineWidth = 2;
            
            coeffs.forEach((coeff, index) => {
                const x = 50 + (index + 1) * scaleX;
                const y = centerY - coeff.magnitude * scaleY;
                
                // èŒ
                ctx.beginPath();
                ctx.moveTo(x, centerY);
                ctx.lineTo(x, y);
                ctx.stroke();
                
                // ç‚¹
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, 2 * Math.PI);
                ctx.fill();
                
                // æ ‡è®°kå€¼
                ctx.fillStyle = '#333';
                ctx.font = '10px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(index.toString(), x, centerY + 15);
                ctx.fillStyle = 'red';
            });
            
            // æ ‡é¢˜
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(title, width/2, 15);
        }
        
        // è®¡ç®—è‡ªå®šä¹‰åºåˆ—çš„DFS
        function calculateCustomDFS() {
            const input = document.getElementById('customSequence').value;
            const sequence = input.split(',').map(x => parseFloat(x.trim())).filter(x => !isNaN(x));
            
            if (sequence.length === 0) {
                document.getElementById('dfsResult').innerHTML = '<span style="color: red;">è¯·è¾“å…¥æœ‰æ•ˆçš„åºåˆ—ï¼</span>';
                return;
            }
            
            const dfsCoeffs = calculateDFS(sequence);
            
            // æ˜¾ç¤ºç»“æœ
            let resultHTML = '<h4>DFSè®¡ç®—ç»“æœï¼š</h4>';
            resultHTML += '<table style="width: 100%; border-collapse: collapse;">';
            resultHTML += '<tr><th>k</th><th>å®éƒ¨</th><th>è™šéƒ¨</th><th>å¹…åº¦</th><th>ç›¸ä½(åº¦)</th></tr>';
            
            dfsCoeffs.forEach((coeff, k) => {
                const phase = Math.atan2(coeff.imag, coeff.real) * 180 / Math.PI;
                resultHTML += `<tr>
                    <td>${k}</td>
                    <td>${coeff.real.toFixed(3)}</td>
                    <td>${coeff.imag.toFixed(3)}</td>
                    <td>${coeff.magnitude.toFixed(3)}</td>
                    <td>${phase.toFixed(1)}Â°</td>
                </tr>`;
            });
            
            resultHTML += '</table>';
            document.getElementById('dfsResult').innerHTML = resultHTML;
            
            // ç»˜åˆ¶å›¾å½¢
            plotSequenceAndSpectrum(sequence, dfsCoeffs);
        }
        
        // ç»˜åˆ¶åºåˆ—å’Œé¢‘è°±
        function plotSequenceAndSpectrum(sequence, coeffs) {
            const canvas = document.getElementById('dfsCalculator');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // åˆ†æˆä¸¤éƒ¨åˆ†
            const halfWidth = width / 2;
            
            // å·¦è¾¹ç»˜åˆ¶æ—¶åŸŸåºåˆ—
            drawSubPlot(ctx, sequence, 0, halfWidth, height, 'è¾“å…¥åºåˆ— x[n]', 'blue', 'stems');
            
            // å³è¾¹ç»˜åˆ¶é¢‘åŸŸç³»æ•°
            const magnitudes = coeffs.map(c => c.magnitude);
            drawSubPlot(ctx, magnitudes, halfWidth, halfWidth, height, 'DFSå¹…åº¦è°± |X[k]|', 'red', 'stems');
        }
        
        // ç»˜åˆ¶å­å›¾
        function drawSubPlot(ctx, data, offsetX, subWidth, subHeight, title, color, type) {
            const centerY = subHeight * 0.8;
            const scaleX = (subWidth - 40) / (data.length + 1);
            const maxVal = Math.max(...data.map(Math.abs)) || 1;
            const scaleY = (subHeight * 0.5) / maxVal;
            
            // åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            ctx.beginPath();
            ctx.moveTo(offsetX + 20, centerY);
            ctx.lineTo(offsetX + subWidth - 20, centerY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(offsetX + 40, 20);
            ctx.lineTo(offsetX + 40, subHeight - 20);
            ctx.stroke();
            
            // ç»˜åˆ¶æ•°æ®
            ctx.strokeStyle = color;
            ctx.fillStyle = color;
            ctx.lineWidth = 2;
            
            if (type === 'stems') {
                data.forEach((value, index) => {
                    const x = offsetX + 40 + (index + 1) * scaleX;
                    const y = centerY - value * scaleY;
                    
                    // èŒ
                    ctx.beginPath();
                    ctx.moveTo(x, centerY);
                    ctx.lineTo(x, y);
                    ctx.stroke();
                    
                    // ç‚¹
                    ctx.beginPath();
                    ctx.arc(x, y, 3, 0, 2 * Math.PI);
                    ctx.fill();
                });
            }
            
            // æ ‡é¢˜
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(title, offsetX + subWidth/2, 15);
        }
        
        // åˆ‡æ¢ç­”æ¡ˆæ˜¾ç¤º
        function toggleAnswer(answerId) {
            const answer = document.getElementById(answerId);
            answer.style.display = answer.style.display === 'none' ? 'block' : 'none';
        }
        
        // é¡µé¢åŠ è½½ååˆå§‹åŒ–
        window.onload = function() {
            plotDFS();
            calculateCustomDFS();
        };
    </script>
</body>
</html>