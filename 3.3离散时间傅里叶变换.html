<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¦»æ•£æ—¶é—´å‚…é‡Œå¶å˜æ¢(DTFT)</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 30px;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        
        h2 {
            color: #34495e;
            border-left: 4px solid #3498db;
            padding-left: 15px;
            margin-top: 30px;
        }
        
        h3 {
            color: #2980b9;
            margin-top: 25px;
        }
        
        .knowledge-point {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .formula {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            font-family: 'Times New Roman', serif;
            font-size: 18px;
        }
        
        .important {
            background: #ffeaa7;
            border: 2px solid #fdcb6e;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .example {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .plot-container {
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        canvas {
            border: 1px solid #ccc;
            margin: 10px;
        }
        
        .controls {
            margin: 15px 0;
            text-align: center;
        }
        
        .controls input, .controls select {
            margin: 5px;
            padding: 5px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .controls button {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        
        .controls button:hover {
            background: #2980b9;
        }
        
        .exercise {
            background: #e8f5e8;
            border: 1px solid #c3e6c3;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .exercise h4 {
            color: #2e7d2e;
            margin-top: 0;
        }
        
        .answer {
            background: #f0f0f0;
            border-radius: 5px;
            padding: 10px;
            margin-top: 10px;
            display: none;
        }
        
        .show-answer {
            background: #28a745;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .show-answer:hover {
            background: #218838;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        
        th {
            background: #f2f2f2;
        }
        
        .highlight {
            background: #ffeb3b;
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .relationship {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .property-box {
            background: #f3e5f5;
            border: 1px solid #9c27b0;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .spectrum-display {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        
        .spectrum-part {
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ä¿¡å·åˆ†æä¸å¤„ç† - ç¬¬ä¸‰ç« ï¼šç¦»æ•£æ—¶é—´å‚…é‡Œå¶å˜æ¢(DTFT)</h1>
        
        <h2>3.1 DTFTçš„å®šä¹‰</h2>
        
        <div class="knowledge-point">
            <h3>åŸºæœ¬å®šä¹‰</h3>
            <p>åºåˆ— x[n] çš„<strong>ç¦»æ•£æ—¶é—´å‚…é‡Œå¶å˜æ¢(DTFT)</strong>å®šä¹‰ä¸ºï¼š</p>
            <div class="formula">
                X(e<sup>jÏ‰</sup>) = âˆ‘<sub>n=-âˆ</sub><sup>âˆ</sup> x[n]e<sup>-jÏ‰n</sup>
            </div>
            <p>ç›¸åº”çš„<strong>é€†å˜æ¢(IDTFT)</strong>ä¸ºï¼š</p>
            <div class="formula">
                x[n] = (1/2Ï€) âˆ«<sub>-Ï€</sub><sup>Ï€</sup> X(e<sup>jÏ‰</sup>)e<sup>jÏ‰n</sup>dÏ‰
            </div>
            <p>å…¶ä¸­ï¼š</p>
            <ul>
                <li><strong>Ï‰</strong>ï¼šæ•°å­—è§’é¢‘ç‡ï¼ˆå¼§åº¦ï¼‰ï¼Œ-Ï€ â‰¤ Ï‰ â‰¤ Ï€</li>
                <li><strong>X(e<sup>jÏ‰</sup>)</strong>ï¼šx[n]çš„é¢‘è°±å‡½æ•°</li>
                <li><strong>e<sup>jÏ‰</sup></strong>ï¼šå•ä½åœ†ä¸Šçš„å¤æŒ‡æ•°</li>
            </ul>
        </div>
        
        <div class="relationship">
            <h3>ğŸ”— ä¸zå˜æ¢çš„å…³ç³»</h3>
            <p><strong>DTFTæ˜¯zå˜æ¢åœ¨å•ä½åœ†ä¸Šçš„ç‰¹ä¾‹ï¼š</strong></p>
            <div class="formula">
                X(e<sup>jÏ‰</sup>) = X(z)|<sub>z=e<sup>jÏ‰</sup></sub>
            </div>
            <p>å½“zå˜æ¢çš„ROCåŒ…å«å•ä½åœ†æ—¶ï¼ŒDTFTå­˜åœ¨ã€‚</p>
        </div>
        
        <h2>3.2 ç‰©ç†æ„ä¹‰</h2>
        
        <div class="knowledge-point">
            <h3>é¢‘åŸŸåˆ†æçš„æœ¬è´¨</h3>
            <ol>
                <li><strong>é¢‘è°±åˆ†è§£</strong>ï¼šå°†ç¦»æ•£ä¿¡å·åˆ†è§£ä¸ºä¸åŒé¢‘ç‡çš„å¤æŒ‡æ•°åˆ†é‡</li>
                <li><strong>é¢‘ç‡å“åº”</strong>ï¼šæè¿°ç³»ç»Ÿå¯¹ä¸åŒé¢‘ç‡åˆ†é‡çš„å“åº”ç‰¹æ€§</li>
                <li><strong>èƒ½é‡åˆ†å¸ƒ</strong>ï¼š|X(e<sup>jÏ‰</sup>)|Â²è¡¨ç¤ºä¿¡å·åœ¨å„é¢‘ç‡ä¸Šçš„èƒ½é‡åˆ†å¸ƒ</li>
                <li><strong>ç›¸ä½ä¿¡æ¯</strong>ï¼šâˆ X(e<sup>jÏ‰</sup>)è¡¨ç¤ºå„é¢‘ç‡åˆ†é‡çš„ç›¸ä½å…³ç³»</li>
            </ol>
        </div>
        
        <div class="example">
            <h4>å‡ ä½•è§£é‡Š</h4>
            <p>DTFTå¯ä»¥ç†è§£ä¸ºï¼š</p>
            <ul>
                <li>å°†åºåˆ—æŠ•å½±åˆ°å•ä½åœ†ä¸Šä¸åŒé¢‘ç‡çš„å¤æŒ‡æ•°åŸºå‡½æ•°</li>
                <li>æ¯ä¸ªé¢‘ç‡Ï‰å¯¹åº”å•ä½åœ†ä¸Šä¸€ä¸ªç‚¹ e<sup>jÏ‰</sup></li>
                <li>X(e<sup>jÏ‰</sup>)ç»™å‡ºäº†è¯¥é¢‘ç‡åˆ†é‡çš„å¤æŒ¯å¹…</li>
            </ul>
        </div>
        
        <h2>3.3 DTFTçš„é‡è¦ç‰¹ç‚¹</h2>
        
        <div class="property-box">
            <h3>1. å‘¨æœŸæ€§</h3>
            <div class="formula">
                X(e<sup>j(Ï‰+2Ï€)</sup>) = X(e<sup>jÏ‰</sup>)
            </div>
            <p><strong>åŸå› ï¼š</strong>e<sup>j(Ï‰+2Ï€)n</sup> = e<sup>jÏ‰n</sup>e<sup>j2Ï€n</sup> = e<sup>jÏ‰n</sup></p>
            <p><span class="highlight">å› æ­¤ï¼Œåªéœ€è¦åˆ†æä¸€ä¸ªå‘¨æœŸå†…çš„é¢‘è°±å³å¯</span></p>
        </div>
        
        <div class="property-box">
            <h3>2. å®åºåˆ—çš„å…±è½­å¯¹ç§°æ€§</h3>
            <p>å½“ x[n] ä¸ºå®åºåˆ—æ—¶ï¼š</p>
            <div class="formula">
                X(e<sup>j(-Ï‰)</sup>) = X*(e<sup>jÏ‰</sup>)
            </div>
            <p>è¿™æ„å‘³ç€ï¼š</p>
            <ul>
                <li><strong>å¹…åº¦è°±</strong>ï¼š|X(e<sup>jÏ‰</sup>)|ä¸ºå¶å‡½æ•°</li>
                <li><strong>ç›¸ä½è°±</strong>ï¼šâˆ X(e<sup>jÏ‰</sup>)ä¸ºå¥‡å‡½æ•°</li>
            </ul>
        </div>
        
        <div class="property-box">
            <h3>3. è¿ç»­æ€§</h3>
            <p>DTFTæ˜¯è¿ç»­å‡½æ•°ï¼Œä¸åŒäºç¦»æ•£å‚…é‡Œå¶å˜æ¢(DFT)çš„ç¦»æ•£ç‰¹æ€§</p>
        </div>
        
        <div class="plot-container">
            <h3>DTFTç‰¹æ€§å¯è§†åŒ–</h3>
            <div class="spectrum-display">
                <div class="spectrum-part">
                    <canvas id="magnitudeSpectrum" width="350" height="250"></canvas>
                    <p>å¹…åº¦è°± |X(e<sup>jÏ‰</sup>)|</p>
                </div>
                <div class="spectrum-part">
                    <canvas id="phaseSpectrum" width="350" height="250"></canvas>
                    <p>ç›¸ä½è°± âˆ X(e<sup>jÏ‰</sup>)</p>
                </div>
            </div>
            <div class="controls">
                <label>é€‰æ‹©åºåˆ—ï¼š</label>
                <select id="spectrumSequence">
                    <option value="rectangular">çŸ©å½¢åºåˆ—</option>
                    <option value="exponential">æŒ‡æ•°åºåˆ—</option>
                    <option value="sinc">sincåºåˆ—</option>
                    <option value="triangular">ä¸‰è§’åºåˆ—</option>
                </select>
                <label>åºåˆ—é•¿åº¦Nï¼š</label>
                <input type="number" id="seqLength" value="8" min="4" max="16">
                <button onclick="plotSpectrum()">ç»˜åˆ¶é¢‘è°±</button>
            </div>
        </div>
        
        <h2>3.4 å­˜åœ¨æ¡ä»¶</h2>
        
        <div class="knowledge-point">
            <h3>ç»å¯¹å¯ç§¯æ¡ä»¶</h3>
            <p>DTFTå­˜åœ¨çš„<strong>å……åˆ†æ¡ä»¶</strong>æ˜¯åºåˆ—ç»å¯¹å¯ç§¯ï¼š</p>
            <div class="formula">
                âˆ‘<sub>n=-âˆ</sub><sup>âˆ</sup> |x[n]| < âˆ
            </div>
            <p>è¿™ä¿è¯äº†DTFTçš„å­˜åœ¨æ€§å’Œä¸€è‡´æ”¶æ•›æ€§ã€‚</p>
        </div>
        
        <div class="important">
            <h3>âš ï¸ ç‰¹æ®Šæƒ…å†µ</h3>
            <p>æŸäº›ä¸æ»¡è¶³ç»å¯¹å¯ç§¯æ¡ä»¶çš„åºåˆ—ï¼Œå…¶DTFTå¯èƒ½ä»¥<strong>å¹¿ä¹‰å‡½æ•°ï¼ˆå†²æ¿€å‡½æ•°ï¼‰</strong>çš„å½¢å¼å­˜åœ¨ï¼š</p>
            <ul>
                <li><strong>å¸¸æ•°åºåˆ—</strong>ï¼šx[n] = 1</li>
                <li><strong>æ­£å¼¦åºåˆ—</strong>ï¼šx[n] = cos(Ï‰â‚€n)</li>
                <li><strong>é˜¶è·ƒåºåˆ—</strong>ï¼šx[n] = u[n]</li>
            </ul>
        </div>
        
        <div class="example">
            <h4>å­˜åœ¨æ€§åˆ¤æ–­å®ä¾‹</h4>
            <table>
                <tr>
                    <th>åºåˆ—</th>
                    <th>ç»å¯¹å¯ç§¯æ€§</th>
                    <th>DTFTå­˜åœ¨æ€§</th>
                    <th>å¤‡æ³¨</th>
                </tr>
                <tr>
                    <td>a<sup>n</sup>u[n], |a|<1</td>
                    <td>æ»¡è¶³</td>
                    <td>å­˜åœ¨</td>
                    <td>æ”¶æ•›æŒ‡æ•°åºåˆ—</td>
                </tr>
                <tr>
                    <td>a<sup>n</sup>u[n], |a|â‰¥1</td>
                    <td>ä¸æ»¡è¶³</td>
                    <td>ä¸å­˜åœ¨</td>
                    <td>å‘æ•£åºåˆ—</td>
                </tr>
                <tr>
                    <td>çŸ©å½¢çª—åºåˆ—</td>
                    <td>æ»¡è¶³</td>
                    <td>å­˜åœ¨</td>
                    <td>æœ‰é™é•¿åºåˆ—</td>
                </tr>
                <tr>
                    <td>cos(Ï‰â‚€n)</td>
                    <td>ä¸æ»¡è¶³</td>
                    <td>å¹¿ä¹‰å­˜åœ¨</td>
                    <td>åŒ…å«å†²æ¿€å‡½æ•°</td>
                </tr>
            </table>
        </div>
        
        <h2>3.5 å¸¸è§åºåˆ—çš„DTFT</h2>
        
        <div class="knowledge-point">
            <h3>åŸºæœ¬DTFTå˜æ¢å¯¹</h3>
            <table>
                <tr>
                    <th>åºåˆ— x[n]</th>
                    <th>DTFT X(e<sup>jÏ‰</sup>)</th>
                    <th>å­˜åœ¨æ¡ä»¶</th>
                </tr>
                <tr>
                    <td>Î´[n]</td>
                    <td>1</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td>Î´[n-nâ‚€]</td>
                    <td>e<sup>-jÏ‰nâ‚€</sup></td>
                    <td>-</td>
                </tr>
                <tr>
                    <td>a<sup>n</sup>u[n]</td>
                    <td>1/(1-ae<sup>-jÏ‰</sup>)</td>
                    <td>|a| < 1</td>
                </tr>
                <tr>
                    <td>çŸ©å½¢çª— R_N[n]</td>
                    <td>sin(Ï‰N/2)/sin(Ï‰/2) Â· e<sup>-jÏ‰(N-1)/2</sup></td>
                    <td>-</td>
                </tr>
                <tr>
                    <td>1 (å¸¸æ•°)</td>
                    <td>2Ï€âˆ‘Î´(Ï‰-2Ï€k)</td>
                    <td>å¹¿ä¹‰</td>
                </tr>
                <tr>
                    <td>cos(Ï‰â‚€n)</td>
                    <td>Ï€[Î´(Ï‰-Ï‰â‚€)+Î´(Ï‰+Ï‰â‚€)]</td>
                    <td>å¹¿ä¹‰</td>
                </tr>
                <tr>
                    <td>sin(Ï‰â‚€n)</td>
                    <td>jÏ€[Î´(Ï‰+Ï‰â‚€)-Î´(Ï‰-Ï‰â‚€)]</td>
                    <td>å¹¿ä¹‰</td>
                </tr>
                <tr>
                    <td>u[n]</td>
                    <td>1/(1-e<sup>-jÏ‰</sup>) + Ï€âˆ‘Î´(Ï‰-2Ï€k)</td>
                    <td>å¹¿ä¹‰</td>
                </tr>
            </table>
        </div>
        
        <div class="plot-container">
            <h3>å¸¸è§åºåˆ—DTFTå¯¹æ¯”</h3>
            <canvas id="dtftComparison" width="800" height="400"></canvas>
            <div class="controls">
                <label>å¯¹æ¯”åºåˆ—1ï¼š</label>
                <select id="seq1Type">
                    <option value="rect4">çŸ©å½¢çª—(N=4)</option>
                    <option value="rect8">çŸ©å½¢çª—(N=8)</option>
                    <option value="exp0.5">æŒ‡æ•°åºåˆ—(a=0.5)</option>
                    <option value="exp0.8">æŒ‡æ•°åºåˆ—(a=0.8)</option>
                </select>
                <label>å¯¹æ¯”åºåˆ—2ï¼š</label>
                <select id="seq2Type">
                    <option value="rect8">çŸ©å½¢çª—(N=8)</option>
                    <option value="rect4">çŸ©å½¢çª—(N=4)</option>
                    <option value="exp0.8">æŒ‡æ•°åºåˆ—(a=0.8)</option>
                    <option value="exp0.5">æŒ‡æ•°åºåˆ—(a=0.5)</option>
                </select>
                <button onclick="plotDTFTComparison()">å¯¹æ¯”é¢‘è°±</button>
            </div>
        </div>
        
        <h2>3.6 DTFTè®¡ç®—æ–¹æ³•</h2>
        
        <div class="knowledge-point">
            <h3>è®¡ç®—æ­¥éª¤</h3>
            <ol>
                <li><strong>æ£€æŸ¥å­˜åœ¨æ¡ä»¶</strong>ï¼šéªŒè¯ç»å¯¹å¯ç§¯æ€§</li>
                <li><strong>åº”ç”¨å®šä¹‰</strong>ï¼šç›´æ¥è®¡ç®—çº§æ•°æˆ–æŸ¥è¡¨</li>
                <li><strong>åˆ©ç”¨æ€§è´¨</strong>ï¼šæ—¶ç§»ã€é¢‘ç§»ã€å¯¹ç§°æ€§ç­‰</li>
                <li><strong>å‡ ä½•çº§æ•°æ±‚å’Œ</strong>ï¼šå¯¹äºæŒ‡æ•°ç±»åºåˆ—</li>
                <li><strong>åˆ†æ®µå¤„ç†</strong>ï¼šæœ‰é™é•¿åºåˆ—åˆ†æ®µè®¡ç®—</li>
            </ol>
        </div>
        
        <div class="example">
            <h4>è®¡ç®—å®ä¾‹ï¼šçŸ©å½¢çª—åºåˆ—</h4>
            <p><strong>é—®é¢˜ï¼š</strong>æ±‚çŸ©å½¢çª—åºåˆ—çš„DTFT</p>
            <p>x[n] = {1, 0 â‰¤ n â‰¤ N-1; 0, å…¶ä»–}</p>
            <p><strong>è§£ï¼š</strong></p>
            <div class="formula">
                X(e<sup>jÏ‰</sup>) = âˆ‘<sub>n=0</sub><sup>N-1</sup> e<sup>-jÏ‰n</sup> = (1-e<sup>-jÏ‰N</sup>)/(1-e<sup>-jÏ‰</sup>)
            </div>
            <p>åŒ–ç®€å¾—åˆ°ï¼š</p>
            <div class="formula">
                X(e<sup>jÏ‰</sup>) = e<sup>-jÏ‰(N-1)/2</sup> Â· sin(Ï‰N/2)/sin(Ï‰/2)
            </div>
        </div>
        
        <h2>ç»ƒä¹ é¢˜ç›®</h2>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 1ï¼šDTFTåŸºæœ¬è®¡ç®—</h4>
            <p>æ±‚ä¸‹åˆ—åºåˆ—çš„DTFTï¼š</p>
            <ol>
                <li>xâ‚[n] = (0.5)<sup>n</sup>u[n]</li>
                <li>xâ‚‚[n] = (0.5)<sup>|n|</sup></li>
                <li>xâ‚ƒ[n] = {1, -2â‰¤nâ‰¤2; 0, å…¶ä»–}</li>
            </ol>
            <button class="show-answer" onclick="toggleAnswer('answer1')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer1" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                1. Xâ‚(e^jÏ‰) = 1/(1-0.5e^(-jÏ‰))<br>
                2. Xâ‚‚(e^jÏ‰) = (1-0.25)/(1-0.5e^(-jÏ‰)) + (1-0.25)/(1-0.5e^(jÏ‰)) - 1 = (1.75-cos(Ï‰))/(1.25-cos(Ï‰))<br>
                3. Xâ‚ƒ(e^jÏ‰) = 1 + 2cos(Ï‰) + 2cos(2Ï‰)
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 2ï¼šå­˜åœ¨æ€§åˆ¤æ–­</h4>
            <p>åˆ¤æ–­ä¸‹åˆ—åºåˆ—çš„DTFTå­˜åœ¨æ€§ï¼š</p>
            <ol>
                <li>xâ‚[n] = nÂ·(0.8)<sup>n</sup>u[n]</li>
                <li>xâ‚‚[n] = (1.2)<sup>n</sup>u[n]</li>
                <li>xâ‚ƒ[n] = (0.9)<sup>|n|</sup></li>
                <li>xâ‚„[n] = cos(Ï€n/3)u[n]</li>
            </ol>
            <button class="show-answer" onclick="toggleAnswer('answer2')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer2" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                1. å­˜åœ¨ï¼ˆ|0.8| < 1ï¼Œç»å¯¹å¯ç§¯ï¼‰<br>
                2. ä¸å­˜åœ¨ï¼ˆ|1.2| > 1ï¼Œä¸ç»å¯¹å¯ç§¯ï¼‰<br>
                3. å­˜åœ¨ï¼ˆåŒè¾¹æŒ‡æ•°åºåˆ—ï¼Œ|0.9| < 1ï¼‰<br>
                4. ä¸å­˜åœ¨ï¼ˆå‘¨æœŸåºåˆ—ï¼Œä¸ç»å¯¹å¯ç§¯ï¼Œä½†å¯èƒ½å¹¿ä¹‰å­˜åœ¨ï¼‰
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 3ï¼šé¢‘è°±æ€§è´¨åº”ç”¨</h4>
            <p>å·²çŸ¥ x[n] = (0.5)<sup>n</sup>u[n] çš„DTFTä¸º X(e<sup>jÏ‰</sup>) = 1/(1-0.5e<sup>-jÏ‰</sup>)</p>
            <p>æ±‚ä¸‹åˆ—åºåˆ—çš„DTFTï¼š</p>
            <ol>
                <li>yâ‚[n] = x[n-3]</li>
                <li>yâ‚‚[n] = e<sup>jÏ€n/4</sup>x[n]</li>
                <li>yâ‚ƒ[n] = x[-n]</li>
            </ol>
            <button class="show-answer" onclick="toggleAnswer('answer3')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer3" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                1. Yâ‚(e^jÏ‰) = e^(-j3Ï‰)/(1-0.5e^(-jÏ‰))ï¼ˆæ—¶ç§»æ€§è´¨ï¼‰<br>
                2. Yâ‚‚(e^jÏ‰) = 1/(1-0.5e^(-j(Ï‰-Ï€/4)))ï¼ˆé¢‘ç§»æ€§è´¨ï¼‰<br>
                3. Yâ‚ƒ(e^jÏ‰) = 1/(1-0.5e^(jÏ‰))ï¼ˆæ—¶é—´åæŠ˜æ€§è´¨ï¼‰
            </div>
        </div>
        
        <div class="exercise">
            <h4>ç»ƒä¹ 4ï¼šé¢‘è°±åˆ†æ</h4>
            <p>çŸ©å½¢çª—åºåˆ— x[n] = {1, 0â‰¤nâ‰¤7; 0, å…¶ä»–} çš„å¹…åº¦è°±åœ¨å“ªäº›é¢‘ç‡å¤„ä¸ºé›¶ï¼Ÿ</p>
            <button class="show-answer" onclick="toggleAnswer('answer4')">æ˜¾ç¤ºç­”æ¡ˆ</button>
            <div id="answer4" class="answer">
                <strong>ç­”æ¡ˆï¼š</strong><br>
                å¹…åº¦è°± |X(e^jÏ‰)| = |sin(4Ï‰)/sin(Ï‰/2)|<br>
                é›¶ç‚¹å‡ºç°åœ¨ï¼šÏ‰ = 2Ï€k/8, k = Â±1, Â±2, Â±3, ...(é™¤äº†k=0,Â±8,Â±16,...)<br>
                å³ï¼šÏ‰ = Ï€/4, Ï€/2, 3Ï€/4, Ï€, 5Ï€/4, 3Ï€/2, 7Ï€/4
            </div>
        </div>
        
        <h2>3.7 å­¦ä¹ è¦ç‚¹æ€»ç»“</h2>
        
        <div class="important">
            <h3>ğŸ¯ æ ¸å¿ƒè¦ç‚¹</h3>
            <ol>
                <li><strong>å®šä¹‰ç†è§£</strong>ï¼šDTFT = zå˜æ¢åœ¨å•ä½åœ†ä¸Š</li>
                <li><strong>å‘¨æœŸæ€§</strong>ï¼šé¢‘è°±ä»¥2Ï€ä¸ºå‘¨æœŸ</li>
                <li><strong>å¯¹ç§°æ€§</strong>ï¼šå®åºåˆ—çš„å¹…åº¦è°±å¶å¯¹ç§°ï¼Œç›¸ä½è°±å¥‡å¯¹ç§°</li>
                <li><strong>å­˜åœ¨æ¡ä»¶</strong>ï¼šç»å¯¹å¯ç§¯æ˜¯å……åˆ†æ¡ä»¶</li>
                <li><strong>ç‰©ç†æ„ä¹‰</strong>ï¼šé¢‘ç‡åŸŸåˆ†æçš„åŸºç¡€å·¥å…·</li>
                <li><strong>åº”ç”¨ä»·å€¼</strong>ï¼šç³»ç»Ÿé¢‘ç‡å“åº”åˆ†æçš„åŸºç¡€</li>
            </ol>
        </div>
    </div>

    <script>
        // ç»˜åˆ¶é¢‘è°±å‡½æ•°
        function plotSpectrum() {
            const sequenceType = document.getElementById('spectrumSequence').value;
            const N = parseInt(document.getElementById('seqLength').value);
            
            plotMagnitudeSpectrum(sequenceType, N);
            plotPhaseSpectrum(sequenceType, N);
        }
        
        function plotMagnitudeSpectrum(type, N) {
            const canvas = document.getElementById('magnitudeSpectrum');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // åæ ‡ç³»è®¾ç½®
            const centerY = height * 0.8;
            const scaleX = width / (2 * Math.PI);
            const scaleY = height * 0.3;
            
            // ç”»åæ ‡è½´
            drawAxes(ctx, width, height, centerY, 'Ï‰', '|X(e^jÏ‰)|');
            
            // è®¡ç®—å¹¶ç»˜åˆ¶å¹…åº¦è°±
            ctx.strokeStyle = 'red';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            for (let omega = -Math.PI; omega <= Math.PI; omega += 0.02) {
                const magnitude = calculateMagnitudeSpectrum(type, N, omega);
                const x = width/2 + omega * scaleX;
                const y = centerY - magnitude * scaleY;
                
                if (omega === -Math.PI) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // æ ‡è®°ä¸»è¦é¢‘ç‡ç‚¹
            markFrequencyPoints(ctx, width, height, centerY, scaleX);
        }
        
        function plotPhaseSpectrum(type, N) {
            const canvas = document.getElementById('phaseSpectrum');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const centerY = height / 2;
            const scaleX = width / (2 * Math.PI);
            const scaleY = height * 0.3 / Math.PI;
            
            // ç”»åæ ‡è½´
            drawAxes(ctx, width, height, centerY, 'Ï‰', 'âˆ X(e^jÏ‰)');
            
            // ç”»Â±Ï€å‚è€ƒçº¿
            ctx.strokeStyle = '#ddd';
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(20, centerY - Math.PI * scaleY);
            ctx.lineTo(width - 20, centerY - Math.PI * scaleY);
            ctx.moveTo(20, centerY + Math.PI * scaleY);
            ctx.lineTo(width - 20, centerY + Math.PI * scaleY);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // è®¡ç®—å¹¶ç»˜åˆ¶ç›¸ä½è°±
            ctx.strokeStyle = 'blue';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            let firstPoint = true;
            for (let omega = -Math.PI; omega <= Math.PI; omega += 0.02) {
                const phase = calculatePhaseSpectrum(type, N, omega);
                const x = width/2 + omega * scaleX;
                const y = centerY - phase * scaleY;
                
                if (firstPoint) {
                    ctx.moveTo(x, y);
                    firstPoint = false;
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // æ ‡è®°ç›¸ä½å€¼
            ctx.fillStyle = '#333';
            ctx.font = '10px Arial';
            ctx.textAlign = 'right';
            ctx.fillText('Ï€', 15, centerY - Math.PI * scaleY + 3);
            ctx.fillText('0', 15, centerY + 3);
            ctx.fillText('-Ï€', 15, centerY + Math.PI * scaleY + 3);
        }
        
        function calculateMagnitudeSpectrum(type, N, omega) {
            let magnitude = 0;
            
            switch (type) {
                case 'rectangular':
                    if (Math.abs(omega) < 1e-6) {
                        magnitude = N;
                    } else {
                        magnitude = Math.abs(Math.sin(omega * N / 2) / Math.sin(omega / 2));
                    }
                    break;
                case 'exponential':
                    const a = 0.7;
                    magnitude = 1 / Math.sqrt(1 + a*a - 2*a*Math.cos(omega));
                    break;
                case 'sinc':
                    // sincåºåˆ—çš„è¿‘ä¼¼
                    magnitude = Math.abs(Math.sin(omega * 3) / (omega * 3)) || 1;
                    break;
                case 'triangular':
                    const tri_mag = Math.pow(Math.sin(omega * N / 2) / Math.sin(omega / 2), 2);
                    magnitude = Math.abs(tri_mag) / N;
                    break;
            }
            
            return Math.min(magnitude, 5); // é™åˆ¶æœ€å¤§å€¼
        }
        
        function calculatePhaseSpectrum(type, N, omega) {
            let phase = 0;
            
            switch (type) {
                case 'rectangular':
                    phase = -omega * (N - 1) / 2;
                    break;
                case 'exponential':
                    const a = 0.7;
                    phase = -Math.atan2(a * Math.sin(omega), 1 - a * Math.cos(omega));
                    break;
                case 'sinc':
                    phase = omega > 0 ? -omega : omega;
                    break;
                case 'triangular':
                    phase = -omega * (N - 1) / 2;
                    break;
            }
            
            // å°†ç›¸ä½é™åˆ¶åœ¨[-Ï€, Ï€]èŒƒå›´å†…
            while (phase > Math.PI) phase -= 2 * Math.PI;
            while (phase < -Math.PI) phase += 2 * Math.PI;
            
            return phase;
        }
        
        function drawAxes(ctx, width, height, centerY, xLabel, yLabel) {
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            // xè½´
            ctx.beginPath();
            ctx.moveTo(20, centerY);
            ctx.lineTo(width - 20, centerY);
            ctx.stroke();
            
            // yè½´
            ctx.beginPath();
            ctx.moveTo(width/2, 20);
            ctx.lineTo(width/2, height - 20);
            ctx.stroke();
            
            // æ ‡ç­¾
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(xLabel, width - 10, centerY + 15);
            ctx.fillText(yLabel, width/2, 15);
        }
        
        function markFrequencyPoints(ctx, width, height, centerY, scaleX) {
            const points = [-Math.PI, -Math.PI/2, 0, Math.PI/2, Math.PI];
            const labels = ['-Ï€', '-Ï€/2', '0', 'Ï€/2', 'Ï€'];
            
            ctx.fillStyle = '#333';
            ctx.font = '10px Arial';
            ctx.textAlign = 'center';
            
            points.forEach((point, index) => {
                const x = width/2 + point * scaleX;
                
                // åˆ»åº¦çº¿
                ctx.beginPath();
                ctx.moveTo(x, centerY - 3);
                ctx.lineTo(x, centerY + 3);
                ctx.stroke();
                
                // æ ‡ç­¾
                ctx.fillText(labels[index], x, centerY + 15);
            });
        }
        
        function plotDTFTComparison() {
            const canvas = document.getElementById('dtftComparison');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const seq1Type = document.getElementById('seq1Type').value;
            const seq2Type = document.getElementById('seq2Type').value;
            
            // åˆ†æˆä¸¤ä¸ªå­å›¾
            const subHeight = height / 2;
            
            // ç»˜åˆ¶ç¬¬ä¸€ä¸ªåºåˆ—çš„é¢‘è°±
            drawSingleSpectrum(ctx, seq1Type, 0, subHeight, width, 'åºåˆ—1é¢‘è°±', 'red');
            
            // ç»˜åˆ¶ç¬¬äºŒä¸ªåºåˆ—çš„é¢‘è°±
            drawSingleSpectrum(ctx, seq2Type, subHeight, subHeight, width, 'åºåˆ—2é¢‘è°±', 'blue');
        }
        
        function drawSingleSpectrum(ctx, seqType, offsetY, subHeight, width, title, color) {
            const centerY = offsetY + subHeight * 0.8;
            const scaleX = width / (2 * Math.PI);
            const scaleY = subHeight * 0.3;
            
            // åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            ctx.beginPath();
            ctx.moveTo(20, centerY);
            ctx.lineTo(width - 20, centerY);
            ctx.stroke();
            
            // ç»˜åˆ¶é¢‘è°±
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            for (let omega = -Math.PI; omega <= Math.PI; omega += 0.02) {
                const magnitude = getSpectrumForType(seqType, omega);
                const x = width/2 + omega * scaleX;
                const y = centerY - magnitude * scaleY;
                
                if (omega === -Math.PI) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // æ ‡é¢˜
            ctx.fillStyle = color;
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(title, width/2, offsetY + 20);
        }
        
        function getSpectrumForType(seqType, omega) {
            switch (seqType) {
                case 'rect4':
                    return calculateMagnitudeSpectrum('rectangular', 4, omega);
                case 'rect8':
                    return calculateMagnitudeSpectrum('rectangular', 8, omega);
                case 'exp0.5':
                    const a1 = 0.5;
                    return 1 / Math.sqrt(1 + a1*a1 - 2*a1*Math.cos(omega));
                case 'exp0.8':
                    const a2 = 0.8;
                    return 1 / Math.sqrt(1 + a2*a2 - 2*a2*Math.cos(omega));
                default:
                    return 0;
            }
        }
        
        // åˆ‡æ¢ç­”æ¡ˆæ˜¾ç¤º
        function toggleAnswer(answerId) {
            const answer = document.getElementById(answerId);
            answer.style.display = answer.style.display === 'none' ? 'block' : 'none';
        }
        
        // é¡µé¢åŠ è½½ååˆå§‹åŒ–
        window.onload = function() {
            plotSpectrum();
            plotDTFTComparison();
        };
    </script>
</body>
</html>