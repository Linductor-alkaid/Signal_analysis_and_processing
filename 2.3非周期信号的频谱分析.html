<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éå‘¨æœŸä¿¡å·çš„é¢‘è°±åˆ†æ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
            padding: 30px;
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 30px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        h2 {
            color: #34495e;
            border-left: 4px solid #667eea;
            padding-left: 15px;
            margin-top: 40px;
        }
        
        h3 {
            color: #764ba2;
            margin-top: 25px;
        }
        
        .section {
            margin-bottom: 40px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .formula {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Times New Roman', serif;
            font-size: 1.1em;
            margin: 15px 0;
            border-left: 4px solid #667eea;
            text-align: center;
        }
        
        .formula-pair {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .forward-transform {
            background: #e8f5e8;
            border-left: 4px solid #27ae60;
        }
        
        .inverse-transform {
            background: #fef9e7;
            border-left: 4px solid #f39c12;
        }
        
        .canvas-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .signal-canvas {
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            background: white;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .controls {
            background: #f0f3ff;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 1px solid #667eea;
        }
        
        .controls label {
            margin-right: 15px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .controls input, .controls select {
            margin: 5px;
            padding: 5px 10px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
        }
        
        button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 5px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .exercise {
            background: #fff8e1;
            border: 1px solid #ffcc02;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .exercise h4 {
            color: #f57f17;
            margin-top: 0;
        }
        
        .answer-input {
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 4px;
            margin: 10px;
            width: 200px;
        }
        
        .feedback {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }
        
        .correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .key-points {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .key-points h4 {
            color: #0d47a1;
            margin-top: 0;
        }
        
        .transform-demo {
            background: #f3e5f5;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #9c27b0;
        }
        
        .properties-demo {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #4caf50;
        }
        
        .typical-signals {
            background: #fff3e0;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #ff9800;
        }
        
        .periodic-ft {
            background: #fce4ec;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #e91e63;
        }
        
        .spectrum-display {
            font-family: monospace;
            background: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border: 1px solid #ddd;
            max-height: 150px;
            overflow-y: auto;
        }
        
        .dual-view {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            align-items: start;
        }
        
        ul li {
            margin: 8px 0;
        }
        
        .math-expression {
            font-size: 0.9em;
            color: #666;
            font-style: italic;
        }
        
        .highlight {
            background: #ffeb3b;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .property-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .property-card h5 {
            margin-top: 0;
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒˆ éå‘¨æœŸä¿¡å·çš„é¢‘è°±åˆ†æ</h1>
        
        <div class="section">
            <h2>1. å‚…é‡Œå¶å˜æ¢çš„å®šä¹‰</h2>
            
            <h3>1.1 ä»å‚…é‡Œå¶çº§æ•°åˆ°å‚…é‡Œå¶å˜æ¢</h3>
            <div class="key-points">
                <h4>å˜æ¢çš„äº§ç”Ÿï¼š</h4>
                <ul>
                    <li>å‘¨æœŸä¿¡å· â†’ ç¦»æ•£é¢‘è°±ï¼ˆå‚…é‡Œå¶çº§æ•°ï¼‰</li>
                    <li>éå‘¨æœŸä¿¡å· â†’ è¿ç»­é¢‘è°±ï¼ˆå‚…é‡Œå¶å˜æ¢ï¼‰</li>
                    <li>å½“å‘¨æœŸTâ†’âˆæ—¶ï¼ŒåŸºé¢‘Î©â†’0ï¼Œç¦»æ•£è°±çº¿å˜ä¸ºè¿ç»­é¢‘è°±</li>
                </ul>
            </div>
            
            <h3>1.2 å‚…é‡Œå¶å˜æ¢å¯¹</h3>
            <div class="formula-pair">
                <div class="formula forward-transform">
                    <strong>æ­£å˜æ¢ï¼ˆæ—¶åŸŸâ†’é¢‘åŸŸï¼‰</strong><br>
                    X(jÏ‰) = âˆ«_{-âˆ}^{âˆ} x(t)e^{-jÏ‰t}dt
                </div>
                <div class="formula inverse-transform">
                    <strong>é€†å˜æ¢ï¼ˆé¢‘åŸŸâ†’æ—¶åŸŸï¼‰</strong><br>
                    x(t) = (1/2Ï€)âˆ«_{-âˆ}^{âˆ} X(jÏ‰)e^{jÏ‰t}dÏ‰
                </div>
            </div>
            
            <div class="formula">
                è®°å·ï¼šx(t) â†” X(jÏ‰) æˆ– x(t) âŸ· X(jÏ‰)
            </div>
            
            <div class="transform-demo">
                <h4>å‚…é‡Œå¶å˜æ¢å¯è§†åŒ–</h4>
                <div class="controls">
                    <label>é€‰æ‹©ä¿¡å·:</label>
                    <select id="ftSignal" onchange="updateFourierTransform()">
                        <option value="rect">çŸ©å½¢è„‰å†²</option>
                        <option value="exp">å•è¾¹æŒ‡æ•°</option>
                        <option value="gaussian">é«˜æ–¯è„‰å†²</option>
                        <option value="triangle">ä¸‰è§’è„‰å†²</option>
                    </select>
                    <label>å‚æ•°è°ƒèŠ‚:</label>
                    <input type="range" id="ftParam" min="0.5" max="5" step="0.1" value="2">
                    <span id="ftParamValue">2</span>
                    <button onclick="updateFourierTransform()">æ›´æ–°å˜æ¢</button>
                </div>
                <div class="canvas-container">
                    <canvas id="ftTimeCanvas" class="signal-canvas" width="600" height="300"></canvas>
                    <canvas id="ftFreqCanvas" class="signal-canvas" width="600" height="300"></canvas>
                </div>
                <div id="ftFormula" class="spectrum-display">å˜æ¢å…¬å¼å°†åœ¨è¿™é‡Œæ˜¾ç¤º</div>
            </div>
            
            <div class="exercise">
                <h4>ğŸ”§ ç»ƒä¹ é¢˜1ï¼š</h4>
                <p>çŸ©å½¢è„‰å†²ä¿¡å·çš„å‚…é‡Œå¶å˜æ¢æ˜¯ä»€ä¹ˆå‡½æ•°ï¼Ÿ</p>
                <select id="answer1" class="answer-input">
                    <option value="">é€‰æ‹©ç­”æ¡ˆ</option>
                    <option value="sinc">sincå‡½æ•°</option>
                    <option value="exp">æŒ‡æ•°å‡½æ•°</option>
                    <option value="gaussian">é«˜æ–¯å‡½æ•°</option>
                </select>
                <button onclick="checkAnswer1()">æäº¤ç­”æ¡ˆ</button>
                <div id="feedback1" class="feedback" style="display:none;"></div>
            </div>
        </div>
        
        <div class="section">
            <h2>2. å…¸å‹éå‘¨æœŸä¿¡å·çš„é¢‘è°±</h2>
            
            <div class="typical-signals">
                <h4>å¸¸è§ä¿¡å·çš„å‚…é‡Œå¶å˜æ¢å¯¹</h4>
                
                <h5>2.1 çŸ©å½¢è„‰å†²</h5>
                <div class="formula">
                    x(t) = {A, |t| â‰¤ T/2; 0, |t| > T/2}<br>
                    X(jÏ‰) = ATÂ·sinc(Ï‰T/2) = ATÂ·sin(Ï‰T/2)/(Ï‰T/2)
                </div>
                
                <h5>2.2 å•è¾¹æŒ‡æ•°ä¿¡å·</h5>
                <div class="formula">
                    x(t) = e^{-at}u(t), a > 0<br>
                    X(jÏ‰) = 1/(a + jÏ‰)
                </div>
                
                <h5>2.3 åŒè¾¹æŒ‡æ•°ä¿¡å·</h5>
                <div class="formula">
                    x(t) = e^{-a|t|}, a > 0<br>
                    X(jÏ‰) = 2a/(aÂ² + Ï‰Â²)
                </div>
                
                <h5>2.4 é«˜æ–¯è„‰å†²</h5>
                <div class="formula">
                    x(t) = e^{-atÂ²}, a > 0<br>
                    X(jÏ‰) = âˆš(Ï€/a)Â·e^{-Ï‰Â²/(4a)}
                </div>
                
                <h5>2.5 å†²æ¿€å‡½æ•°</h5>
                <div class="formula">
                    Î´(t) â†” 1<br>
                    Î´(t - tâ‚€) â†” e^{-jÏ‰tâ‚€}
                </div>
                
                <div class="controls">
                    <label>å¯¹æ¯”æ˜¾ç¤º:</label>
                    <select id="compareSignals" onchange="updateSignalComparison()">
                        <option value="all">å…¨éƒ¨ä¿¡å·</option>
                        <option value="pulse">è„‰å†²ç±»</option>
                        <option value="exponential">æŒ‡æ•°ç±»</option>
                    </select>
                    <label>æ˜¾ç¤ºç±»å‹:</label>
                    <select id="spectrumView" onchange="updateSignalComparison()">
                        <option value="magnitude">å¹…åº¦è°±</option>
                        <option value="phase">ç›¸ä½è°±</option>
                        <option value="both">å¹…åº¦+ç›¸ä½</option>
                    </select>
                </div>
                <div class="canvas-container">
                    <canvas id="typicalTimeCanvas" class="signal-canvas" width="700" height="350"></canvas>
                    <canvas id="typicalFreqCanvas" class="signal-canvas" width="700" height="350"></canvas>
                </div>
            </div>
            
            <div class="key-points">
                <h4>é¢‘è°±ç‰¹ç‚¹æ€»ç»“ï¼š</h4>
                <ul>
                    <li><strong>æ—¶åŸŸè¶Šçª„ï¼Œé¢‘åŸŸè¶Šå®½</strong>ï¼ˆä¸ç¡®å®šæ€§åŸç†ï¼‰</li>
                    <li><strong>å¯¹ç§°æ€§</strong>ï¼šå®å¶å‡½æ•° â†” å®å¶å‡½æ•°</li>
                    <li><strong>å¹³æ»‘æ€§</strong>ï¼šæ—¶åŸŸè¶Šå¹³æ»‘ï¼Œé¢‘åŸŸè¡°å‡è¶Šå¿«</li>
                    <li><strong>èƒ½é‡å®ˆæ’</strong>ï¼šâˆ«|x(t)|Â²dt = (1/2Ï€)âˆ«|X(jÏ‰)|Â²dÏ‰</li>
                </ul>
            </div>
            
            <div class="exercise">
                <h4>ğŸ”§ ç»ƒä¹ é¢˜2ï¼š</h4>
                <p>å¦‚æœçŸ©å½¢è„‰å†²çš„å®½åº¦å‡åŠï¼Œå…¶é¢‘è°±çš„ä¸»ç“£å®½åº¦ä¼šå¦‚ä½•å˜åŒ–ï¼Ÿ</p>
                <select id="answer2" class="answer-input">
                    <option value="">é€‰æ‹©ç­”æ¡ˆ</option>
                    <option value="double">å¢åŠ ä¸€å€</option>
                    <option value="half">å‡å°‘ä¸€åŠ</option>
                    <option value="same">ä¿æŒä¸å˜</option>
                </select>
                <button onclick="checkAnswer2()">æäº¤ç­”æ¡ˆ</button>
                <div id="feedback2" class="feedback" style="display:none;"></div>
            </div>
        </div>
        
        <div class="section">
            <h2>3. å‚…é‡Œå¶å˜æ¢çš„æ€§è´¨</h2>
            
            <div class="properties-demo">
                <h4>é‡è¦æ€§è´¨åŠå…¶åº”ç”¨</h4>
                
                <div class="property-card">
                    <h5>3.1 çº¿æ€§æ€§è´¨</h5>
                    <div class="formula">
                        axâ‚(t) + bxâ‚‚(t) â†” aXâ‚(jÏ‰) + bXâ‚‚(jÏ‰)
                    </div>
                </div>
                
                <div class="property-card">
                    <h5>3.2 æ—¶ç§»æ€§è´¨</h5>
                    <div class="formula">
                        x(t - tâ‚€) â†” X(jÏ‰)e^{-jÏ‰tâ‚€}
                    </div>
                    <p>æ—¶ç§»åªå½±å“ç›¸ä½è°±ï¼Œä¸å½±å“å¹…åº¦è°±</p>
                </div>
                
                <div class="property-card">
                    <h5>3.3 é¢‘ç§»æ€§è´¨</h5>
                    <div class="formula">
                        x(t)e^{jÏ‰â‚€t} â†” X(j(Ï‰ - Ï‰â‚€))
                    </div>
                    <p>è°ƒåˆ¶çš„æ•°å­¦åŸºç¡€</p>
                </div>
                
                <div class="property-card">
                    <h5>3.4 å°ºåº¦å˜æ¢æ€§è´¨</h5>
                    <div class="formula">
                        x(at) â†” (1/|a|)X(jÏ‰/a)
                    </div>
                    <p>æ—¶åŸŸå‹ç¼©aå€ï¼Œé¢‘åŸŸæ‰©å±•aå€ä¸”å¹…åº¦ç¼©å°1/|a|</p>
                </div>
                
                <div class="property-card">
                    <h5>3.5 å¯¹å¶æ€§è´¨</h5>
                    <div class="formula">
                        X(jt) â†” 2Ï€x(-Ï‰)
                    </div>
                    <p>æ—¶é¢‘åŸŸçš„å¯¹ç§°å…³ç³»</p>
                </div>
                
                <div class="property-card">
                    <h5>3.6 å·ç§¯å®šç†</h5>
                    <div class="formula">
                        xâ‚(t) * xâ‚‚(t) â†” Xâ‚(jÏ‰)Xâ‚‚(jÏ‰)<br>
                        xâ‚(t)xâ‚‚(t) â†” (1/2Ï€)Xâ‚(jÏ‰) * Xâ‚‚(jÏ‰)
                    </div>
                    <p>ç³»ç»Ÿåˆ†æçš„é‡è¦å·¥å…·</p>
                </div>
                
                <div class="controls">
                    <label>é€‰æ‹©æ€§è´¨æ¼”ç¤º:</label>
                    <select id="propertyDemo" onchange="updatePropertyDemo()">
                        <option value="timeshift">æ—¶ç§»æ€§è´¨</option>
                        <option value="freqshift">é¢‘ç§»æ€§è´¨</option>
                        <option value="scaling">å°ºåº¦å˜æ¢</option>
                        <option value="convolution">å·ç§¯å®šç†</option>
                    </select>
                    <label>å‚æ•°:</label>
                    <input type="range" id="propertyParam" min="-3" max="3" step="0.1" value="1">
                    <span id="propertyParamValue">1</span>
                    <button onclick="updatePropertyDemo()">æ›´æ–°æ¼”ç¤º</button>
                </div>
                <div class="dual-view">
                    <div>
                        <canvas id="propertyOriginalCanvas" class="signal-canvas" width="500" height="300"></canvas>
                        <p style="text-align: center;">åŸä¿¡å·</p>
                    </div>
                    <div>
                        <canvas id="propertyTransformedCanvas" class="signal-canvas" width="500" height="300"></canvas>
                        <p style="text-align: center;">å˜æ¢åä¿¡å·</p>
                    </div>
                </div>
                <div id="propertyExplanation" class="spectrum-display">æ€§è´¨è¯´æ˜å°†åœ¨è¿™é‡Œæ˜¾ç¤º</div>
            </div>
            
            <div class="exercise">
                <h4>ğŸ”§ ç»ƒä¹ é¢˜3ï¼š</h4>
                <p>å¦‚æœx(t) â†” X(jÏ‰)ï¼Œé‚£ä¹ˆx(2t)çš„å‚…é‡Œå¶å˜æ¢æ˜¯ï¼š</p>
                <select id="answer3" class="answer-input">
                    <option value="">é€‰æ‹©ç­”æ¡ˆ</option>
                    <option value="half_X_half_w">(1/2)X(jÏ‰/2)</option>
                    <option value="X_2w">X(j2Ï‰)</option>
                    <option value="2X_w">2X(jÏ‰)</option>
                </select>
                <button onclick="checkAnswer3()">æäº¤ç­”æ¡ˆ</button>
                <div id="feedback3" class="feedback" style="display:none;"></div>
            </div>
        </div>
        
        <div class="section">
            <h2>4. å‘¨æœŸä¿¡å·çš„å‚…é‡Œå¶å˜æ¢</h2>
            
            <div class="periodic-ft">
                <h4>å‘¨æœŸä¿¡å·çš„é¢‘åŸŸè¡¨ç¤º</h4>
                
                <h5>4.1 åŸºæœ¬æ€æƒ³</h5>
                <div class="key-points">
                    <ul>
                        <li>å‘¨æœŸä¿¡å·çš„å‚…é‡Œå¶å˜æ¢åŒ…å«å†²æ¿€å‡½æ•°</li>
                        <li>é¢‘è°±æ˜¯ç¦»æ•£çš„ï¼Œç”¨å†²æ¿€å‡½æ•°è¡¨ç¤º</li>
                        <li>è¿æ¥äº†å‚…é‡Œå¶çº§æ•°å’Œå‚…é‡Œå¶å˜æ¢</li>
                    </ul>
                </div>
                
                <h5>4.2 ä¸€èˆ¬å…¬å¼</h5>
                <div class="formula">
                    è‹¥ x(t) = Î£ Câ‚™e^{jnÎ©t} ï¼ˆå‚…é‡Œå¶çº§æ•°ï¼‰<br>
                    åˆ™ X(jÏ‰) = 2Ï€ Î£ Câ‚™Î´(Ï‰ - nÎ©)
                </div>
                
                <h5>4.3 å…¸å‹å‘¨æœŸä¿¡å·</h5>
                
                <div class="formula">
                    <strong>å†²æ¿€ä¸²ï¼š</strong><br>
                    âˆ‘Î´(t - nT) â†” (2Ï€/T)âˆ‘Î´(Ï‰ - nÎ©)
                </div>
                
                <div class="formula">
                    <strong>å‘¨æœŸæ–¹æ³¢ï¼š</strong><br>
                    X(jÏ‰) = 2Ï€âˆ‘[(2A sin(nÎ©Ï„/2))/(nÎ©Ï„/2)]Î´(Ï‰ - nÎ©)
                </div>
                
                <div class="controls">
                    <label>å‘¨æœŸä¿¡å·:</label>
                    <select id="periodicSignal" onchange="updatePeriodicFT()">
                        <option value="impulse_train">å†²æ¿€ä¸²</option>
                        <option value="square_wave">å‘¨æœŸæ–¹æ³¢</option>
                        <option value="sawtooth_wave">å‘¨æœŸé”¯é½¿æ³¢</option>
                    </select>
                    <label>å‘¨æœŸT:</label>
                    <input type="range" id="periodValue" min="1" max="5" step="0.5" value="2">
                    <span id="periodValueLabel">2</span>
                    <label>å ç©ºæ¯”:</label>
                    <input type="range" id="dutyRatio" min="0.1" max="0.9" step="0.1" value="0.5">
                    <span id="dutyRatioLabel">0.5</span>
                    <button onclick="updatePeriodicFT()">æ›´æ–°å˜æ¢</button>
                </div>
                
                <div class="canvas-container">
                    <canvas id="periodicTimeCanvas" class="signal-canvas" width="600" height="250"></canvas>
                    <canvas id="periodicFreqCanvas" class="signal-canvas" width="600" height="250"></canvas>
                    <canvas id="periodicSpectrumCanvas" class="signal-canvas" width="600" height="250"></canvas>
                </div>
                <div id="periodicAnalysis" class="spectrum-display">å‘¨æœŸä¿¡å·åˆ†æç»“æœ</div>
            </div>
            
            <div class="key-points">
                <h4>é‡è¦ç»“è®ºï¼š</h4>
                <ul>
                    <li><strong>æ—¶åŸŸå‘¨æœŸ â†’ é¢‘åŸŸç¦»æ•£</strong></li>
                    <li><strong>æ—¶åŸŸç¦»æ•£ â†’ é¢‘åŸŸå‘¨æœŸ</strong></li>
                    <li>å‘¨æœŸä¿¡å·çš„åŠŸç‡æœ‰é™ï¼Œä½†èƒ½é‡æ— é™</li>
                    <li>å†²æ¿€å‡½æ•°æ˜¯è¿æ¥è¿ç»­å’Œç¦»æ•£é¢‘è°±çš„æ¡¥æ¢</li>
                </ul>
            </div>
            
            <div class="exercise">
                <h4>ğŸ”§ ç»ƒä¹ é¢˜4ï¼š</h4>
                <p>å‘¨æœŸä¸ºTçš„å†²æ¿€ä¸²ï¼Œå…¶é¢‘åŸŸè¡¨ç¤ºä¸­ç›¸é‚»å†²æ¿€çš„é—´éš”æ˜¯ï¼š</p>
                <input type="text" id="answer4" class="answer-input" placeholder="è¾“å…¥ç­”æ¡ˆï¼ˆå¦‚2Ï€/Tï¼‰">
                <button onclick="checkAnswer4()">æäº¤ç­”æ¡ˆ</button>
                <div id="feedback4" class="feedback" style="display:none;"></div>
            </div>
        </div>
        
        <div class="section">
            <h2>5. å‚…é‡Œå¶å˜æ¢çš„åº”ç”¨</h2>
            
            <div class="transform-demo">
                <h4>ç»¼åˆåº”ç”¨ç¤ºä¾‹</h4>
                
                <h5>5.1 æ»¤æ³¢å™¨è®¾è®¡</h5>
                <div class="key-points">
                    <ul>
                        <li>ç†æƒ³ä½é€šæ»¤æ³¢å™¨ï¼šH(jÏ‰) = {1, |Ï‰| â‰¤ Ï‰c; 0, |Ï‰| > Ï‰c}</li>
                        <li>å†²æ¿€å“åº”ï¼šh(t) = (Ï‰c/Ï€)sinc(Ï‰ct/Ï€)</li>
                        <li>å®é™…æ»¤æ³¢å™¨éœ€è¦è€ƒè™‘å› æœæ€§å’Œç¨³å®šæ€§</li>
                    </ul>
                </div>
                
                <h5>5.2 è°ƒåˆ¶ä¸è§£è°ƒ</h5>
                <div class="formula">
                    è°ƒåˆ¶ï¼šx(t)cos(Ï‰â‚€t) â†” [X(j(Ï‰-Ï‰â‚€)) + X(j(Ï‰+Ï‰â‚€))]/2<br>
                    é¢‘è°±æ¬ç§»åˆ°è½½æ³¢é¢‘ç‡é™„è¿‘
                </div>
                
                <div class="controls">
                    <label>åº”ç”¨æ¼”ç¤º:</label>
                    <select id="applicationDemo" onchange="updateApplicationDemo()">
                        <option value="filtering">ä½é€šæ»¤æ³¢</option>
                        <option value="modulation">AMè°ƒåˆ¶</option>
                        <option value="sampling">é‡‡æ ·å®šç†</option>
                    </select>
                    <label>å‚æ•°:</label>
                    <input type="range" id="appParam" min="0.5" max="5" step="0.1" value="2">
                    <span id="appParamValue">2</span>
                    <button onclick="updateApplicationDemo()">æ›´æ–°æ¼”ç¤º</button>
                </div>
                
                <div class="canvas-container">
                    <canvas id="appInputCanvas" class="signal-canvas" width="500" height="200"></canvas>
                    <canvas id="appOutputCanvas" class="signal-canvas" width="500" height="200"></canvas>
                    <canvas id="appSpectrumCanvas" class="signal-canvas" width="500" height="200"></canvas>
                </div>
                <div id="applicationAnalysis" class="spectrum-display">åº”ç”¨åˆ†æç»“æœ</div>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ“ æœ¬ç« å°ç»“</h2>
            <div class="key-points">
                <h4>æ ¸å¿ƒè¦ç‚¹ï¼š</h4>
                <ul>
                    <li><strong>å‚…é‡Œå¶å˜æ¢</strong>ï¼šéå‘¨æœŸä¿¡å·çš„é¢‘åŸŸåˆ†æå·¥å…·ï¼Œè¿æ¥æ—¶åŸŸå’Œé¢‘åŸŸ</li>
                    <li><strong>å…¸å‹ä¿¡å·å˜æ¢</strong>ï¼šæŒæ¡çŸ©å½¢ã€æŒ‡æ•°ã€é«˜æ–¯ç­‰ä¿¡å·çš„å˜æ¢å¯¹</li>
                    <li><strong>é‡è¦æ€§è´¨</strong>ï¼šçº¿æ€§ã€æ—¶ç§»ã€é¢‘ç§»ã€å°ºåº¦å˜æ¢ã€å·ç§¯å®šç†ç­‰</li>
                    <li><strong>å‘¨æœŸä¿¡å·å˜æ¢</strong>ï¼šç”¨å†²æ¿€å‡½æ•°è¡¨ç¤ºç¦»æ•£é¢‘è°±</li>
                    <li><strong>å·¥ç¨‹åº”ç”¨</strong>ï¼šæ»¤æ³¢ã€è°ƒåˆ¶ã€é‡‡æ ·ç­‰ç³»ç»Ÿåˆ†æåŸºç¡€</li>
                </ul>
            </div>
            
            <div class="exercise">
                <h4>ğŸ¯ ç»¼åˆç»ƒä¹ ï¼š</h4>
                <p>è®¡ç®—ä¿¡å·x(t) = e^(-2|t|)çš„å‚…é‡Œå¶å˜æ¢X(jÏ‰)åœ¨Ï‰=1å¤„çš„å€¼ï¼š</p>
                <input type="number" id="answer5" class="answer-input" placeholder="è¾“å…¥æ•°å€¼" step="0.01">
                <button onclick="checkAnswer5()">æäº¤ç­”æ¡ˆ</button>
                <div id="feedback5" class="feedback" style="display:none;"></div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let animationId;
        const colors = {
            primary: '#667eea',
            secondary: '#764ba2',
            accent: '#f093fb',
            success: '#27ae60',
            warning: '#f39c12',
            danger: '#e74c3c',
            info: '#3498db'
        };
        
        // æ•°å­¦å·¥å…·å‡½æ•°
        function sinc(x) {
            return (Math.abs(x) < 1e-10) ? 1 : Math.sin(x) / x;
        }
        
        function rect(t, T) {
            return (Math.abs(t) <= T/2) ? 1 : 0;
        }
        
        function triangle(t, T) {
            return (Math.abs(t) <= T) ? (1 - Math.abs(t)/T) : 0;
        }
        
        // ç»˜å›¾å·¥å…·å‡½æ•°
        function drawAxis(ctx, width, height, xLabel = 't', yLabel = 'x(t)', showGrid = true) {
            ctx.clearRect(0, 0, width, height);
            
            if (showGrid) {
                ctx.strokeStyle = '#f0f0f0';
                ctx.lineWidth = 0.5;
                for (let i = 40; i < width - 40; i += 20) {
                    ctx.beginPath();
                    ctx.moveTo(i, 20);
                    ctx.lineTo(i, height - 20);
                    ctx.stroke();
                }
                for (let i = 20; i < height - 20; i += 20) {
                    ctx.beginPath();
                    ctx.moveTo(40, i);
                    ctx.lineTo(width - 40, i);
                    ctx.stroke();
                }
            }
            
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            
            const centerX = width / 2;
            const centerY = height / 2;
            
            // Xè½´
            ctx.beginPath();
            ctx.moveTo(40, centerY);
            ctx.lineTo(width - 40, centerY);
            ctx.stroke();
            
            // Yè½´
            ctx.beginPath();
            ctx.moveTo(centerX, 20);
            ctx.lineTo(centerX, height - 20);
            ctx.stroke();
            
            // ç®­å¤´
            ctx.fillStyle = '#333';
            ctx.beginPath();
            ctx.moveTo(width - 40, centerY);
            ctx.lineTo(width - 48, centerY - 4);
            ctx.lineTo(width - 48, centerY + 4);
            ctx.fill();
            
            ctx.beginPath();
            ctx.moveTo(centerX, 20);
            ctx.lineTo(centerX - 4, 28);
            ctx.lineTo(centerX + 4, 28);
            ctx.fill();
            
            // æ ‡ç­¾
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.fillText(xLabel, width - 30, centerY + 20);
            ctx.fillText(yLabel, centerX + 10, 35);
            ctx.fillText('0', centerX + 5, centerY + 15);
        }
        
        function drawFrequencyAxis(ctx, width, height, symmetric = true) {
            ctx.clearRect(0, 0, width, height);
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            const centerX = symmetric ? width / 2 : 60;
            const centerY = height - 40;
            
            // Xè½´ï¼ˆé¢‘ç‡è½´ï¼‰
            ctx.beginPath();
            ctx.moveTo(40, centerY);
            ctx.lineTo(width - 40, centerY);
            ctx.stroke();
            
            // Yè½´ï¼ˆå¹…åº¦è½´ï¼‰
            ctx.beginPath();
            ctx.moveTo(centerX, 20);
            ctx.lineTo(centerX, centerY);
            ctx.stroke();
            
            // æ ‡ç­¾
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.fillText('Ï‰', width - 30, centerY + 20);
            ctx.fillText('|X(jÏ‰)|', centerX + 10, 35);
            ctx.fillText('0', centerX - 10, centerY + 15);
        }
        
        // å‚…é‡Œå¶å˜æ¢æ¼”ç¤º
        function updateFourierTransform() {
            const signal = document.getElementById('ftSignal').value;
            const param = parseFloat(document.getElementById('ftParam').value);
            document.getElementById('ftParamValue').textContent = param;
            
            const timeCanvas = document.getElementById('ftTimeCanvas');
            const freqCanvas = document.getElementById('ftFreqCanvas');
            const timeCtx = timeCanvas.getContext('2d');
            const freqCtx = freqCanvas.getContext('2d');
            
            // ç»˜åˆ¶æ—¶åŸŸä¿¡å·
            drawAxis(timeCtx, 600, 300, 't', 'x(t)');
            drawTimeSignal(timeCtx, signal, param);
            
            // ç»˜åˆ¶é¢‘åŸŸä¿¡å·
            drawFrequencyAxis(freqCtx, 600, 300, true);
            drawFrequencySpectrum(freqCtx, signal, param);
            
            // æ˜¾ç¤ºå˜æ¢å…¬å¼
            displayTransformFormula(signal, param);
        }
        
        function drawTimeSignal(ctx, signalType, param) {
            ctx.strokeStyle = colors.primary;
            ctx.lineWidth = 3;
            
            const centerX = 300;
            const centerY = 150;
            const scaleX = 50;
            const scaleY = 80;
            
            ctx.beginPath();
            let first = true;
            
            for (let t = -6; t <= 6; t += 0.02) {
                let y = 0;
                
                switch(signalType) {
                    case 'rect':
                        y = rect(t, param);
                        break;
                    case 'exp':
                        y = (t >= 0) ? Math.exp(-param * t) : 0;
                        break;
                    case 'gaussian':
                        y = Math.exp(-param * t * t);
                        break;
                    case 'triangle':
                        y = triangle(t, param);
                        break;
                }
                
                const x = centerX + t * scaleX;
                const plotY = centerY - y * scaleY;
                
                if (first) {
                    ctx.moveTo(x, plotY);
                    first = false;
                } else {
                    ctx.lineTo(x, plotY);
                }
            }
            ctx.stroke();
        }
        
        function drawFrequencySpectrum(ctx, signalType, param) {
            ctx.strokeStyle = colors.secondary;
            ctx.lineWidth = 3;
            
            const centerX = 300;
            const centerY = 260;
            const scaleX = 30;
            const scaleY = 100;
            
            ctx.beginPath();
            let first = true;
            
            for (let omega = -10; omega <= 10; omega += 0.05) {
                let magnitude = 0;
                
                switch(signalType) {
                    case 'rect':
                        magnitude = param * Math.abs(sinc(omega * param / 2));
                        break;
                    case 'exp':
                        magnitude = 1 / Math.sqrt(param * param + omega * omega);
                        break;
                    case 'gaussian':
                        magnitude = Math.sqrt(Math.PI / param) * Math.exp(-omega * omega / (4 * param));
                        break;
                    case 'triangle':
                        const sincValue = sinc(omega * param / 2);
                        magnitude = param * sincValue * sincValue;
                        break;
                }
                
                const x = centerX + omega * scaleX;
                const plotY = centerY - magnitude * scaleY;
                
                if (first) {
                    ctx.moveTo(x, plotY);
                    first = false;
                } else {
                    ctx.lineTo(x, plotY);
                }
            }
            ctx.stroke();
        }
        
        function displayTransformFormula(signalType, param) {
            let formula = '';
            
            switch(signalType) {
                case 'rect':
                    formula = `çŸ©å½¢è„‰å†² (å®½åº¦=${param}):<br>`;
                    formula += `x(t) = rect(t/${param})<br>`;
                    formula += `X(jÏ‰) = ${param}Â·sinc(Ï‰Â·${param}/2)`;
                    break;
                case 'exp':
                    formula = `å•è¾¹æŒ‡æ•° (è¡°å‡å¸¸æ•°=${param}):<br>`;
                    formula += `x(t) = e^(-${param}t)u(t)<br>`;
                    formula += `X(jÏ‰) = 1/(${param} + jÏ‰)`;
                    break;
                case 'gaussian':
                    formula = `é«˜æ–¯è„‰å†² (å‚æ•°=${param}):<br>`;
                    formula += `x(t) = e^(-${param}tÂ²)<br>`;
                    formula += `X(jÏ‰) = âˆš(Ï€/${param})Â·e^(-Ï‰Â²/(4Â·${param}))`;
                    break;
                case 'triangle':
                    formula = `ä¸‰è§’è„‰å†² (å®½åº¦=${param}):<br>`;
                    formula += `x(t) = Î›(t/${param})<br>`;
                    formula += `X(jÏ‰) = ${param}Â·sincÂ²(Ï‰Â·${param}/2)`;
                    break;
            }
            
            document.getElementById('ftFormula').innerHTML = formula;
        }
        
        // å…¸å‹ä¿¡å·å¯¹æ¯”
        function updateSignalComparison() {
            const compareType = document.getElementById('compareSignals').value;
            const viewType = document.getElementById('spectrumView').value;
            
            const timeCanvas = document.getElementById('typicalTimeCanvas');
            const freqCanvas = document.getElementById('typicalFreqCanvas');
            const timeCtx = timeCanvas.getContext('2d');
            const freqCtx = freqCanvas.getContext('2d');
            
            // æ¸…ç©ºç”»å¸ƒ
            timeCtx.clearRect(0, 0, 700, 350);
            freqCtx.clearRect(0, 0, 700, 350);
            
            // ç»˜åˆ¶åæ ‡è½´
            drawAxis(timeCtx, 700, 350, 't', 'x(t)');
            drawFrequencyAxis(freqCtx, 700, 350, true);
            
            // æ ¹æ®é€‰æ‹©ç»˜åˆ¶ä¿¡å·
            if (compareType === 'all') {
                drawAllTypicalSignals(timeCtx, freqCtx, viewType);
            } else {
                drawSignalGroup(timeCtx, freqCtx, compareType, viewType);
            }
        }
        
        function drawAllTypicalSignals(timeCtx, freqCtx, viewType) {
            const signals = [
                {type: 'rect', param: 2, color: colors.primary, name: 'çŸ©å½¢'},
                {type: 'exp', param: 1, color: colors.secondary, name: 'æŒ‡æ•°'},
                {type: 'gaussian', param: 1, color: colors.accent, name: 'é«˜æ–¯'},
                {type: 'triangle', param: 2, color: colors.success, name: 'ä¸‰è§’'}
            ];
            
            // ç»˜åˆ¶å›¾ä¾‹
            timeCtx.fillStyle = '#333';
            timeCtx.font = '12px Arial';
            timeCtx.fillText('çŸ©å½¢(è“) æŒ‡æ•°(ç´«) é«˜æ–¯(ç²‰) ä¸‰è§’(ç»¿)', 50, 30);
            
            signals.forEach(signal => {
                drawComparisonSignal(timeCtx, freqCtx, signal, viewType);
            });
        }
        
        function drawSignalGroup(timeCtx, freqCtx, group, viewType) {
            let signals = [];
            
            if (group === 'pulse') {
                signals = [
                    {type: 'rect', param: 2, color: colors.primary, name: 'çŸ©å½¢'},
                    {type: 'triangle', param: 2, color: colors.success, name: 'ä¸‰è§’'},
                    {type: 'gaussian', param: 1, color: colors.accent, name: 'é«˜æ–¯'}
                ];
            } else if (group === 'exponential') {
                signals = [
                    {type: 'exp', param: 0.5, color: colors.primary, name: 'a=0.5'},
                    {type: 'exp', param: 1, color: colors.secondary, name: 'a=1'},
                    {type: 'exp', param: 2, color: colors.danger, name: 'a=2'}
                ];
            }
            
            signals.forEach(signal => {
                drawComparisonSignal(timeCtx, freqCtx, signal, viewType);
            });
        }
        
        function drawComparisonSignal(timeCtx, freqCtx, signal, viewType) {
            const {type, param, color} = signal;
            
            // æ—¶åŸŸä¿¡å·
            timeCtx.strokeStyle = color;
            timeCtx.lineWidth = 2;
            timeCtx.beginPath();
            
            const centerX = 350;
            const centerY = 175;
            const scaleX = 40;
            const scaleY = 60;
            
            let first = true;
            for (let t = -6; t <= 6; t += 0.05) {
                let y = 0;
                
                switch(type) {
                    case 'rect':
                        y = rect(t, param);
                        break;
                    case 'exp':
                        y = (t >= 0) ? Math.exp(-param * t) : 0;
                        break;
                    case 'gaussian':
                        y = Math.exp(-param * t * t);
                        break;
                    case 'triangle':
                        y = triangle(t, param);
                        break;
                }
                
                const x = centerX + t * scaleX;
                const plotY = centerY - y * scaleY;
                
                if (first) {
                    timeCtx.moveTo(x, plotY);
                    first = false;
                } else {
                    timeCtx.lineTo(x, plotY);
                }
            }
            timeCtx.stroke();
            
            // é¢‘åŸŸä¿¡å·
            if (viewType === 'magnitude' || viewType === 'both') {
                freqCtx.strokeStyle = color;
                freqCtx.lineWidth = 2;
                freqCtx.beginPath();
                
                const freqCenterY = 310;
                const freqScaleY = 50;
                
                first = true;
                for (let omega = -8; omega <= 8; omega += 0.1) {
                    let magnitude = 0;
                    
                    switch(type) {
                        case 'rect':
                            magnitude = param * Math.abs(sinc(omega * param / 2));
                            break;
                        case 'exp':
                            magnitude = 1 / Math.sqrt(param * param + omega * omega);
                            break;
                        case 'gaussian':
                            magnitude = Math.sqrt(Math.PI / param) * Math.exp(-omega * omega / (4 * param));
                            break;
                        case 'triangle':
                            const sincVal = sinc(omega * param / 2);
                            magnitude = param * sincVal * sincVal;
                            break;
                    }
                    
                    const x = centerX + omega * scaleX;
                    const plotY = freqCenterY - magnitude * freqScaleY;
                    
                    if (first) {
                        freqCtx.moveTo(x, plotY);
                        first = false;
                    } else {
                        freqCtx.lineTo(x, plotY);
                    }
                }
                freqCtx.stroke();
            }
        }
        
        // æ€§è´¨æ¼”ç¤º
        function updatePropertyDemo() {
            const property = document.getElementById('propertyDemo').value;
            const param = parseFloat(document.getElementById('propertyParam').value);
            document.getElementById('propertyParamValue').textContent = param;
            
            const originalCanvas = document.getElementById('propertyOriginalCanvas');
            const transformedCanvas = document.getElementById('propertyTransformedCanvas');
            const originalCtx = originalCanvas.getContext('2d');
            const transformedCtx = transformedCanvas.getContext('2d');
            
            // ç»˜åˆ¶åŸä¿¡å·
            drawAxis(originalCtx, 500, 300, 't', 'x(t)');
            drawBaseSignal(originalCtx, 'rect', 2); // åŸºç¡€çŸ©å½¢ä¿¡å·
            
            // ç»˜åˆ¶å˜æ¢åä¿¡å·
            drawAxis(transformedCtx, 500, 300, 't', 'y(t)');
            drawTransformedSignal(transformedCtx, property, param);
            
            // æ˜¾ç¤ºè¯´æ˜
            displayPropertyExplanation(property, param);
        }
        
        function drawBaseSignal(ctx, type, param) {
            ctx.strokeStyle = colors.info;
            ctx.lineWidth = 3;
            
            const centerX = 250;
            const centerY = 150;
            const scaleX = 40;
            const scaleY = 60;
            
            ctx.beginPath();
            let first = true;
            
            for (let t = -5; t <= 5; t += 0.05) {
                const y = rect(t, param);
                const x = centerX + t * scaleX;
                const plotY = centerY - y * scaleY;
                
                if (first) {
                    ctx.moveTo(x, plotY);
                    first = false;
                } else {
                    ctx.lineTo(x, plotY);
                }
            }
            ctx.stroke();
        }
        
        function drawTransformedSignal(ctx, property, param) {
            ctx.strokeStyle = colors.danger;
            ctx.lineWidth = 3;
            
            const centerX = 250;
            const centerY = 150;
            const scaleX = 40;
            const scaleY = 60;
            
            ctx.beginPath();
            let first = true;
            
            for (let t = -5; t <= 5; t += 0.05) {
                let y = 0;
                
                switch(property) {
                    case 'timeshift':
                        y = rect(t - param, 2);
                        break;
                    case 'freqshift':
                        y = rect(t, 2) * Math.cos(param * t);
                        break;
                    case 'scaling':
                        y = rect(param * t, 2);
                        break;
                    case 'convolution':
                        // ç®€åŒ–çš„å·ç§¯æ¼”ç¤º
                        y = calculateSimpleConvolution(t, param);
                        break;
                }
                
                const x = centerX + t * scaleX;
                const plotY = centerY - y * scaleY;
                
                if (first) {
                    ctx.moveTo(x, plotY);
                    first = false;
                } else {
                    ctx.lineTo(x, plotY);
                }
            }
            ctx.stroke();
        }
        
        function calculateSimpleConvolution(t, param) {
            // çŸ©å½¢ä¸æŒ‡æ•°çš„å·ç§¯çš„ç®€åŒ–è®¡ç®—
            if (t < -1) return 0;
            if (t < 1) return (1 - Math.exp(-param * (t + 1))) / param;
            return (Math.exp(-param * (t - 1)) - Math.exp(-param * (t + 1))) / param;
        }
        
        function displayPropertyExplanation(property, param) {
            let explanation = '';
            
            switch(property) {
                case 'timeshift':
                    explanation = `æ—¶ç§»æ€§è´¨æ¼”ç¤ºï¼šx(t - ${param})<br>`;
                    explanation += `å‚…é‡Œå¶å˜æ¢ï¼šX(jÏ‰)e^(-jÏ‰Â·${param})<br>`;
                    explanation += `å½±å“ï¼šåªæ”¹å˜ç›¸ä½è°±ï¼Œä¸æ”¹å˜å¹…åº¦è°±`;
                    break;
                case 'freqshift':
                    explanation = `é¢‘ç§»æ€§è´¨æ¼”ç¤ºï¼šx(t)cos(${param}t)<br>`;
                    explanation += `å‚…é‡Œå¶å˜æ¢ï¼š[X(j(Ï‰-${param})) + X(j(Ï‰+${param}))]/2<br>`;
                    explanation += `åº”ç”¨ï¼šè°ƒåˆ¶æŠ€æœ¯çš„åŸºç¡€`;
                    break;
                case 'scaling':
                    explanation = `å°ºåº¦å˜æ¢æ¼”ç¤ºï¼šx(${param}t)<br>`;
                    explanation += `å‚…é‡Œå¶å˜æ¢ï¼š(1/${Math.abs(param)})X(jÏ‰/${param})<br>`;
                    explanation += `è§„å¾‹ï¼šæ—¶åŸŸå‹ç¼©ï¼Œé¢‘åŸŸæ‰©å±•`;
                    break;
                case 'convolution':
                    explanation = `å·ç§¯å®šç†æ¼”ç¤ºï¼šx(t) * h(t)<br>`;
                    explanation += `h(t) = e^(-${param}t)u(t)<br>`;
                    explanation += `é¢‘åŸŸï¼šX(jÏ‰)H(jÏ‰)`;
                    break;
            }
            
            document.getElementById('propertyExplanation').innerHTML = explanation;
        }
        
        // å‘¨æœŸä¿¡å·çš„å‚…é‡Œå¶å˜æ¢
        function updatePeriodicFT() {
            const signal = document.getElementById('periodicSignal').value;
            const T = parseFloat(document.getElementById('periodValue').value);
            const duty = parseFloat(document.getElementById('dutyRatio').value);
            document.getElementById('periodValueLabel').textContent = T;
            document.getElementById('dutyRatioLabel').textContent = duty;
            
            const timeCanvas = document.getElementById('periodicTimeCanvas');
            const freqCanvas = document.getElementById('periodicFreqCanvas');
            const spectrumCanvas = document.getElementById('periodicSpectrumCanvas');
            
            const timeCtx = timeCanvas.getContext('2d');
            const freqCtx = freqCanvas.getContext('2d');
            const spectrumCtx = spectrumCanvas.getContext('2d');
            
            // ç»˜åˆ¶æ—¶åŸŸä¿¡å·
            drawAxis(timeCtx, 600, 250, 't', 'x(t)');
            drawPeriodicTimeSignal(timeCtx, signal, T, duty);
            
            // ç»˜åˆ¶é¢‘åŸŸï¼ˆå†²æ¿€å‡½æ•°è¡¨ç¤ºï¼‰
            drawFrequencyAxis(freqCtx, 600, 250, true);
            drawPeriodicFrequencySpectrum(freqCtx, signal, T, duty);
            
            // ç»˜åˆ¶åŒ…ç»œçº¿
            drawAxis(spectrumCtx, 600, 250, 'Ï‰', 'åŒ…ç»œ');
            drawSpectrumEnvelope(spectrumCtx, signal, T, duty);
            
            // åˆ†æç»“æœ
            analyzePeriodicSpectrum(signal, T, duty);
        }
        
        function drawPeriodicTimeSignal(ctx, signalType, T, duty) {
            ctx.strokeStyle = colors.primary;
            ctx.lineWidth = 3;
            
            const centerX = 300;
            const centerY = 125;
            const scaleX = 80;
            const scaleY = 60;
            
            ctx.beginPath();
            let first = true;
            
            for (let t = -3*T; t <= 3*T; t += 0.01) {
                let y = 0;
                const tMod = ((t % T) + T) % T;
                
                switch(signalType) {
                    case 'impulse_train':
                        // ç”¨ç»†çº¿è¡¨ç¤ºå†²æ¿€
                        y = 0;
                        break;
                    case 'square_wave':
                        y = (tMod < duty * T) ? 1 : -1;
                        break;
                    case 'sawtooth_wave':
                        y = (2 * tMod / T) - 1;
                        break;
                }
                
                const x = centerX + t * scaleX / T;
                const plotY = centerY - y * scaleY;
                
                if (first) {
                    ctx.moveTo(x, plotY);
                    first = false;
                } else {
                    ctx.lineTo(x, plotY);
                }
            }
            ctx.stroke();
            
            // ç‰¹æ®Šå¤„ç†å†²æ¿€ä¸²
            if (signalType === 'impulse_train') {
                ctx.strokeStyle = colors.danger;
                ctx.lineWidth = 2;
                for (let n = -3; n <= 3; n++) {
                    const x = centerX + n * scaleX;
                    ctx.beginPath();
                    ctx.moveTo(x, centerY);
                    ctx.lineTo(x, centerY - scaleY);
                    ctx.stroke();
                    
                    // ç®­å¤´
                    ctx.beginPath();
                    ctx.moveTo(x, centerY - scaleY);
                    ctx.lineTo(x - 3, centerY - scaleY + 6);
                    ctx.lineTo(x + 3, centerY - scaleY + 6);
                    ctx.closePath();
                    ctx.fill();
                }
            }
        }
        
        function drawPeriodicFrequencySpectrum(ctx, signalType, T, duty) {
            ctx.strokeStyle = colors.secondary;
            ctx.lineWidth = 3;
            
            const centerX = 300;
            const centerY = 210;
            const omega0 = 2 * Math.PI / T;
            const scaleX = 30;
            const scaleY = 100;
            
            // ç»˜åˆ¶é¢‘è°±çº¿ï¼ˆå†²æ¿€å‡½æ•°ï¼‰
            for (let n = -10; n <= 10; n++) {
                if (n === 0 && signalType !== 'square_wave') continue;
                
                let amplitude = 0;
                const omega = n * omega0;
                
                switch(signalType) {
                    case 'impulse_train':
                        amplitude = 1;
                        break;
                    case 'square_wave':
                        if (n === 0) {
                            amplitude = 0; // å‡è®¾å¯¹ç§°æ–¹æ³¢
                        } else if (n % 2 === 1) {
                            amplitude = Math.abs(sinc(n * duty * Math.PI));
                        }
                        break;
                    case 'sawtooth_wave':
                        if (n !== 0) {
                            amplitude = 1 / Math.abs(n);
                        }
                        break;
                }
                
                if (amplitude > 0.05) { // åªæ˜¾ç¤ºæ˜¾è‘—çš„è°±çº¿
                    const x = centerX + omega * scaleX / omega0;
                    const lineHeight = amplitude * scaleY;
                    
                    ctx.beginPath();
                    ctx.moveTo(x, centerY);
                    ctx.lineTo(x, centerY - lineHeight);
                    ctx.stroke();
                    
                    // æ ‡è®°å†²æ¿€
                    ctx.fillStyle = colors.secondary;
                    ctx.beginPath();
                    ctx.arc(x, centerY - lineHeight, 3, 0, 2 * Math.PI);
                    ctx.fill();
                }
            }
        }
        
        function drawSpectrumEnvelope(ctx, signalType, T, duty) {
            ctx.strokeStyle = colors.accent;
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            
            const centerX = 300;
            const centerY = 210;
            const omega0 = 2 * Math.PI / T;
            const scaleX = 30;
            const scaleY = 100;
            
            ctx.beginPath();
            let first = true;
            
            for (let omega = -20 * omega0; omega <= 20 * omega0; omega += omega0/10) {
                let envelope = 0;
                
                switch(signalType) {
                    case 'impulse_train':
                        envelope = 1;
                        break;
                    case 'square_wave':
                        envelope = Math.abs(sinc(omega * duty * T / 2));
                        break;
                    case 'sawtooth_wave':
                        envelope = (omega !== 0) ? 1 / Math.abs(omega / omega0) : 0;
                        break;
                }
                
                const x = centerX + omega * scaleX / omega0;
                const plotY = centerY - envelope * scaleY;
                
                if (first) {
                    ctx.moveTo(x, plotY);
                    first = false;
                } else {
                    ctx.lineTo(x, plotY);
                }
            }
            ctx.stroke();
            ctx.setLineDash([]);
        }
        
        function analyzePeriodicSpectrum(signalType, T, duty) {
            const omega0 = 2 * Math.PI / T;
            const f0 = 1 / T;
            
            let analysis = `<strong>å‘¨æœŸä¿¡å·é¢‘è°±åˆ†æ:</strong><br>`;
            analysis += `å‘¨æœŸ T = ${T}, åŸºé¢‘ fâ‚€ = ${f0.toFixed(2)} Hz<br>`;
            analysis += `åŸºæ³¢è§’é¢‘ç‡ Î© = ${omega0.toFixed(2)} rad/s<br><br>`;
            
            switch(signalType) {
                case 'impulse_train':
                    analysis += `å†²æ¿€ä¸²çš„é¢‘è°±ï¼š<br>`;
                    analysis += `X(jÏ‰) = (2Ï€/T)âˆ‘Î´(Ï‰ - nÎ©)<br>`;
                    analysis += `ç‰¹ç‚¹ï¼šæ—¶åŸŸå‘¨æœŸ = é¢‘åŸŸå‘¨æœŸ`;
                    break;
                case 'square_wave':
                    analysis += `å‘¨æœŸæ–¹æ³¢çš„é¢‘è°±ï¼š<br>`;
                    analysis += `åªå«å¥‡æ¬¡è°æ³¢ï¼Œå¹…åº¦æŒ‰sincå‡½æ•°è¡°å‡<br>`;
                    analysis += `å ç©ºæ¯” = ${duty}ï¼Œå½±å“é¢‘è°±åŒ…ç»œ`;
                    break;
                case 'sawtooth_wave':
                    analysis += `å‘¨æœŸé”¯é½¿æ³¢çš„é¢‘è°±ï¼š<br>`;
                    analysis += `å«æ‰€æœ‰è°æ³¢ï¼Œå¹…åº¦æŒ‰1/nè¡°å‡<br>`;
                    analysis += `ç›¸ä½ä¸º-Ï€/2ï¼ˆçº¯è™šæ•°ï¼‰`;
                    break;
            }
            
            document.getElementById('periodicAnalysis').innerHTML = analysis;
        }
        
        // åº”ç”¨æ¼”ç¤º
        function updateApplicationDemo() {
            const app = document.getElementById('applicationDemo').value;
            const param = parseFloat(document.getElementById('appParam').value);
            document.getElementById('appParamValue').textContent = param;
            
            const inputCanvas = document.getElementById('appInputCanvas');
            const outputCanvas = document.getElementById('appOutputCanvas');
            const spectrumCanvas = document.getElementById('appSpectrumCanvas');
            
            const inputCtx = inputCanvas.getContext('2d');
            const outputCtx = outputCanvas.getContext('2d');
            const spectrumCtx = spectrumCanvas.getContext('2d');
            
            switch(app) {
                case 'filtering':
                    demonstrateFiltering(inputCtx, outputCtx, spectrumCtx, param);
                    break;
                case 'modulation':
                    demonstrateModulation(inputCtx, outputCtx, spectrumCtx, param);
                    break;
                case 'sampling':
                    demonstrateSampling(inputCtx, outputCtx, spectrumCtx, param);
                    break;
            }
        }
        
        function demonstrateFiltering(inputCtx, outputCtx, spectrumCtx, cutoffFreq) {
            // è¾“å…¥ä¿¡å·ï¼šå«å™ªå£°çš„ä¿¡å·
            drawAxis(inputCtx, 500, 200, 't', 'è¾“å…¥');
            drawNoisySignal(inputCtx, cutoffFreq);
            
            // è¾“å‡ºä¿¡å·ï¼šæ»¤æ³¢åçš„ä¿¡å·
            drawAxis(outputCtx, 500, 200, 't', 'è¾“å‡º');
            drawFilteredSignal(outputCtx, cutoffFreq);
            
            // é¢‘è°±ï¼šæ»¤æ³¢å™¨å“åº”
            drawFrequencyAxis(spectrumCtx, 500, 200, true);
            drawFilterResponse(spectrumCtx, cutoffFreq);
            
            document.getElementById('applicationAnalysis').innerHTML = `
                <strong>ä½é€šæ»¤æ³¢æ¼”ç¤º:</strong><br>
                æˆªæ­¢é¢‘ç‡ = ${cutoffFreq} rad/s<br>
                é«˜é¢‘å™ªå£°è¢«æ»¤é™¤ï¼Œä¿ç•™ä½é¢‘ä¿¡å·åˆ†é‡
            `;
        }
        
        function drawNoisySignal(ctx, param) {
            ctx.strokeStyle = colors.primary;
            ctx.lineWidth = 2;
            
            const centerX = 250;
            const centerY = 100;
            const scaleX = 40;
            const scaleY = 30;
            
            ctx.beginPath();
            let first = true;
            
            for (let t = -5; t <= 5; t += 0.02) {
                // ä½é¢‘ä¿¡å· + é«˜é¢‘å™ªå£°
                const signal = Math.sin(t) + 0.3 * Math.sin(5 * t) + 0.1 * Math.sin(10 * t);
                
                const x = centerX + t * scaleX;
                const plotY = centerY - signal * scaleY;
                
                if (first) {
                    ctx.moveTo(x, plotY);
                    first = false;
                } else {
                    ctx.lineTo(x, plotY);
                }
            }
            ctx.stroke();
        }
        
        function drawFilteredSignal(ctx, cutoffFreq) {
            ctx.strokeStyle = colors.success;
            ctx.lineWidth = 2;
            
            const centerX = 250;
            const centerY = 100;
            const scaleX = 40;
            const scaleY = 30;
            
            ctx.beginPath();
            let first = true;
            
            for (let t = -5; t <= 5; t += 0.02) {
                // æ¨¡æ‹Ÿä½é€šæ»¤æ³¢æ•ˆæœ
                let signal = Math.sin(t);
                if (cutoffFreq > 3) signal += 0.3 * Math.sin(5 * t);
                if (cutoffFreq > 8) signal += 0.1 * Math.sin(10 * t);
                
                const x = centerX + t * scaleX;
                const plotY = centerY - signal * scaleY;
                
                if (first) {
                    ctx.moveTo(x, plotY);
                    first = false;
                } else {
                    ctx.lineTo(x, plotY);
                }
            }
            ctx.stroke();
        }
        
        function drawFilterResponse(ctx, cutoffFreq) {
            ctx.strokeStyle = colors.info;
            ctx.lineWidth = 3;
            
            const centerX = 250;
            const centerY = 170;
            const scaleX = 20;
            const scaleY = 80;
            
            ctx.beginPath();
            let first = true;
            
            for (let omega = -15; omega <= 15; omega += 0.1) {
                // ç†æƒ³ä½é€šæ»¤æ³¢å™¨
                const magnitude = (Math.abs(omega) <= cutoffFreq) ? 1 : 0;
                
                const x = centerX + omega * scaleX;
                const plotY = centerY - magnitude * scaleY;
                
                if (first) {
                    ctx.moveTo(x, plotY);
                    first = false;
                } else {
                    ctx.lineTo(x, plotY);
                }
            }
            ctx.stroke();
        }
        
        function demonstrateModulation(inputCtx, outputCtx, spectrumCtx, carrierFreq) {
            // ç±»ä¼¼çš„å®ç°...
            document.getElementById('applicationAnalysis').innerHTML = `
                <strong>AMè°ƒåˆ¶æ¼”ç¤º:</strong><br>
                è½½æ³¢é¢‘ç‡ = ${carrierFreq} rad/s<br>
                ä¿¡å·é¢‘è°±æ¬ç§»åˆ°è½½æ³¢é¢‘ç‡é™„è¿‘
            `;
        }
        
        function demonstrateSampling(inputCtx, outputCtx, spectrumCtx, samplingRate) {
            // ç±»ä¼¼çš„å®ç°...
            document.getElementById('applicationAnalysis').innerHTML = `
                <strong>é‡‡æ ·å®šç†æ¼”ç¤º:</strong><br>
                é‡‡æ ·ç‡ = ${samplingRate} Hz<br>
                éœ€æ»¡è¶³ fs â‰¥ 2fm ä»¥é¿å…æ··å 
            `;
        }
        
        // ç»ƒä¹ é¢˜ç­”æ¡ˆæ£€æŸ¥
        function checkAnswer1() {
            const answer = document.getElementById('answer1').value;
            const feedback = document.getElementById('feedback1');
            
            if (answer === 'sinc') {
                feedback.textContent = 'æ­£ç¡®ï¼çŸ©å½¢è„‰å†²çš„å‚…é‡Œå¶å˜æ¢æ˜¯sincå‡½æ•°ã€‚';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = 'é”™è¯¯ã€‚çŸ©å½¢è„‰å†²x(t) = rect(t/T)çš„å‚…é‡Œå¶å˜æ¢æ˜¯X(jÏ‰) = TÂ·sinc(Ï‰T/2)ã€‚';
                feedback.className = 'feedback incorrect';
            }
            feedback.style.display = 'block';
        }
        
        function checkAnswer2() {
            const answer = document.getElementById('answer2').value;
            const feedback = document.getElementById('feedback2');
            
            if (answer === 'double') {
                feedback.textContent = 'æ­£ç¡®ï¼æ—¶åŸŸå‹ç¼©ä¸€åŠï¼Œé¢‘åŸŸæ‰©å±•ä¸€å€ã€‚è¿™ä½“ç°äº†æ—¶é¢‘åŸŸçš„åæ¯”å…³ç³»ã€‚';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = 'é”™è¯¯ã€‚æ ¹æ®å°ºåº¦å˜æ¢æ€§è´¨ï¼Œæ—¶åŸŸå‹ç¼©ï¼Œé¢‘åŸŸæ‰©å±•ã€‚å®½åº¦å‡åŠï¼Œä¸»ç“£å®½åº¦å¢åŠ ä¸€å€ã€‚';
                feedback.className = 'feedback incorrect';
            }
            feedback.style.display = 'block';
        }
        
        function checkAnswer3() {
            const answer = document.getElementById('answer3').value;
            const feedback = document.getElementById('feedback3');
            
            if (answer === 'half_X_half_w') {
                feedback.textContent = 'æ­£ç¡®ï¼æ ¹æ®å°ºåº¦å˜æ¢æ€§è´¨ï¼šx(at) â†” (1/|a|)X(jÏ‰/a)ï¼Œæ‰€ä»¥x(2t) â†” (1/2)X(jÏ‰/2)ã€‚';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = 'é”™è¯¯ã€‚å°ºåº¦å˜æ¢æ€§è´¨ï¼šx(at) â†” (1/|a|)X(jÏ‰/a)ï¼Œå› æ­¤x(2t) â†” (1/2)X(jÏ‰/2)ã€‚';
                feedback.className = 'feedback incorrect';
            }
            feedback.style.display = 'block';
        }
        
        function checkAnswer4() {
            const answer = document.getElementById('answer4').value.toLowerCase();
            const feedback = document.getElementById('feedback4');
            
            if (answer.includes('2Ï€/t') || answer.includes('2pi/t') || answer.includes('Ï‰0') || answer.includes('omega')) {
                feedback.textContent = 'æ­£ç¡®ï¼å‘¨æœŸä¸ºTçš„å†²æ¿€ä¸²ï¼Œé¢‘åŸŸä¸­ç›¸é‚»å†²æ¿€çš„é—´éš”æ˜¯Î© = 2Ï€/Tã€‚';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = 'é”™è¯¯ã€‚å‘¨æœŸä¸ºTçš„å†²æ¿€ä¸²çš„å‚…é‡Œå¶å˜æ¢ä¸­ï¼Œç›¸é‚»å†²æ¿€çš„é—´éš”æ˜¯åŸºæ³¢è§’é¢‘ç‡Î© = 2Ï€/Tã€‚';
                feedback.className = 'feedback incorrect';
            }
            feedback.style.display = 'block';
        }
        
        function checkAnswer5() {
            const answer = parseFloat(document.getElementById('answer5').value);
            const feedback = document.getElementById('feedback5');
            
            // x(t) = e^(-2|t|) çš„å‚…é‡Œå¶å˜æ¢æ˜¯ X(jÏ‰) = 4/(4 + Ï‰Â²)
            // åœ¨ Ï‰=1 å¤„ï¼ŒX(j1) = 4/(4 + 1) = 4/5 = 0.8
            const correct = 4 / (4 + 1);
            
            if (Math.abs(answer - correct) < 0.01) {
                feedback.textContent = `æ­£ç¡®ï¼X(j1) = 4/(4 + 1Â²) = 4/5 = 0.8`;
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = `é”™è¯¯ã€‚x(t) = e^(-2|t|)çš„å‚…é‡Œå¶å˜æ¢æ˜¯X(jÏ‰) = 4/(4 + Ï‰Â²)ï¼Œæ‰€ä»¥X(j1) = 4/5 = 0.8`;
                feedback.className = 'feedback incorrect';
            }
            feedback.style.display = 'block';
        }
        
        // åˆå§‹åŒ–
        window.onload = function() {
            updateFourierTransform();
            updateSignalComparison();
            updatePropertyDemo();
            updatePeriodicFT();
            updateApplicationDemo();
        };
        
        // äº‹ä»¶ç›‘å¬å™¨
        document.getElementById('ftParam').addEventListener('input', updateFourierTransform);
        document.getElementById('propertyParam').addEventListener('input', updatePropertyDemo);
        document.getElementById('periodValue').addEventListener('input', updatePeriodicFT);
        document.getElementById('dutyRatio').addEventListener('input', updatePeriodicFT);
        document.getElementById('appParam').addEventListener('input', updateApplicationDemo);
    </script>
</body>
</html>